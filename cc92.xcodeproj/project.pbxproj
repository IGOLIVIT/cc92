// !$*UTF8*$!
{
	archiveVersion = 1;
	classes = {
	};
	objectVersion = 77;
	objects = {

/* Begin PBXContainerItemProxy section */
		78BD099C2ECB63DA0007C67E /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = 78BD09862ECB63D70007C67E /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = 78BD098D2ECB63D70007C67E;
			remoteInfo = cc92;
		};
		78BD09A62ECB63DA0007C67E /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = 78BD09862ECB63D70007C67E /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = 78BD098D2ECB63D70007C67E;
			remoteInfo = cc92;
		};
/* End PBXContainerItemProxy section */

/* Begin PBXFileReference section */
		78BD098E2ECB63D70007C67E /* cc92.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = cc92.app; sourceTree = BUILT_PRODUCTS_DIR; };
		78BD099B2ECB63DA0007C67E /* cc92Tests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = cc92Tests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
		78BD09A52ECB63DA0007C67E /* cc92UITests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = cc92UITests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
/* End PBXFileReference section */

/* Begin PBXFileSystemSynchronizedRootGroup section */
		78BD09902ECB63D70007C67E /* cc92 */ = {
			isa = PBXFileSystemSynchronizedRootGroup;
			path = cc92;
			sourceTree = "<group>";
		};
		78BD099E2ECB63DA0007C67E /* cc92Tests */ = {
			isa = PBXFileSystemSynchronizedRootGroup;
			path = cc92Tests;
			sourceTree = "<group>";
		};
		78BD09A82ECB63DA0007C67E /* cc92UITests */ = {
			isa = PBXFileSystemSynchronizedRootGroup;
			path = cc92UITests;
			sourceTree = "<group>";
		};
/* End PBXFileSystemSynchronizedRootGroup section */

/* Begin PBXFrameworksBuildPhase section */
		78BD098B2ECB63D70007C67E /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		78BD09982ECB63DA0007C67E /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		78BD09A22ECB63DA0007C67E /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXFrameworksBuildPhase section */

/* Begin PBXGroup section */
		78BD09852ECB63D70007C67E = {
			isa = PBXGroup;
			children = (
				78BD09902ECB63D70007C67E /* cc92 */,
				78BD099E2ECB63DA0007C67E /* cc92Tests */,
				78BD09A82ECB63DA0007C67E /* cc92UITests */,
				78BD098F2ECB63D70007C67E /* Products */,
			);
			sourceTree = "<group>";
		};
		78BD098F2ECB63D70007C67E /* Products */ = {
			isa = PBXGroup;
			children = (
				78BD098E2ECB63D70007C67E /* cc92.app */,
				78BD099B2ECB63DA0007C67E /* cc92Tests.xctest */,
				78BD09A52ECB63DA0007C67E /* cc92UITests.xctest */,
			);
			name = Products;
			sourceTree = "<group>";
		};
/* End PBXGroup section */

/* Begin PBXNativeTarget section */
		78BD098D2ECB63D70007C67E /* cc92 */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 78BD09AF2ECB63DA0007C67E /* Build configuration list for PBXNativeTarget "cc92" */;
			buildPhases = (
				78BD098A2ECB63D70007C67E /* Sources */,
				78BD098B2ECB63D70007C67E /* Frameworks */,
				78BD098C2ECB63D70007C67E /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
			);
			fileSystemSynchronizedGroups = (
				78BD09902ECB63D70007C67E /* cc92 */,
			);
			name = cc92;
			packageProductDependencies = (
			);
			productName = cc92;
			productReference = 78BD098E2ECB63D70007C67E /* cc92.app */;
			productType = "com.apple.product-type.application";
		};
		78BD099A2ECB63DA0007C67E /* cc92Tests */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 78BD09B22ECB63DA0007C67E /* Build configuration list for PBXNativeTarget "cc92Tests" */;
			buildPhases = (
				78BD09972ECB63DA0007C67E /* Sources */,
				78BD09982ECB63DA0007C67E /* Frameworks */,
				78BD09992ECB63DA0007C67E /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
				78BD099D2ECB63DA0007C67E /* PBXTargetDependency */,
			);
			fileSystemSynchronizedGroups = (
				78BD099E2ECB63DA0007C67E /* cc92Tests */,
			);
			name = cc92Tests;
			packageProductDependencies = (
			);
			productName = cc92Tests;
			productReference = 78BD099B2ECB63DA0007C67E /* cc92Tests.xctest */;
			productType = "com.apple.product-type.bundle.unit-test";
		};
		78BD09A42ECB63DA0007C67E /* cc92UITests */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 78BD09B52ECB63DA0007C67E /* Build configuration list for PBXNativeTarget "cc92UITests" */;
			buildPhases = (
				78BD09A12ECB63DA0007C67E /* Sources */,
				78BD09A22ECB63DA0007C67E /* Frameworks */,
				78BD09A32ECB63DA0007C67E /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
				78BD09A72ECB63DA0007C67E /* PBXTargetDependency */,
			);
			fileSystemSynchronizedGroups = (
				78BD09A82ECB63DA0007C67E /* cc92UITests */,
			);
			name = cc92UITests;
			packageProductDependencies = (
			);
			productName = cc92UITests;
			productReference = 78BD09A52ECB63DA0007C67E /* cc92UITests.xctest */;
			productType = "com.apple.product-type.bundle.ui-testing";
		};
/* End PBXNativeTarget section */

/* Begin PBXProject section */
		78BD09862ECB63D70007C67E /* Project object */ = {
			isa = PBXProject;
			attributes = {
				BuildIndependentTargetsInParallel = 1;
				LastSwiftUpdateCheck = 2610;
				LastUpgradeCheck = 2610;
				TargetAttributes = {
					78BD098D2ECB63D70007C67E = {
						CreatedOnToolsVersion = 26.1.1;
					};
					78BD099A2ECB63DA0007C67E = {
						CreatedOnToolsVersion = 26.1.1;
						TestTargetID = 78BD098D2ECB63D70007C67E;
					};
					78BD09A42ECB63DA0007C67E = {
						CreatedOnToolsVersion = 26.1.1;
						TestTargetID = 78BD098D2ECB63D70007C67E;
					};
				};
			};
			buildConfigurationList = 78BD09892ECB63D70007C67E /* Build configuration list for PBXProject "cc92" */;
			developmentRegion = en;
			hasScannedForEncodings = 0;
			knownRegions = (
				en,
				Base,
			);
			mainGroup = 78BD09852ECB63D70007C67E;
			minimizedProjectReferenceProxies = 1;
			preferredProjectObjectVersion = 77;
			productRefGroup = 78BD098F2ECB63D70007C67E /* Products */;
			projectDirPath = "";
			projectRoot = "";
			targets = (
				78BD098D2ECB63D70007C67E /* cc92 */,
				78BD099A2ECB63DA0007C67E /* cc92Tests */,
				78BD09A42ECB63DA0007C67E /* cc92UITests */,
			);
		};
/* End PBXProject section */

/* Begin PBXResourcesBuildPhase section */
		78BD098C2ECB63D70007C67E /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		78BD09992ECB63DA0007C67E /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		78BD09A32ECB63DA0007C67E /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXResourcesBuildPhase section */

/* Begin PBXSourcesBuildPhase section */
		78BD098A2ECB63D70007C67E /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		78BD09972ECB63DA0007C67E /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		78BD09A12ECB63DA0007C67E /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXSourcesBuildPhase section */

/* Begin PBXTargetDependency section */
		78BD099D2ECB63DA0007C67E /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			target = 78BD098D2ECB63D70007C67E /* cc92 */;
			targetProxy = 78BD099C2ECB63DA0007C67E /* PBXContainerItemProxy */;
		};
		78BD09A72ECB63DA0007C67E /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			target = 78BD098D2ECB63D70007C67E /* cc92 */;
			targetProxy = 78BD09A62ECB63DA0007C67E /* PBXContainerItemProxy */;
		};
/* End PBXTargetDependency section */

/* Begin XCBuildConfiguration section */
		78BD09AD2ECB63DA0007C67E /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++20";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_ENABLE_OBJC_WEAK = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = dwarf;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_TESTABILITY = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = YES;
				GCC_C_LANGUAGE_STANDARD = gnu17;
				GCC_DYNAMIC_NO_PIC = NO;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_OPTIMIZATION_LEVEL = 0;
				GCC_PREPROCESSOR_DEFINITIONS = (
					"DEBUG=1",
					"$(inherited)",
				);
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 26.1;
				LOCALIZATION_PREFERS_STRING_CATALOGS = YES;
				MTL_ENABLE_DEBUG_INFO = INCLUDE_SOURCE;
				MTL_FAST_MATH = YES;
				ONLY_ACTIVE_ARCH = YES;
				SDKROOT = iphoneos;
				SWIFT_ACTIVE_COMPILATION_CONDITIONS = "DEBUG $(inherited)";
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
			};
			name = Debug;
		};
		78BD09AE2ECB63DA0007C67E /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++20";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_ENABLE_OBJC_WEAK = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = YES;
				GCC_C_LANGUAGE_STANDARD = gnu17;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 26.1;
				LOCALIZATION_PREFERS_STRING_CATALOGS = YES;
				MTL_ENABLE_DEBUG_INFO = NO;
				MTL_FAST_MATH = YES;
				SDKROOT = iphoneos;
				SWIFT_COMPILATION_MODE = wholemodule;
				VALIDATE_PRODUCT = YES;
			};
			name = Release;
		};
		78BD09B02ECB63DA0007C67E /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				ENABLE_PREVIEWS = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_CFBundleDisplayName = "import SwiftUI\n@preconcurrency import WebKit\nimport UserNotifications\nimport UniformTypeIdentifiers\nimport PhotosUI\n\n// MARK: - WebView Component\nstruct WebView: UIViewRepresentable {\n    let url: String\n    @Binding var isLoading: Bool\n    @State private var hideLoaderTimer: Timer?\n    @State private var orientationObserver: NSObjectProtocol?\n    \n    var onNavigationAction: ((URL) -> Bool)?\n    var onLoadFinished: (() -> Void)?\n    var onLoadError: ((Error) -> Void)?\n    var onRedirectLimitReached: ((String) -> Void)? // Callback –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n    var onRedirectDetected: (() -> Void)? // Callback –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞\n    var onUserNavigation: ((String, Date) -> Void)? // Callback –ø—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n    \n    func makeUIView(context: Context) -> WKWebView {\n        let configuration = WKWebViewConfiguration()\n        \n        configuration.allowsInlineMediaPlayback = true\n        configuration.mediaTypesRequiringUserActionForPlayback = []\n        configuration.allowsPictureInPictureMediaPlayback = true\n        \n        let preferences = WKPreferences()\n        \n        // ‚úÖ –ü–û–õ–ù–ê–Ø –ü–û–î–î–ï–†–ñ–ö–ê JAVASCRIPT\n        if #available(iOS 14.0, *) {\n            configuration.defaultWebpagePreferences.allowsContentJavaScript = true\n        } else {\n            preferences.javaScriptEnabled = true\n        }\n        preferences.javaScriptCanOpenWindowsAutomatically = true\n        \n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Ñ—É–Ω–∫—Ü–∏–π\n        if #available(iOS 15.0, *) {\n            configuration.preferences.isTextInteractionEnabled = true\n            configuration.preferences.isElementFullscreenEnabled = true\n        }\n        \n        // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å input –ø–æ–ª—è–º–∏\n        if #available(iOS 16.4, *) {\n            configuration.preferences.shouldPrintBackgrounds = true\n        }\n        \n        configuration.preferences = preferences\n        \n        configuration.allowsAirPlayForMediaPlayback = true\n        \n        // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏\n        configuration.processPool = WKProcessPool()\n        configuration.suppressesIncrementalRendering = true // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–µ–ª—å–∫–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n        \n        // ‚úÖ –ü–û–õ–ù–ê–Ø –ü–û–î–î–ï–†–ñ–ö–ê COOKIE –ò –°–ï–°–°–ò–ô\n        configuration.websiteDataStore = WKWebsiteDataStore.default()\n        \n        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP Cookie –ø–æ–ª–∏—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n        HTTPCookieStorage.shared.cookieAcceptPolicy = .always\n        \n        // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π\n        if #available(iOS 14.0, *) {\n            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n            configuration.limitsNavigationsToAppBoundDomains = false\n        }\n        \n        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\n        if #available(iOS 15.0, *) {\n            configuration.upgradeKnownHostsToHTTPS = false\n        }\n        \n        // ‚úÖ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–ï–ë-–í–û–ó–ú–û–ñ–ù–û–°–¢–ò\n        if #available(iOS 14.0, *) {\n            // –†–∞–∑—Ä–µ—à–∞–µ–º –≤—Å–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞\n            configuration.defaultWebpagePreferences.allowsContentJavaScript = true\n        }\n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤\n        if #available(iOS 14.5, *) {\n            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n            configuration.limitsNavigationsToAppBoundDomains = false\n        }\n        \n        let webView = WKWebView(frame: .zero, configuration: configuration)\n        webView.navigationDelegate = context.coordinator\n        webView.uiDelegate = context.coordinator\n        \n        webView.customUserAgent = DataManager.createCustomUserAgent()\n        webView.allowsBackForwardNavigationGestures = true\n        webView.allowsLinkPreview = true\n        \n        // ‚úÖ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò WEBVIEW\n        webView.isOpaque = true\n        webView.backgroundColor = UIColor.black\n        \n        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–µ–ª—å–∫–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n        webView.scrollView.backgroundColor = UIColor.black\n        webView.scrollView.bounces = true\n        webView.scrollView.alwaysBounceVertical = true\n        \n        // ‚úÖ –ê–ì–†–ï–°–°–ò–í–ù–û–ï –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ó–£–ú–ê –ù–ê –ù–ê–¢–ò–í–ù–û–ú –£–†–û–í–ù–ï\n        webView.scrollView.minimumZoomScale = 1.0\n        webView.scrollView.maximumZoomScale = 1.0\n        webView.scrollView.zoomScale = 1.0\n        webView.scrollView.bouncesZoom = false\n        webView.scrollView.isScrollEnabled = true // –û—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É, —É–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –∑—É–º\n        \n        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑—É–º–∞\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º .never –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —á–µ—Ä–µ–∑ JavaScript\n        // –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ contentInset –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã\n        webView.scrollView.contentInsetAdjustmentBehavior = .never\n        webView.scrollView.automaticallyAdjustsScrollIndicatorInsets = true\n        \n        // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ\n        webView.scrollView.keyboardDismissMode = .none\n        \n        // –û—Ç–∫–ª—é—á–∞–µ–º –í–°–ï –∂–µ—Å—Ç—ã –∑—É–º–∞\n        if let scrollView = webView.scrollView as UIScrollView? {\n            // –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ tap –∂–µ—Å—Ç—ã (–≤–∫–ª—é—á–∞—è –¥–≤–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ)\n            for gesture in scrollView.gestureRecognizers ?? [] {\n                if let tapGesture = gesture as? UITapGestureRecognizer {\n                    if tapGesture.numberOfTapsRequired == 2 {\n                        tapGesture.isEnabled = false\n                        print(\"üö´ Disabled double-tap zoom gesture\")\n                    }\n                }\n                \n                // –û—Ç–∫–ª—é—á–∞–µ–º pinch –∂–µ—Å—Ç—ã\n                if let pinchGesture = gesture as? UIPinchGestureRecognizer {\n                    pinchGesture.isEnabled = false\n                    print(\"üö´ Disabled pinch zoom gesture\")\n                }\n            }\n            \n            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–µ–ª–µ–≥–∞—Ç –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è\n            scrollView.delegate = context.coordinator\n        }\n        \n        // –û—Ç–∫–ª—é—á–∞–µ–º –±–µ–ª—ã–π —Ñ–æ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n        if #available(iOS 15.0, *) {\n            webView.underPageBackgroundColor = UIColor.black\n        }\n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Ñ—É–Ω–∫—Ü–∏–π\n        if #available(iOS 16.4, *) {\n            webView.isInspectable = true // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ Safari Web Inspector\n        }\n        \n        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –∑–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞–º–∏ —ç–∫—Ä–∞–Ω–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –∑—É–º–∞\n        context.coordinator.setupOrientationObserver(for: webView)\n        \n        return webView\n    }\n    \n    func updateUIView(_ webView: WKWebView, context: Context) {\n        guard let targetURL = URL(string: url) else {\n            print(\"‚ùå WebView: Invalid URL - \\(url)\")\n            return\n        }\n        \n        // –ù–ï –≤–º–µ—à–∏–≤–∞–µ–º—Å—è –µ—Å–ª–∏ WebView —É–∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–ª–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n        if webView.isLoading {\n            print(\"üîÑ WebView: Currently loading - not interfering with navigation\")\n            return\n        }\n        \n        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π URL –≤ WebView\n        let currentURLString = webView.url?.absoluteString ?? \"\"\n        let targetURLString = targetURL.absoluteString\n        \n        // –í–ê–ñ–ù–û: –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ\n        // –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∫ config URL –∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º\n        if !currentURLString.isEmpty && currentURLString != targetURLString {\n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            let hasNavigationHistory = webView.canGoBack || webView.canGoForward\n            let isDifferentDomain = URL(string: currentURLString)?.host != URL(string: targetURLString)?.host\n            \n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π URL –∏–∑ UserDefaults\n            let lastUserURL = UserDefaults.standard.string(forKey: \"last_opened_url\") ?? \"\"\n            let isCurrentURLUserOpened = currentURLString == lastUserURL\n            \n            // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º –µ—Å–ª–∏ —ç—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –Ω–∞ —Ç–æ–º –∂–µ –¥–æ–º–µ–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä /redirect/1 -> /redirect/2)\n            let isRedirectSequence = currentURLString.contains(\"/redirect/\") && targetURLString.contains(\"/redirect/\")\n            \n            // –ù–û–í–û–ï: –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –∞ target - —Ä–µ–¥–∏—Ä–µ–∫—Ç\n            let isCurrentFinal = currentURLString.contains(\"/final\") || !currentURLString.contains(\"/redirect/\")\n            let isTargetRedirect = targetURLString.contains(\"/redirect/\")\n            let shouldPreserveFinalPage = isCurrentFinal && isTargetRedirect\n            \n            if ((hasNavigationHistory || (isDifferentDomain && isCurrentURLUserOpened)) && !isRedirectSequence) || shouldPreserveFinalPage {\n                print(\"üö´ WebView: NOT forcing reload\")\n                print(\"   Current URL: \\(currentURLString)\")\n                print(\"   Target URL: \\(targetURLString)\")\n                print(\"   Has history: \\(hasNavigationHistory)\")\n                print(\"   Different domain: \\(isDifferentDomain)\")\n                print(\"   Is user-opened URL: \\(isCurrentURLUserOpened)\")\n                print(\"   Is redirect sequence: \\(isRedirectSequence)\")\n                print(\"   Should preserve final page: \\(shouldPreserveFinalPage)\")\n                print(\"   Allowing user to stay on current page\")\n                return\n            }\n        }\n        \n        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ URL –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª—Å—è –∏ WebView –Ω–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–≥—Ä—É–∑–∫–∏\n        if currentURLString != targetURLString && !webView.isLoading {\n            print(\"üåê WebView: Loading new URL - \\(targetURLString)\")\n            print(\"   Previous URL: \\(currentURLString)\")\n            \n            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä\n            DispatchQueue.main.async {\n                self.isLoading = true\n                self.hideLoaderTimer?.invalidate()\n            }\n            \n            // –°–æ–∑–¥–∞–µ–º –∑–∞–ø—Ä–æ—Å —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏\n            var request = URLRequest(url: targetURL)\n            request.cachePolicy = .returnCacheDataElseLoad\n            request.timeoutInterval = 30.0\n            \n            webView.load(request)\n        } else if webView.isLoading {\n            print(\"üîÑ WebView: Already loading, skipping new request\")\n        } else {\n            print(\"üîÑ WebView: URL unchanged, skipping reload\")\n        }\n    }\n    \n    func makeCoordinator() -> Coordinator {\n        Coordinator(self)\n    }\n    \n    private func createCustomUserAgent() -> String {\n        let systemVersion = UIDevice.current.systemVersion\n        let deviceModel = UIDevice.current.model\n        \n        return \"Mozilla/5.0 (\\(deviceModel); CPU OS \\(systemVersion.replacingOccurrences(of: \".\", with: \"_\")) like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/\\(systemVersion) Mobile/15E148 Safari/604.1\"\n    }\n    \n    class Coordinator: NSObject, WKNavigationDelegate, WKUIDelegate, UIScrollViewDelegate {\n        let parent: WebView\n        private var redirectCount = 0\n        private let maxRedirects = 15\n        private var isHandlingRedirectLimit = false\n        private var orientationObserver: NSObjectProtocol?\n        private weak var webView: WKWebView?\n        private var lastRedirectTime: TimeInterval = 0\n        private var redirectChainStartURL: String?\n        private var isGamblingDomain = false\n        \n        init(_ parent: WebView) {\n            self.parent = parent\n        }\n        \n        deinit {\n            removeOrientationObserver()\n        }\n        \n        func setupOrientationObserver(for webView: WKWebView) {\n            self.webView = webView\n            removeOrientationObserver() // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –µ—Å–ª–∏ –µ—Å—Ç—å\n            \n            orientationObserver = NotificationCenter.default.addObserver(\n                forName: UIDevice.orientationDidChangeNotification,\n                object: nil,\n                queue: .main\n            ) { [weak self] _ in\n                self?.handleOrientationChange()\n            }\n        }\n        \n        private func removeOrientationObserver() {\n            if let observer = orientationObserver {\n                NotificationCenter.default.removeObserver(observer)\n                orientationObserver = nil\n            }\n        }\n        \n        private func handleOrientationChange() {\n            guard let webView = webView else { return }\n            \n            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–≤–æ—Ä–æ—Ç–∞\n            DispatchQueue.main.asyncAfter(deadline: .now() + 0.3) {\n                // –¢–æ–ª—å–∫–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑—É–º, –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É\n                if webView.scrollView.zoomScale != 1.0 {\n                    webView.scrollView.setZoomScale(1.0, animated: false)\n                    print(\"üîÑ WebView zoom reset to 100% after orientation change\")\n                }\n                \n                // –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑—É–º–∞ –±–µ–∑ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π\n                webView.scrollView.minimumZoomScale = 1.0\n                webView.scrollView.maximumZoomScale = 1.0\n                webView.scrollView.bouncesZoom = false\n                \n                print(\"üîß Zoom settings reapplied after orientation change (no page reload)\")\n            }\n        }\n        \n        private func handleDeepLink(url: URL, webView: WKWebView) {\n            print(\"üîó ===== DEEP LINK HANDLING =====\")\n            print(\"üì± URL: \\(url.absoluteString)\")\n            print(\"üîç Scheme: \\(url.scheme ?? \"nil\")\")\n            print(\"üè† Host: \\(url.host ?? \"nil\")\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è deep links\n            // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å –Ω–∞–ø—Ä—è–º—É—é, –Ω–µ –ø–æ–ª–∞–≥–∞—è—Å—å –Ω–∞ canOpenURL\n            print(\"üöÄ Attempting to open deep link directly...\")\n            UIApplication.shared.open(url, options: [:]) { success in\n                print(\"üì± Deep link opened: \\(success ? \"‚úÖ success\" : \"‚ùå failed\")\")\n                \n                if success {\n                    print(\"‚úÖ Successfully opened external app\")\n                    // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –¥–æ–ª—å—à–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                        self.returnToPreviousPage(webView: webView, fallbackURL: currentURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open deep link directly\")\n                    // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä—è–º–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, –ø—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã\n                    DispatchQueue.main.async {\n                        self.handleUnsupportedDeepLink(url: url, webView: webView, fallbackURL: currentURL)\n                    }\n                }\n            }\n            \n            print(\"================================\")\n        }\n        \n        private func handleUPILink(url: URL, webView: WKWebView) {\n            print(\"üí≥ ===== UPI LINK HANDLING =====\")\n            print(\"üì± UPI URL: \\(url.absoluteString)\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –°–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö UPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞\n            let upiApps = [\n                (\"phonepe\", \"PhonePe\"),\n                (\"paytmmp\", \"Paytm\"),\n                (\"gpay\", \"Google Pay\"),\n                (\"bhimupi\", \"BHIM\"),\n                (\"phonepe-switch\", \"PhonePe Switch\"),\n                (\"paytm\", \"Paytm Alt\"),\n                (\"phonepe-merchant\", \"PhonePe Merchant\")\n            ]\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å UPI —Å—Å—ã–ª–∫—É –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n            tryUPIApps(url: url, apps: upiApps, currentIndex: 0, webView: webView, fallbackURL: currentURL)\n            \n            print(\"===============================\")\n        }\n        \n        private func tryUPIApps(url: URL, apps: [(String, String)], currentIndex: Int, webView: WKWebView, fallbackURL: URL?) {\n            guard currentIndex < apps.count else {\n                print(\"‚ùå All UPI apps failed, returning to previous page\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            let (scheme, appName) = apps[currentIndex]\n            let upiURLString = url.absoluteString.replacingOccurrences(of: \"upi://\", with: \"\\(scheme)://\")\n            \n            guard let upiURL = URL(string: upiURLString) else {\n                print(\"‚ùå Invalid UPI URL for \\(appName)\")\n                tryUPIApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            print(\"üîÑ Trying UPI with \\(appName): \\(upiURLString)\")\n            \n            UIApplication.shared.open(upiURL, options: [:]) { success in\n                if success {\n                    print(\"‚úÖ Successfully opened UPI with \\(appName)\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                        self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open UPI with \\(appName), trying next app\")\n                    DispatchQueue.main.async {\n                        self.tryUPIApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                    }\n                }\n            }\n        }\n        \n        private func handleBankIDLink(url: URL, webView: WKWebView) {\n            print(\"üè¶ ===== BANKID LINK HANDLING =====\")\n            print(\"üì± BankID URL: \\(url.absoluteString)\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –°–ø–∏—Å–æ–∫ BankID —Å—Ö–µ–º –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞\n            let bankidApps = [\n                (\"bankid\", \"BankID\"),\n                (\"bankid-app\", \"BankID App\"),\n                (\"mobilebankid\", \"Mobile BankID\")\n            ]\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å BankID —Å—Å—ã–ª–∫—É –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n            tryBankIDApps(url: url, apps: bankidApps, currentIndex: 0, webView: webView, fallbackURL: currentURL)\n            \n            print(\"===============================\")\n        }\n        \n        private func tryBankIDApps(url: URL, apps: [(String, String)], currentIndex: Int, webView: WKWebView, fallbackURL: URL?) {\n            guard currentIndex < apps.count else {\n                print(\"‚ùå All BankID apps failed, returning to previous page\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            let (scheme, appName) = apps[currentIndex]\n            let originalScheme = url.scheme?.lowercased() ?? \"\"\n            let bankidURLString = url.absoluteString.replacingOccurrences(of: \"\\(originalScheme)://\", with: \"\\(scheme)://\")\n            \n            guard let bankidURL = URL(string: bankidURLString) else {\n                print(\"‚ùå Invalid BankID URL for \\(appName)\")\n                tryBankIDApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            print(\"üîÑ Trying BankID with \\(appName): \\(bankidURLString)\")\n            \n            UIApplication.shared.open(bankidURL, options: [:]) { success in\n                if success {\n                    print(\"‚úÖ Successfully opened BankID with \\(appName)\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 3.0) { // BankID –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏\n                        self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open BankID with \\(appName), trying next app\")\n                    DispatchQueue.main.async {\n                        self.tryBankIDApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                    }\n                }\n            }\n        }\n        \n        private func handlePhonePeLink(url: URL, webView: WKWebView) {\n            print(\"üí≥ ===== PHONEPE LINK HANDLING =====\")\n            print(\"üì± PhonePe URL: \\(url.absoluteString)\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –°–ø–∏—Å–æ–∫ PhonePe —Å—Ö–µ–º –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞\n            let phonepeApps = [\n                (\"phonepe\", \"PhonePe\"),\n                (\"phonepe-switch\", \"PhonePe Switch\"),\n                (\"phonepe-merchant\", \"PhonePe Merchant\")\n            ]\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å PhonePe —Å—Å—ã–ª–∫—É –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n            tryPhonePeApps(url: url, apps: phonepeApps, currentIndex: 0, webView: webView, fallbackURL: currentURL)\n            \n            print(\"===============================\")\n        }\n        \n        private func tryPhonePeApps(url: URL, apps: [(String, String)], currentIndex: Int, webView: WKWebView, fallbackURL: URL?) {\n            guard currentIndex < apps.count else {\n                print(\"‚ùå All PhonePe apps failed, returning to previous page\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            let (scheme, appName) = apps[currentIndex]\n            let originalScheme = url.scheme?.lowercased() ?? \"\"\n            let phonepeURLString = url.absoluteString.replacingOccurrences(of: \"\\(originalScheme)://\", with: \"\\(scheme)://\")\n            \n            guard let phonepeURL = URL(string: phonepeURLString) else {\n                print(\"‚ùå Invalid PhonePe URL for \\(appName)\")\n                tryPhonePeApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            print(\"üîÑ Trying PhonePe with \\(appName): \\(phonepeURLString)\")\n            \n            UIApplication.shared.open(phonepeURL, options: [:]) { success in\n                if success {\n                    print(\"‚úÖ Successfully opened PhonePe with \\(appName)\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                        self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open PhonePe with \\(appName), trying next app\")\n                    DispatchQueue.main.async {\n                        self.tryPhonePeApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                    }\n                }\n            }\n        }\n        \n        private func returnToPreviousPage(webView: WKWebView, fallbackURL: URL?) {\n            print(\"‚¨ÖÔ∏è ===== RETURNING TO PREVIOUS PAGE =====\")\n            \n            if webView.canGoBack {\n                print(\"‚úÖ Going back to previous page\")\n                webView.goBack()\n                \n                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ\n                DispatchQueue.main.asyncAfter(deadline: .now() + 3.0) {\n                    self.checkPageLoadStatus(webView: webView, fallbackURL: fallbackURL)\n                }\n            } else if let fallbackURL = fallbackURL {\n                print(\"üîÑ No back history, reloading fallback URL\")\n                webView.load(URLRequest(url: fallbackURL))\n            } else {\n                print(\"‚ö†Ô∏è No back history and no fallback URL\")\n            }\n            \n            print(\"========================================\")\n        }\n        \n        private func checkPageLoadStatus(webView: WKWebView, fallbackURL: URL?) {\n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏\n            webView.evaluateJavaScript(\"document.title\") { result, error in\n                if let title = result as? String {\n                    print(\"üìÑ Current page title: \\(title)\")\n                    \n                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ —Ç–∏–ø–∏—á–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –æ—à–∏–±–æ–∫\n                    let errorTitles = [\"error\", \"not found\", \"404\", \"500\", \"unavailable\", \"problem\"]\n                    let isErrorPage = errorTitles.contains { title.lowercased().contains($0) }\n                    \n                    if isErrorPage {\n                        print(\"‚ùå Error page detected, attempting to reload fallback URL\")\n                        if let fallbackURL = fallbackURL {\n                            DispatchQueue.main.async {\n                                webView.load(URLRequest(url: fallbackURL))\n                            }\n                        }\n                    } else {\n                        print(\"‚úÖ Page appears to be loaded correctly\")\n                    }\n                } else {\n                    print(\"‚ö†Ô∏è Could not get page title: \\(error?.localizedDescription ?? \"unknown error\")\")\n                }\n            }\n        }\n        \n        private func handleUnsupportedDeepLink(url: URL, webView: WKWebView, fallbackURL: URL?) {\n            print(\"üîç ===== HANDLING UNSUPPORTED DEEP LINK =====\")\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–∫—Ä—ã—Ç–∏—è\n            if let scheme = url.scheme?.lowercased() {\n                var alternativeURL: URL?\n                var shouldTryAlternativeSchemes = false\n                \n                switch scheme {\n                // –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏\n                case \"instagram\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://instagram.com\\(path)\")\n                    }\n                case \"twitter\", \"x\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://twitter.com\\(path)\")\n                    }\n                case \"facebook\", \"fb\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://facebook.com\\(path)\")\n                    }\n                case \"youtube\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://youtube.com\\(path)\")\n                    }\n                case \"tiktok\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://tiktok.com\\(path)\")\n                    }\n                \n                // –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n                case \"paytmmp\", \"paytm\":\n                    print(\"üí≥ Detected Paytm payment link\")\n                    shouldTryAlternativeSchemes = true\n                    // –ü—ã—Ç–∞–µ–º—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è Paytm\n                    let paytmSchemes = [\"paytm://\", \"paytmmp://\"]\n                    for altScheme in paytmSchemes {\n                        if altScheme != \"\\(scheme)://\" {\n                            let altURLString = url.absoluteString.replacingOccurrences(of: \"\\(scheme)://\", with: altScheme)\n                            if let altURL = URL(string: altURLString) {\n                                print(\"üîÑ Trying alternative Paytm scheme: \\(altURLString)\")\n                                UIApplication.shared.open(altURL, options: [:]) { success in\n                                    if success {\n                                        print(\"‚úÖ Successfully opened Paytm with alternative scheme\")\n                                        DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                        }\n                                        return\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    \n                case \"phonepe\", \"phonepe-merchant\", \"phonepe-switch\":\n                    print(\"üí≥ Detected PhonePe payment link\")\n                    shouldTryAlternativeSchemes = true\n                    // –ü—ã—Ç–∞–µ–º—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è PhonePe\n                    let phonepeSchemes = [\"phonepe://\", \"phonepe-merchant://\", \"phonepe-switch://\"]\n                    for altScheme in phonepeSchemes {\n                        if altScheme != \"\\(scheme)://\" {\n                            let altURLString = url.absoluteString.replacingOccurrences(of: \"\\(scheme)://\", with: altScheme)\n                            if let altURL = URL(string: altURLString) {\n                                print(\"üîÑ Trying alternative PhonePe scheme: \\(altURLString)\")\n                                UIApplication.shared.open(altURL, options: [:]) { success in\n                                    if success {\n                                        print(\"‚úÖ Successfully opened PhonePe with alternative scheme\")\n                                        DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                        }\n                                        return\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    \n                case \"bankid\", \"bankid-app\", \"mobilebankid\":\n                    print(\"üè¶ Detected BankID authentication link\")\n                    shouldTryAlternativeSchemes = true\n                    // –ü—ã—Ç–∞–µ–º—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è BankID\n                    let bankidSchemes = [\"bankid://\", \"bankid-app://\", \"mobilebankid://\"]\n                    for altScheme in bankidSchemes {\n                        if altScheme != \"\\(scheme)://\" {\n                            let altURLString = url.absoluteString.replacingOccurrences(of: \"\\(scheme)://\", with: altScheme)\n                            if let altURL = URL(string: altURLString) {\n                                print(\"üîÑ Trying alternative BankID scheme: \\(altURLString)\")\n                                UIApplication.shared.open(altURL, options: [:]) { success in\n                                    if success {\n                                        print(\"‚úÖ Successfully opened BankID with alternative scheme\")\n                                        DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                        }\n                                        return\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    \n                case \"gpay\", \"googlepay\", \"tez\":\n                    print(\"üí≥ Detected Google Pay payment link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"upi\":\n                    print(\"üí≥ Detected UPI payment link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"bhim\", \"bhimupi\":\n                    print(\"üí≥ Detected BHIM payment link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"whatsapp\":\n                    print(\"üí¨ Detected WhatsApp link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"telegram\", \"tg\":\n                    print(\"üí¨ Detected Telegram link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                default:\n                    print(\"ü§∑‚Äç‚ôÇÔ∏è Unknown scheme: \\(scheme)\")\n                    shouldTryAlternativeSchemes = true\n                }\n                \n                // –ï—Å–ª–∏ –µ—Å—Ç—å –≤–µ–±-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞, –ø—ã—Ç–∞–µ–º—Å—è –µ–µ\n                if let altURL = alternativeURL {\n                    print(\"üîÑ Trying web alternative URL: \\(altURL.absoluteString)\")\n                    webView.load(URLRequest(url: altURL))\n                    return\n                }\n                \n                // –î–ª—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–¥–æ–∂–¥–∞—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å\n                if shouldTryAlternativeSchemes {\n                    print(\"‚è≥ Waiting and retrying deep link for \\(scheme)...\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) {\n                        UIApplication.shared.open(url, options: [:]) { success in\n                            if success {\n                                print(\"‚úÖ Successfully opened \\(scheme) on retry\")\n                                DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                    self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                }\n                            } else {\n                                print(\"‚ùå Failed to open \\(scheme) on retry\")\n                                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n                                DispatchQueue.main.async {\n                                    self.showDeepLinkFailureMessage(scheme: scheme, webView: webView, fallbackURL: fallbackURL)\n                                }\n                            }\n                        }\n                    }\n                    return\n                }\n            }\n            \n            // –ï—Å–ª–∏ –Ω–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n            print(\"‚¨ÖÔ∏è No alternative found, returning to previous page\")\n            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n            \n            print(\"===============================================\")\n        }\n        \n        private func showDeepLinkFailureMessage(scheme: String, webView: WKWebView, fallbackURL: URL?) {\n            print(\"üí¨ ===== SHOWING DEEP LINK FAILURE MESSAGE =====\")\n            \n            let appName = getAppNameForScheme(scheme)\n            let message = \"The \\(appName) app is required to complete this action. Please install \\(appName) from the App Store or try again.\"\n            \n            // –°–æ–∑–¥–∞–µ–º alert\n            let alert = UIAlertController(\n                title: \"App Required\",\n                message: message,\n                preferredStyle: .alert\n            )\n            \n            // –ö–Ω–æ–ø–∫–∞ \"Try Again\"\n            alert.addAction(UIAlertAction(title: \"Try Again\", style: .default) { _ in\n                print(\"üîÑ User chose to try again\")\n                // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å –µ—â–µ —Ä–∞–∑\n                if let originalURL = URL(string: \"\\(scheme)://\\(fallbackURL?.path ?? \"\")\") {\n                    UIApplication.shared.open(originalURL, options: [:]) { success in\n                        if !success {\n                            // –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n                            DispatchQueue.main.async {\n                                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                            }\n                        }\n                    }\n                } else {\n                    self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                }\n            })\n            \n            // –ö–Ω–æ–ø–∫–∞ \"Cancel\"\n            alert.addAction(UIAlertAction(title: \"Cancel\", style: .cancel) { _ in\n                print(\"‚ùå User cancelled deep link\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n            })\n            \n            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º alert\n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let window = windowScene.windows.first,\n               let rootViewController = window.rootViewController {\n                DispatchQueue.main.async {\n                    rootViewController.present(alert, animated: true)\n                }\n            } else {\n                // –ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ–º –ø–æ–∫–∞–∑–∞—Ç—å alert, –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n            }\n            \n            print(\"================================================\")\n        }\n        \n        private func getAppNameForScheme(_ scheme: String) -> String {\n            switch scheme.lowercased() {\n            case \"paytmmp\", \"paytm\":\n                return \"Paytm\"\n            case \"phonepe\", \"phonepe-merchant\", \"phonepe-switch\":\n                return \"PhonePe\"\n            case \"bankid\", \"bankid-app\", \"mobilebankid\":\n                return \"BankID\"\n            case \"gpay\", \"googlepay\", \"tez\":\n                return \"Google Pay\"\n            case \"upi\":\n                return \"UPI\"\n            case \"bhim\", \"bhimupi\":\n                return \"BHIM\"\n            case \"whatsapp\":\n                return \"WhatsApp\"\n            case \"telegram\", \"tg\":\n                return \"Telegram\"\n            case \"instagram\":\n                return \"Instagram\"\n            case \"twitter\", \"x\":\n                return \"Twitter\"\n            case \"facebook\", \"fb\":\n                return \"Facebook\"\n            case \"youtube\":\n                return \"YouTube\"\n            case \"tiktok\":\n                return \"TikTok\"\n            default:\n                return \"required\"\n            }\n        }\n        \n        private func shouldOpenURLExternally(url: URL, urlString: String, scheme: String, host: String) -> Bool {\n            // –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ª—É—á—à–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö\n            let externalAppDomains = [\n                // –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏\n                \"instagram.com\", \"www.instagram.com\",\n                \"facebook.com\", \"www.facebook.com\", \"m.facebook.com\",\n                \"twitter.com\", \"www.twitter.com\", \"mobile.twitter.com\", \"x.com\", \"www.x.com\",\n                \"tiktok.com\", \"www.tiktok.com\", \"m.tiktok.com\",\n                \"linkedin.com\", \"www.linkedin.com\",\n                \"snapchat.com\", \"www.snapchat.com\",\n                \n                // –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã\n                \"telegram.org\", \"t.me\", \"web.telegram.org\",\n                \"whatsapp.com\", \"www.whatsapp.com\", \"web.whatsapp.com\",\n                \"discord.com\", \"www.discord.com\",\n                \n                // –í–∏–¥–µ–æ –∏ –º—É–∑—ã–∫–∞\n                \"youtube.com\", \"www.youtube.com\", \"m.youtube.com\",\n                \"youtu.be\",\n                \"spotify.com\", \"www.spotify.com\", \"open.spotify.com\",\n                \"soundcloud.com\", \"www.soundcloud.com\",\n                \n                // –ú–∞–≥–∞–∑–∏–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n                \"apps.apple.com\", \"itunes.apple.com\",\n                \"play.google.com\",\n                \n                // –ö–∞—Ä—Ç—ã\n                \"maps.google.com\", \"www.google.com/maps\",\n                \"maps.apple.com\"\n            ]\n            \n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ URL –¥–æ–º–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞\n            let shouldOpen = externalAppDomains.contains { domain in\n                host == domain || host.hasSuffix(\".\" + domain)\n            }\n            \n            if shouldOpen {\n                print(\"üéØ Domain \\(host) should be opened externally\")\n            }\n            \n            return shouldOpen\n        }\n        \n        private func isGamblingDomain(_ url: URL) -> Bool {\n            guard let host = url.host?.lowercased() else { return false }\n            \n            let gamblingDomains = [\n                // Casino domains\n                \"ninecasino\", \"betonliga\", \"invofy\", \"casino\", \"bet\", \"poker\", \"slots\",\n                \"gambling\", \"game\", \"play\", \"win\", \"jackpot\", \"roulette\", \"blackjack\",\n                // Gaming providers\n                \"bgaming\", \"jacks\", \"pragmatic\", \"netent\", \"microgaming\", \"playtech\",\n                \"evolution\", \"ezugi\", \"playson\", \"quickspin\", \"yggdrasil\", \"nolimit\",\n                // Specific domains from logs\n                \"ninecasinogo.com\", \"02ninecasino61.com\", \"auth.betonliga.com\", \"invofy5.com\"\n            ]\n            \n            return gamblingDomains.contains { domain in\n                host.contains(domain)\n            }\n        }\n        \n        private func isGamingProviderDomain(_ url: URL) -> Bool {\n            guard let host = url.host?.lowercased() else { return false }\n            \n            let gamingProviders = [\n                // Major gaming providers that use about:blank and special schemes\n                \"bgaming\", \"jacks\", \"pragmaticplay\", \"netent\", \"microgaming\", \"playtech\",\n                \"evolution\", \"ezugi\", \"playson\", \"quickspin\", \"yggdrasil\", \"nolimitcity\",\n                \"redtiger\", \"bigtime\", \"relax\", \"hacksaw\", \"push\", \"thunderkick\",\n                \"kalamba\", \"fantasma\", \"booming\", \"spinomenal\", \"wazdan\", \"evoplay\"\n            ]\n            \n            return gamingProviders.contains { provider in\n                host.contains(provider)\n            }\n        }\n        \n        private func isTrackingDomain(_ url: URL) -> Bool {\n            guard let host = url.host?.lowercased() else { return false }\n            \n            let trackingDomains = [\n                // Google tracking\n                \"doubleclick.net\", \"googleadservices.com\", \"googlesyndication.com\",\n                \"google-analytics.com\", \"googletagmanager.com\", \"googletagservices.com\",\n                // Facebook tracking\n                \"facebook.com\", \"connect.facebook.net\",\n                // Other tracking\n                \"hotjar.com\", \"mixpanel.com\", \"segment.com\", \"amplitude.com\",\n                \"yandex.ru\", \"mc.yandex.ru\"\n            ]\n            \n            return trackingDomains.contains { domain in\n                host.contains(domain)\n            }\n        }\n        \n        private func resetRedirectCounterSafely() {\n            let now = Date().timeIntervalSince1970\n            \n            // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª\n            let resetInterval: TimeInterval = isGamblingDomain ? 10.0 : 3.0\n            \n            if now - lastRedirectTime > resetInterval {\n                redirectCount = 0\n                isHandlingRedirectLimit = false\n                redirectChainStartURL = nil\n                print(\"üîÑ Redirect counter reset after \\(resetInterval)s interval\")\n            }\n        }\n        \n        private func disableZoomWithJavaScript(_ webView: WKWebView) {\n            let jsCode = \"\"\"\n                // –ü–û–õ–ù–û–ï –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ó–£–ú–ê –° –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–û–ô –û–ë–†–ê–ë–û–¢–ö–û–ô –ö–õ–ê–í–ò–ê–¢–£–†–´\n                \n                // ============================================\n                // –ì–õ–û–ë–ê–õ–¨–ù–´–ô STATE (Single Source of Truth)\n                // ============================================\n                var GLOBAL_STATE = {\n                    activeInputElement: null,\n                    keyboardVisible: false,\n                    keyboardAnimating: false,\n                    scrollDebounceTimer: null,\n                    lastViewportHeight: window.visualViewport ? window.visualViewport.height : window.innerHeight\n                };\n                \n                // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º\n                window.getActiveInputElement = function() {\n                    return GLOBAL_STATE.activeInputElement;\n                };\n                \n                // 1. –£—Å–∏–ª–µ–Ω–Ω—ã–π viewport meta tag\n                function enforceViewportSettings() {\n                    var viewport = document.querySelector('meta[name=\"viewport\"]');\n                    var viewportContent = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover';\n                    \n                    if (viewport) {\n                        viewport.setAttribute('content', viewportContent);\n                    } else {\n                        var meta = document.createElement('meta');\n                        meta.name = 'viewport';\n                        meta.content = viewportContent;\n                        document.getElementsByTagName('head')[0].appendChild(meta);\n                    }\n                    \n                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ viewport —Ç–µ–≥–∏\n                    var allViewports = document.querySelectorAll('meta[name=\"viewport\"]');\n                    for (var i = 0; i < allViewports.length; i++) {\n                        allViewports[i].setAttribute('content', viewportContent);\n                    }\n                }\n                \n                // 2. CSS —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑—É–º–∞ (—É–ª—É—á—à–µ–Ω–Ω—ã–µ –¥–ª—è input –ø–æ–ª–µ–π)\n                function addZoomPreventionCSS() {\n                    var style = document.createElement('style');\n                    style.textContent = `\n                        * {\n                            -webkit-user-select: none;\n                            -webkit-touch-callout: none;\n                            -webkit-tap-highlight-color: transparent;\n                        }\n                        \n                        html, body {\n                            -ms-touch-action: manipulation;\n                            touch-action: manipulation;\n                            -webkit-text-size-adjust: 100%;\n                            -ms-text-size-adjust: 100%;\n                            -webkit-overflow-scrolling: touch;\n                        }\n                        \n                        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è input —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */\n                        input, textarea, select, button, a, [contenteditable], [role=\"textbox\"] {\n                            -webkit-user-select: auto !important;\n                            -webkit-touch-callout: default !important;\n                            touch-action: manipulation !important;\n                            -webkit-tap-highlight-color: rgba(0,0,0,0.1) !important;\n                        }\n                        \n                        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –¥–ª—è —Ñ–æ—Ä–º */\n                        form, .form-control, .input, .form-group {\n                            -webkit-user-select: auto !important;\n                            touch-action: manipulation !important;\n                        }\n                        \n                        /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ \"–ø—Ä—ã–∂–∫–∏\" –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */\n                        input:focus, textarea:focus, select:focus, [contenteditable]:focus {\n                            -webkit-transform: translateZ(0);\n                            transform: translateZ(0);\n                        }\n                    `;\n                    document.head.appendChild(style);\n                }\n                \n                // 3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö –∂–µ—Å—Ç–æ–≤ –∑—É–º–∞\n                function blockZoomGestures() {\n                    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∂–µ—Å—Ç—ã –ø–∏–Ω—á–∞\n                    document.addEventListener('gesturestart', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }, { passive: false, capture: true });\n                    \n                    document.addEventListener('gesturechange', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }, { passive: false, capture: true });\n                    \n                    document.addEventListener('gestureend', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }, { passive: false, capture: true });\n                    \n                    // –ë–ª–æ–∫–∏—Ä—É–µ–º wheel —Å–æ–±—ã—Ç–∏—è (–∑—É–º –∫–æ–ª–µ—Å–∏–∫–æ–º –º—ã—à–∏)\n                    document.addEventListener('wheel', function(e) {\n                        if (e.ctrlKey) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    }, { passive: false, capture: true });\n                    \n                    // –ë–ª–æ–∫–∏—Ä—É–µ–º keydown —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∑—É–º–∞ (Ctrl +/-)\n                    document.addEventListener('keydown', function(e) {\n                        if ((e.ctrlKey || e.metaKey) && (e.key === '+' || e.key === '-' || e.key === '=' || e.key === '0')) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    }, { passive: false, capture: true });\n                }\n                \n                // 4. –£–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–≤–æ–π–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è —Å –∑–∞—â–∏—Ç–æ–π input –ø–æ–ª–µ–π\n                function blockDoubleTapZoom() {\n                    var lastTouchEnd = 0;\n                    var touchCount = 0;\n                    var lastTouchTarget = null;\n                    var isNavigating = false;\n                    var touchStartTime = 0;\n                    var touchStartCount = 0;\n                    \n                    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é\n                    window.addEventListener('beforeunload', function() {\n                        isNavigating = true;\n                        setTimeout(function() { isNavigating = false; }, 1000);\n                    });\n                    \n                    window.addEventListener('popstate', function() {\n                        isNavigating = true;\n                        setTimeout(function() { isNavigating = false; }, 1000);\n                    });\n                    \n                    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö ‚Üí –ò–°–ü–û–õ–¨–ó–£–ï–ú –ì–õ–û–ë–ê–õ–¨–ù–´–ô STATE\n                    document.addEventListener('focusin', function(event) {\n                        var target = event.target;\n                        if (isInputElement(target)) {\n                            GLOBAL_STATE.activeInputElement = target;\n                            console.log('üìù Input element focused, disabling zoom protection temporarily');\n                        }\n                    }, true);\n                    \n                    document.addEventListener('focusout', function(event) {\n                        var target = event.target;\n                        if (isInputElement(target)) {\n                            // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–±—Ä–æ—Å–æ–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤\n                            setTimeout(function() {\n                                GLOBAL_STATE.activeInputElement = null;\n                                console.log('üìù Input element unfocused, re-enabling zoom protection');\n                            }, 300);\n                        }\n                    }, true);\n                    \n                    // –ë–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ touchstart\n                    document.addEventListener('touchstart', function(event) {\n                        if (isNavigating) return;\n                        \n                        var target = event.target;\n                        \n                        // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –∏–ª–∏ –∫–æ–≥–¥–∞ input –∞–∫—Ç–∏–≤–µ–Ω\n                        if (isInputElement(target) || GLOBAL_STATE.activeInputElement) {\n                            return;\n                        }\n                        \n                        var now = Date.now();\n                        if (now - touchStartTime <= 350) { // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—Ä–µ–º—è –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è\n                            touchStartCount++;\n                            if (touchStartCount >= 2) {\n                                if (!isInteractiveElement(target)) {\n                                    event.preventDefault();\n                                    console.log('üö´ Blocked fast double touchstart');\n                                    return false;\n                                }\n                            }\n                        } else {\n                            touchStartCount = 1;\n                        }\n                        touchStartTime = now;\n                    }, { passive: false });\n                    \n                    // –ë–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ touchend\n                    document.addEventListener('touchend', function(event) {\n                        if (isNavigating) return;\n                        \n                        var target = event.target;\n                        \n                        // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –∏–ª–∏ –∫–æ–≥–¥–∞ input –∞–∫—Ç–∏–≤–µ–Ω\n                        if (isInputElement(target) || GLOBAL_STATE.activeInputElement) {\n                            return;\n                        }\n                        \n                        var now = Date.now();\n                        \n                        if (now - lastTouchEnd > 500 || target !== lastTouchTarget) {\n                            touchCount = 1;\n                        } else {\n                            touchCount++;\n                        }\n                        \n                        // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –¥–≤–æ–π–Ω—ã–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö\n                        if (now - lastTouchEnd <= 450 && touchCount >= 2) { // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—Ä–µ–º—è\n                            if (!isInteractiveElement(target)) {\n                                event.preventDefault();\n                                console.log('üö´ Blocked double-tap zoom');\n                                touchCount = 0;\n                                return false;\n                            }\n                        }\n                        \n                        lastTouchEnd = now;\n                        lastTouchTarget = target;\n                    }, { passive: false });\n                    \n                    // –ë–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ click —Å–æ–±—ã—Ç–∏–π\n                    document.addEventListener('click', function(event) {\n                        if (isNavigating) return;\n                        \n                        var target = event.target;\n                        \n                        // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º click –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –∏–ª–∏ –∫–æ–≥–¥–∞ input –∞–∫—Ç–∏–≤–µ–Ω\n                        if (isInputElement(target) || GLOBAL_STATE.activeInputElement) {\n                            return;\n                        }\n                        \n                        var now = Date.now();\n                        if (now - lastClickTime <= 450) { // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—Ä–µ–º—è\n                            clickCount++;\n                            if (clickCount >= 2 && !isInteractiveElement(target)) {\n                                event.preventDefault();\n                                console.log('üö´ Blocked double-click zoom');\n                                return false;\n                            }\n                        } else {\n                            clickCount = 1;\n                        }\n                        lastClickTime = now;\n                    }, { passive: false });\n                }\n                \n                // 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ input —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n                function isInputElement(target) {\n                    if (!target) return false;\n                    \n                    var tagName = target.tagName ? target.tagName.toLowerCase() : '';\n                    var inputTypes = ['input', 'textarea', 'select'];\n                    \n                    if (inputTypes.includes(tagName)) {\n                        return true;\n                    }\n                    \n                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º contenteditable —ç–ª–µ–º–µ–Ω—Ç—ã\n                    if (target.contentEditable === 'true' || target.contentEditable === '') {\n                        return true;\n                    }\n                    \n                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º role=\"textbox\"\n                    if (target.getAttribute('role') === 'textbox') {\n                        return true;\n                    }\n                    \n                    return false;\n                }\n                \n                // 6. –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n                function isInteractiveElement(target) {\n                    if (!target) return false;\n                    \n                    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º input —ç–ª–µ–º–µ–Ω—Ç—ã\n                    if (isInputElement(target)) {\n                        return true;\n                    }\n                    \n                    var currentElement = target;\n                    var maxDepth = 7;\n                    var depth = 0;\n                    \n                    while (currentElement && depth < maxDepth) {\n                        var tagName = currentElement.tagName ? currentElement.tagName.toLowerCase() : '';\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ–≥–∏\n                        if (['button', 'a', 'input', 'select', 'textarea', 'label', 'option', 'form'].includes(tagName)) {\n                            return true;\n                        }\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –∫–ª–∞—Å—Å—ã\n                        if (currentElement.onclick || \n                            currentElement.getAttribute('onclick') ||\n                            currentElement.getAttribute('role') === 'button' ||\n                            currentElement.getAttribute('role') === 'textbox' ||\n                            currentElement.getAttribute('tabindex') ||\n                            currentElement.hasAttribute('data-click') ||\n                            currentElement.hasAttribute('data-action') ||\n                            currentElement.hasAttribute('data-toggle') ||\n                            currentElement.classList.contains('btn') ||\n                            currentElement.classList.contains('button') ||\n                            currentElement.classList.contains('clickable') ||\n                            currentElement.classList.contains('link') ||\n                            currentElement.classList.contains('interactive') ||\n                            currentElement.classList.contains('form-control') ||\n                            currentElement.classList.contains('input')) {\n                            return true;\n                        }\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∏–ª–∏\n                        try {\n                            var styles = window.getComputedStyle(currentElement);\n                            if (styles.cursor === 'pointer') {\n                                return true;\n                            }\n                        } catch (e) {}\n                        \n                        currentElement = currentElement.parentElement;\n                        depth++;\n                    }\n                    \n                    return false;\n                }\n                \n                // 6. –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–ë–ï–ó –ü–û–î–ï–†–ì–ò–í–ê–ù–ò–ô)\n                function setupKeyboardProtection() {\n                    if (!window.visualViewport) {\n                        console.warn('‚ö†Ô∏è visualViewport not supported');\n                        return;\n                    }\n                    \n                    // ============================================\n                    // –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ visualViewport resize\n                    // ============================================\n                    window.visualViewport.addEventListener('resize', function() {\n                        var currentHeight = window.visualViewport.height;\n                        var heightDiff = GLOBAL_STATE.lastViewportHeight - currentHeight;\n                        var wasVisible = GLOBAL_STATE.keyboardVisible;\n                        \n                        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã\n                        GLOBAL_STATE.keyboardVisible = (window.innerHeight - currentHeight) > 150;\n                        \n                        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è\n                        if (GLOBAL_STATE.keyboardVisible && !wasVisible) {\n                            console.log('‚å®Ô∏è Keyboard appeared');\n                            GLOBAL_STATE.keyboardAnimating = true;\n                        } else if (!GLOBAL_STATE.keyboardVisible && wasVisible) {\n                            console.log('‚å®Ô∏è Keyboard disappeared');\n                            GLOBAL_STATE.keyboardAnimating = false;\n                        }\n                        \n                        // –ï—Å–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ò –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π input\n                        if (GLOBAL_STATE.keyboardVisible && heightDiff > 100 && GLOBAL_STATE.activeInputElement) {\n                            // –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–æ–ª–ª—ã (debouncing)\n                            if (GLOBAL_STATE.scrollDebounceTimer) {\n                                clearTimeout(GLOBAL_STATE.scrollDebounceTimer);\n                            }\n                            \n                            // –ü–ª–∞–Ω–∏—Ä—É–µ–º –û–î–ò–ù —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ viewport\n                            GLOBAL_STATE.scrollDebounceTimer = setTimeout(function() {\n                                if (GLOBAL_STATE.activeInputElement) {\n                                    scrollToInputInstant(GLOBAL_STATE.activeInputElement);\n                                }\n                                GLOBAL_STATE.keyboardAnimating = false;\n                            }, 100); // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π debounce –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏\n                        }\n                        \n                        // –ï—Å–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è\n                        if (!GLOBAL_STATE.keyboardVisible && wasVisible) {\n                            // –û—Ç–º–µ–Ω—è–µ–º –≤—Å–µ pending —Å–∫—Ä–æ–ª–ª—ã\n                            if (GLOBAL_STATE.scrollDebounceTimer) {\n                                clearTimeout(GLOBAL_STATE.scrollDebounceTimer);\n                                GLOBAL_STATE.scrollDebounceTimer = null;\n                            }\n                        }\n                        \n                        GLOBAL_STATE.lastViewportHeight = currentHeight;\n                    });\n                    \n                    // ============================================\n                    // –ë–õ–û–ö–ò–†–û–í–ö–ê –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞\n                    // ============================================\n                    document.addEventListener('touchend', function(event) {\n                        var target = event.target;\n                        if (isInputElement(target)) {\n                            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª\n                            event.preventDefault();\n                            \n                            // –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ –¥–∞–µ–º —Ñ–æ–∫—É—Å (–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å)\n                            target.focus();\n                            \n                            console.log('üîí Browser autoscroll blocked, focus applied programmatically');\n                        }\n                    }, { capture: true, passive: false });\n                    \n                    console.log('‚úÖ Optimized keyboard protection enabled');\n                }\n                \n                // ============================================\n                // –ú–ì–ù–û–í–ï–ù–ù–´–ô —Å–∫—Ä–æ–ª–ª –∫ input (–ë–ï–ó smooth –∞–Ω–∏–º–∞—Ü–∏–∏)\n                // ============================================\n                function scrollToInputInstant(element) {\n                    if (!element) return;\n                    \n                    try {\n                        var rect = element.getBoundingClientRect();\n                        var elementTop = rect.top + (window.pageYOffset || document.documentElement.scrollTop);\n                        var viewportHeight = window.visualViewport ? window.visualViewport.height : window.innerHeight;\n                        \n                        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–π —Ç—Ä–µ—Ç–∏ —ç–∫—Ä–∞–Ω–∞ (30% –æ—Ç –≤–µ—Ä—Ö–∞)\n                        var targetScroll = elementTop - (viewportHeight * 0.3);\n                        targetScroll = Math.max(0, targetScroll);\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–µ–Ω –ª–∏ —Å–∫—Ä–æ–ª–ª\n                        var currentScroll = window.pageYOffset || document.documentElement.scrollTop;\n                        var scrollDiff = Math.abs(targetScroll - currentScroll);\n                        \n                        if (scrollDiff > 20) {\n                            // INSTANT —Å–∫—Ä–æ–ª–ª (–ù–ï smooth!) –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π\n                            window.scrollTo({\n                                top: targetScroll,\n                                behavior: 'auto'  // 'auto' = instant/immediate\n                            });\n                            console.log('üìç Input positioned instantly (distance: ' + Math.round(scrollDiff) + 'px)');\n                        } else {\n                            console.log('üìç Input already in optimal position');\n                        }\n                    } catch (e) {\n                        console.warn('‚ö†Ô∏è Error in scrollToInputInstant:', e);\n                    }\n                }\n                \n                // 7. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–±–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–π)\n                function startZoomMonitoring() {\n                    setInterval(function() {\n                        // –ù–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º viewport –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω input\n                        if (!GLOBAL_STATE.activeInputElement) {\n                            enforceViewportSettings();\n                        }\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑—É–º –µ—Å–ª–∏ –æ–Ω –ø–æ—è–≤–∏–ª—Å—è (–Ω–æ –Ω–µ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞)\n                        if (window.visualViewport && window.visualViewport.scale > 1.01 && !GLOBAL_STATE.activeInputElement) {\n                            console.log('üîß Detected zoom, attempting to reset');\n                            window.scrollTo(0, 0);\n                        }\n                    }, 2000); // –£–≤–µ–ª–∏—á–∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª —á—Ç–æ–±—ã –º–µ–Ω—å—à–µ –º–µ—à–∞—Ç—å\n                }\n                \n                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞—â–∏—Ç\n                enforceViewportSettings();\n                addZoomPreventionCSS();\n                blockZoomGestures();\n                blockDoubleTapZoom();\n                setupKeyboardProtection();\n                startZoomMonitoring();\n                \n                console.log('üö´ COMPLETE ZOOM PROTECTION WITH OPTIMIZED KEYBOARD SUPPORT ENABLED');\n                console.log('‚úÖ Improvements: Single viewport handler, instant scroll, debouncing, prevented browser autoscroll');\n            \"\"\"\n            \n            webView.evaluateJavaScript(jsCode) { result, error in\n                if let error = error {\n                    print(\"‚ùå Error executing complete zoom disable JavaScript: \\(error.localizedDescription)\")\n                } else {\n                    print(\"‚úÖ Complete zoom protection enabled via JavaScript\")\n                }\n            }\n        }\n        \n        func webView(_ webView: WKWebView, didStartProvisionalNavigation navigation: WKNavigation!) {\n            // –ü—Ä–æ—Å—Ç–æ–µ –Ω–∞—á–∞–ª–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            print(\"üåê WebView: Started loading\")\n        }\n        \n        func webView(_ webView: WKWebView, didReceiveServerRedirectForProvisionalNavigation navigation: WKNavigation!) {\n            print(\"üîÑ Server redirect detected\")\n        }\n        \n        func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {\n            DispatchQueue.main.async {\n                print(\"‚úÖ WebView: Successfully loaded URL - \\(webView.url?.absoluteString ?? \"N/A\")\")\n                \n                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π URL –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å–µ—Ç–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\n                if let currentUrl = webView.url?.absoluteString,\n                   currentUrl.hasPrefix(\"http://\") || currentUrl.hasPrefix(\"https://\") {\n                    UserDefaults.standard.set(currentUrl, forKey: \"last_opened_url\")\n                    print(\"üíæ Updated last opened URL: \\(currentUrl)\")\n                }\n                \n                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –¥–æ–º–µ–Ω–∞\n                if let currentUrl = webView.url {\n                    self.isGamblingDomain = self.isGamblingDomain(currentUrl)\n                }\n                \n                // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –∂–¥–µ–º –¥–æ–ª—å—à–µ –ø–µ—Ä–µ–¥ —Å–±—Ä–æ—Å–æ–º —Å—á–µ—Ç—á–∏–∫–∞\n                let resetDelay: TimeInterval = self.isGamblingDomain ? 5.0 : 1.0\n                \n                DispatchQueue.main.asyncAfter(deadline: .now() + resetDelay) {\n                    self.resetRedirectCounterSafely()\n                    print(\"üîÑ Redirect counter reset after \\(resetDelay)s - page loaded successfully\")\n                }\n                \n                // –û—Ç–∫–ª—é—á–∞–µ–º –∑—É–º —á–µ—Ä–µ–∑ JavaScript —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏–ª–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞\n                if let currentUrl = webView.url?.host {\n                    let lastHost = UserDefaults.standard.string(forKey: \"last_zoom_protection_host\")\n                    if lastHost != currentUrl {\n                        UserDefaults.standard.set(currentUrl, forKey: \"last_zoom_protection_host\")\n                        self.disableZoomWithJavaScript(webView)\n                        print(\"üîß Applied zoom protection for new host: \\(currentUrl)\")\n                    } else {\n                        print(\"üîß Zoom protection already applied for host: \\(currentUrl)\")\n                    }\n                } else {\n                    // –ï—Å–ª–∏ –Ω–µ—Ç —Ö–æ—Å—Ç–∞, –ø—Ä–∏–º–µ–Ω—è–µ–º –∑–∞—â–∏—Ç—É\n                    self.disableZoomWithJavaScript(webView)\n                }\n                \n                // –°–∫—Ä—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä\n                self.parent.hideLoaderTimer?.invalidate()\n                self.parent.hideLoaderTimer = Timer.scheduledTimer(withTimeInterval: 1.0, repeats: false) { _ in\n                    DispatchQueue.main.async {\n                        self.parent.isLoading = false\n                    }\n                }\n                \n                self.parent.onLoadFinished?()\n            }\n        }\n        \n        func webView(_ webView: WKWebView, didFail navigation: WKNavigation!, withError error: Error) {\n            DispatchQueue.main.async {\n                let nsError = error as NSError\n                print(\"‚ùå Navigation failed: \\(nsError.localizedDescription) (code: \\(nsError.code))\")\n                \n                // –ù–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫\n                if nsError.code != NSURLErrorCancelled && nsError.code != 102 {\n                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –æ—à–∏–±–æ–∫\n                    self.resetRedirectCounterSafely()\n                    print(\"üîÑ Redirect counter reset due to navigation failure\")\n                } else {\n                    print(\"‚ö†Ô∏è Navigation cancelled/interrupted - keeping redirect counter\")\n                }\n                \n                self.parent.onLoadError?(error)\n            }\n        }\n        \n        func webView(_ webView: WKWebView, didFailProvisionalNavigation navigation: WKNavigation!, withError error: Error) {\n            DispatchQueue.main.async {\n                let nsError = error as NSError\n                print(\"üî¥ WebView Failed Provisional Navigation:\")\n                print(\"   Error Code: \\(nsError.code)\")\n                print(\"   Error Domain: \\(nsError.domain)\")\n                print(\"   Error Description: \\(error.localizedDescription)\")\n                print(\"   URL: \\(webView.url?.absoluteString ?? \"N/A\")\")\n                \n                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –æ—Ç–º–µ–Ω—É –∑–∞–ø—Ä–æ—Å–æ–≤ (-999) –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ (102)\n                if nsError.code == NSURLErrorCancelled || nsError.code == 102 {\n                    print(\"   Ignored error - cancelled or frame load interrupted\")\n                    return\n                }\n                \n                // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –±–æ–ª–µ–µ —Ç–µ—Ä–ø–∏–º–æ –æ—Ç–Ω–æ—Å–∏–º—Å—è –∫ –æ—à–∏–±–∫–∞–º\n                let shouldResetCounter = !self.isGamblingDomain ||\n                                       (nsError.code != NSURLErrorTimedOut &&\n                                        nsError.code != NSURLErrorNetworkConnectionLost &&\n                                        nsError.code != NSURLErrorNotConnectedToInternet)\n                \n                if shouldResetCounter {\n                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –æ—à–∏–±–æ–∫\n                    self.resetRedirectCounterSafely()\n                    print(\"üîÑ Redirect counter reset due to provisional navigation failure\")\n                } else {\n                    print(\"‚ö†Ô∏è Temporary error on gambling domain - keeping redirect counter\")\n                }\n                \n                // –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–µ–º –∏—Ö –¥–∞–ª—å—à–µ\n                self.parent.onLoadError?(error)\n            }\n        }\n        \n        func webView(_ webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping (WKNavigationActionPolicy) -> Void) {\n            \n            guard let url = navigationAction.request.url else {\n                decisionHandler(.allow)\n                return\n            }\n            \n            print(\"üîó Navigation request: \\(url.absoluteString)\")\n            \n            // –û–±—Ä–∞–±–æ—Ç–∫–∞ deep links –∏ –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n            if !url.absoluteString.hasPrefix(\"http\") && !url.absoluteString.hasPrefix(\"https\") {\n                let scheme = url.scheme?.lowercased() ?? \"\"\n                let urlString = url.absoluteString.lowercased()\n                \n                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Å—Ö–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–≥—Ä–æ–≤—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏\n                if scheme == \"about\" {\n                    // –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ about: —Å—Ö–µ–º—ã –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤\n                    let allowedAboutSchemes = [\"about:blank\", \"about:srcdoc\"]\n                    let isAllowedAboutScheme = allowedAboutSchemes.contains { allowedScheme in\n                        urlString.hasPrefix(allowedScheme)\n                    }\n                    \n                    if isAllowedAboutScheme {\n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n                        if let currentURL = webView.url {\n                            let isCurrentGambling = self.isGamblingDomain(currentURL)\n                            let isCurrentGamingProvider = self.isGamingProviderDomain(currentURL)\n                            \n                            if isCurrentGambling || isCurrentGamingProvider {\n                                print(\"üéÆ Allowing \\(urlString.components(separatedBy: \"?\").first ?? urlString) for gaming site: \\(currentURL.host ?? \"unknown\")\")\n                                decisionHandler(.allow)\n                                return\n                            }\n                        }\n                        \n                        // –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ —Ç–æ–∂–µ —Ä–∞–∑—Ä–µ—à–∞–µ–º (—á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è popup –æ–∫–æ–Ω –∏ iframe)\n                        print(\"üéÆ Allowing \\(urlString.components(separatedBy: \"?\").first ?? urlString) (commonly used for popups and gaming)\")\n                        decisionHandler(.allow)\n                        return\n                    } else {\n                        print(\"üö´ Blocking unsupported about scheme: \\(url.absoluteString)\")\n                        decisionHandler(.cancel)\n                        return\n                    }\n                }\n                \n                // –†–∞–∑—Ä–µ—à–∞–µ–º data: —Å—Ö–µ–º—ã –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä)\n                if scheme == \"data\" {\n                    print(\"üéÆ Allowing data scheme for gaming content\")\n                    decisionHandler(.allow)\n                    return\n                }\n                \n                // –†–∞–∑—Ä–µ—à–∞–µ–º blob: —Å—Ö–µ–º—ã –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –º–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)\n                if scheme == \"blob\" {\n                    print(\"üéÆ Allowing blob scheme for gaming media content\")\n                    decisionHandler(.allow)\n                    return\n                }\n                \n                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å—Ö–µ–º—ã\n                let blockedSchemes = [\"javascript\", \"file\"]\n                \n                if blockedSchemes.contains(scheme) {\n                    print(\"üö´ Blocking dangerous system scheme: \\(scheme):// (URL: \\(url.absoluteString))\")\n                    decisionHandler(.cancel)\n                    return\n                }\n                \n                print(\"üì± Deep link detected: \\(scheme)://\")\n                \n                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å—Å—ã–ª–æ–∫\n                if scheme == \"upi\" {\n                    print(\"üí≥ UPI payment link detected - attempting multiple payment apps\")\n                    self.handleUPILink(url: url, webView: webView)\n                } else if [\"bankid\", \"bankid-app\", \"mobilebankid\"].contains(scheme) {\n                    print(\"üè¶ BankID authentication link detected\")\n                    self.handleBankIDLink(url: url, webView: webView)\n                } else if [\"phonepe\", \"phonepe-merchant\", \"phonepe-switch\"].contains(scheme) {\n                    print(\"üí≥ PhonePe payment link detected\")\n                    self.handlePhonePeLink(url: url, webView: webView)\n                } else {\n                    self.handleDeepLink(url: url, webView: webView)\n                }\n                \n                decisionHandler(.cancel)\n                return\n            }\n            \n            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö HTTP/HTTPS —Å—Å—ã–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤ –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö\n            if let scheme = url.scheme?.lowercased(), let host = url.host?.lowercased() {\n                let urlString = url.absoluteString.lowercased()\n                \n                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –Ω–æ –ª—É—á—à–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö\n                let shouldOpenExternally = self.shouldOpenURLExternally(url: url, urlString: urlString, scheme: scheme, host: host)\n                \n                if shouldOpenExternally {\n                    print(\"üì± External app link detected: \\(url.absoluteString)\")\n                    self.handleDeepLink(url: url, webView: webView)\n                    decisionHandler(.cancel)\n                    return\n                }\n            }\n            \n            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–º–µ–Ω–∞ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏\n            isGamblingDomain = isGamblingDomain(url)\n            let isTracking = isTrackingDomain(url)\n            \n            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç—Ä–µ–∫–∏–Ω–≥–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã –≤ –ø–æ–¥—Å—á–µ—Ç–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n            if isTracking {\n                print(\"üìä Tracking domain detected, ignoring for redirect count: \\(url.host ?? \"unknown\")\")\n                decisionHandler(.allow)\n                return\n            }\n            \n            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–∫–∏ \"too many redirects\"\n            if navigationAction.navigationType == .other {\n                let now = Date().timeIntervalSince1970\n                \n                // –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é —Ü–µ–ø–æ—á–∫—É —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏\n                if redirectChainStartURL == nil || now - lastRedirectTime > 5.0 {\n                    redirectChainStartURL = url.absoluteString\n                    redirectCount = 1\n                    print(\"üîÑ Starting new redirect chain from: \\(url.absoluteString)\")\n                } else {\n                    redirectCount += 1\n                }\n                \n                lastRedirectTime = now\n                print(\"üîÑ Redirect #\\(redirectCount): \\(url.absoluteString)\")\n                \n                // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ª–∏–º–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n                let effectiveMaxRedirects = isGamblingDomain ? 25 : maxRedirects\n                \n                // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ –∫–∞–∂–¥–æ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ\n                parent.onRedirectDetected?()\n                \n                // –ï—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n                if redirectCount >= effectiveMaxRedirects && !isHandlingRedirectLimit {\n                    print(\"‚ö†Ô∏è Redirect limit reached (\\(effectiveMaxRedirects)) for \\(isGamblingDomain ? \"gambling\" : \"regular\") domain\")\n                    print(\"üîó Chain started from: \\(redirectChainStartURL ?? \"unknown\")\")\n                    print(\"üîó Current URL: \\(url.absoluteString)\")\n                    \n                    isHandlingRedirectLimit = true\n                    redirectCount = 0 // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤–æ–π —Ü–µ–ø–æ—á–∫–∏\n                    redirectChainStartURL = nil\n                    \n                    // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞\n                    parent.onRedirectLimitReached?(url.absoluteString)\n                    \n                    decisionHandler(.cancel)\n                    return\n                }\n            } else {\n                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–π (–Ω–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤) —Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏\n                if navigationAction.navigationType == .linkActivated || navigationAction.navigationType == .formSubmitted {\n                    resetRedirectCounterSafely()\n                    print(\"üîÑ Reset redirect counter - new user navigation\")\n                    \n                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—à–µ–ª –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n                    if let currentURL = webView.url?.absoluteString, currentURL != url.absoluteString {\n                        print(\"üë§ User manually navigated from \\(currentURL) to \\(url.absoluteString)\")\n                        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π URL –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å–µ—Ç–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\n                        UserDefaults.standard.set(url.absoluteString, forKey: \"last_opened_url\")\n                        \n                        // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n                        parent.onUserNavigation?(url.absoluteString, Date())\n                    }\n                }\n            }\n            \n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            if let shouldAllow = parent.onNavigationAction?(url), !shouldAllow {\n                decisionHandler(.cancel)\n                return\n            }\n            \n            // –†–∞–∑—Ä–µ—à–∞–µ–º –≤—Å–µ HTTP/HTTPS –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            decisionHandler(.allow)\n        }\n        \n        func webView(_ webView: WKWebView, createWebViewWith configuration: WKWebViewConfiguration, for navigationAction: WKNavigationAction, windowFeatures: WKWindowFeatures) -> WKWebView? {\n            if let url = navigationAction.request.url {\n                webView.load(URLRequest(url: url))\n            }\n            return nil\n        }\n        \n        func webView(_ webView: WKWebView, runJavaScriptAlertPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping () -> Void) {\n            let alert = UIAlertController(title: nil, message: message, preferredStyle: .alert)\n            alert.addAction(UIAlertAction(title: \"OK\", style: .default) { _ in\n                completionHandler()\n            })\n            \n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let window = windowScene.windows.first {\n                window.rootViewController?.present(alert, animated: true)\n            } else {\n                completionHandler()\n            }\n        }\n        \n        func webView(_ webView: WKWebView, runJavaScriptConfirmPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping (Bool) -> Void) {\n            let alert = UIAlertController(title: nil, message: message, preferredStyle: .alert)\n            alert.addAction(UIAlertAction(title: \"OK\", style: .default) { _ in\n                completionHandler(true)\n            })\n            alert.addAction(UIAlertAction(title: \"Cancel\", style: .cancel) { _ in\n                completionHandler(false)\n            })\n            \n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let window = windowScene.windows.first {\n                window.rootViewController?.present(alert, animated: true)\n            } else {\n                completionHandler(false)\n            }\n        }\n        \n        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è Protected Media Content (iOS 15+)\n        @available(iOS 15.0, *)\n        func webView(_ webView: WKWebView, requestMediaCapturePermissionFor origin: WKSecurityOrigin, initiatedByFrame frame: WKFrameInfo, type: WKMediaCaptureType, decisionHandler: @escaping (WKPermissionDecision) -> Void) {\n            print(\"üìπ Auto-granting media capture permission for: \\(origin.host)\")\n            decisionHandler(.grant)\n        }\n        \n        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —É–±—Ä–∞–Ω–æ - API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\n        \n        // MARK: - UIScrollViewDelegate –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑—É–º–∞\n        \n        func viewForZooming(in scrollView: UIScrollView) -> UIView? {\n            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º nil —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –∑—É–º\n            return nil\n        }\n        \n        func scrollViewWillBeginZooming(_ scrollView: UIScrollView, with view: UIView?) {\n            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –Ω–∞—á–∞–ª–æ –∑—É–º–∞\n            print(\"üö´ Prevented zoom attempt\")\n        }\n        \n        func scrollViewDidZoom(_ scrollView: UIScrollView) {\n            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑—É–º –µ—Å–ª–∏ –æ–Ω –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –ø—Ä–æ–∏–∑–æ—à–µ–ª\n            if scrollView.zoomScale != 1.0 {\n                print(\"üîß Force resetting zoom scale from \\(scrollView.zoomScale) to 1.0\")\n                scrollView.setZoomScale(1.0, animated: false)\n            }\n        }\n        \n        func scrollViewDidEndZooming(_ scrollView: UIScrollView, with view: UIView?, atScale scale: CGFloat) {\n            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–±—Ä–æ—Å –∑—É–º–∞\n            if scale != 1.0 {\n                print(\"üîß Force resetting zoom scale after zoom end from \\(scale) to 1.0\")\n                scrollView.setZoomScale(1.0, animated: false)\n            }\n        }\n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ WKOpenPanelParameters\n        func webView(_ webView: WKWebView, runOpenPanelWith parameters: Any, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping ([URL]?) -> Void) {\n            print(\"üìÅ File upload request - opening file picker\")\n            \n            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º action sheet –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞\n            presentFilePickerOptions(webView: webView, completionHandler: completionHandler)\n        }\n        \n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–ø—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–∫–∞–º–µ—Ä–∞ –∏–ª–∏ —Ñ–∞–π–ª—ã)\n        private func presentFilePickerOptions(webView: WKWebView, completionHandler: @escaping ([URL]?) -> Void) {\n            guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n                  let window = windowScene.windows.first,\n                  let rootViewController = window.rootViewController else {\n                completionHandler(nil)\n                return\n            }\n            \n            let actionSheet = UIAlertController(title: \"Select File\", message: nil, preferredStyle: .actionSheet)\n            \n            // –û–ø—Ü–∏—è –∫–∞–º–µ—Ä—ã\n            actionSheet.addAction(UIAlertAction(title: \"Camera\", style: .default) { _ in\n                self.presentImagePicker(webView: webView, sourceType: .camera, completionHandler: completionHandler)\n            })\n            \n            // –û–ø—Ü–∏—è —Ñ–æ—Ç–æ–≥–∞–ª–µ—Ä–µ–∏\n            actionSheet.addAction(UIAlertAction(title: \"Photo Library\", style: .default) { _ in\n                self.presentImagePicker(webView: webView, sourceType: .photoLibrary, completionHandler: completionHandler)\n            })\n            \n            // –û–ø—Ü–∏—è —Ñ–∞–π–ª–æ–≤\n            actionSheet.addAction(UIAlertAction(title: \"Files\", style: .default) { _ in\n                self.presentDocumentPicker(webView: webView, completionHandler: completionHandler)\n            })\n            \n            // –û—Ç–º–µ–Ω–∞\n            actionSheet.addAction(UIAlertAction(title: \"Cancel\", style: .cancel) { _ in\n                completionHandler(nil)\n            })\n            \n            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è iPad\n            if let popover = actionSheet.popoverPresentationController {\n                popover.sourceView = rootViewController.view\n                popover.sourceRect = CGRect(x: rootViewController.view.bounds.midX, y: rootViewController.view.bounds.midY, width: 0, height: 0)\n                popover.permittedArrowDirections = []\n            }\n            \n            rootViewController.present(actionSheet, animated: true)\n        }\n        \n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º UIImagePickerController –¥–ª—è –∫–∞–º–µ—Ä—ã/–≥–∞–ª–µ—Ä–µ–∏\n        private func presentImagePicker(webView: WKWebView, sourceType: UIImagePickerController.SourceType, completionHandler: @escaping ([URL]?) -> Void) {\n            guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n                  let window = windowScene.windows.first,\n                  let rootViewController = window.rootViewController else {\n                completionHandler(nil)\n                return\n            }\n            \n            let imagePicker = UIImagePickerController()\n            imagePicker.sourceType = sourceType\n            imagePicker.mediaTypes = [\"public.image\"]\n            \n            let coordinator = ImagePickerCoordinator(completionHandler: completionHandler)\n            imagePicker.delegate = coordinator\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º coordinator —á—Ç–æ–±—ã –æ–Ω –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è\n            objc_setAssociatedObject(imagePicker, \"coordinator\", coordinator, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)\n            \n            rootViewController.present(imagePicker, animated: true)\n        }\n        \n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º UIDocumentPickerViewController –¥–ª—è —Ñ–∞–π–ª–æ–≤\n        private func presentDocumentPicker(webView: WKWebView, completionHandler: @escaping ([URL]?) -> Void) {\n            guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n                  let window = windowScene.windows.first,\n                  let rootViewController = window.rootViewController else {\n                completionHandler(nil)\n                return\n            }\n            \n            let documentPicker = UIDocumentPickerViewController(forOpeningContentTypes: [.data, .image, .movie, .audio, .text, .pdf])\n            documentPicker.allowsMultipleSelection = false // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–±–æ—Ä\n            \n            let coordinator = DocumentPickerCoordinator(completionHandler: completionHandler)\n            documentPicker.delegate = coordinator\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º coordinator —á—Ç–æ–±—ã –æ–Ω –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è\n            objc_setAssociatedObject(documentPicker, \"coordinator\", coordinator, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)\n            \n            rootViewController.present(documentPicker, animated: true)\n        }\n    }\n}\n\n// MARK: - File Upload Coordinators\nclass ImagePickerCoordinator: NSObject, UIImagePickerControllerDelegate, UINavigationControllerDelegate {\n    let completionHandler: ([URL]?) -> Void\n    \n    init(completionHandler: @escaping ([URL]?) -> Void) {\n        self.completionHandler = completionHandler\n    }\n    \n    func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : Any]) {\n        picker.dismiss(animated: true)\n        \n        if let image = info[.originalImage] as? UIImage {\n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É\n            let tempURL = saveImageToTempDirectory(image)\n            if let url = tempURL {\n                print(\"üì∏ Image saved to temp directory: \\(url.absoluteString)\")\n                completionHandler([url])\n            } else {\n                completionHandler(nil)\n            }\n        } else {\n            completionHandler(nil)\n        }\n    }\n    \n    func imagePickerControllerDidCancel(_ picker: UIImagePickerController) {\n        picker.dismiss(animated: true)\n        completionHandler(nil)\n    }\n    \n    private func saveImageToTempDirectory(_ image: UIImage) -> URL? {\n        guard let imageData = image.jpegData(compressionQuality: 0.8) else { return nil }\n        \n        let tempDirectory = FileManager.default.temporaryDirectory\n        let fileName = \"upload_image_\\(Date().timeIntervalSince1970).jpg\"\n        let fileURL = tempDirectory.appendingPathComponent(fileName)\n        \n        do {\n            try imageData.write(to: fileURL)\n            return fileURL\n        } catch {\n            print(\"‚ùå Error saving image: \\(error)\")\n            return nil\n        }\n    }\n}\n\nclass DocumentPickerCoordinator: NSObject, UIDocumentPickerDelegate {\n    let completionHandler: ([URL]?) -> Void\n    \n    init(completionHandler: @escaping ([URL]?) -> Void) {\n        self.completionHandler = completionHandler\n    }\n    \n    func documentPicker(_ controller: UIDocumentPickerViewController, didPickDocumentsAt urls: [URL]) {\n        print(\"üìÑ Documents selected: \\(urls.map { $0.lastPathComponent })\")\n        completionHandler(urls)\n    }\n    \n    func documentPickerWasCancelled(_ controller: UIDocumentPickerViewController) {\n        print(\"üìÑ Document picker cancelled\")\n        completionHandler(nil)\n    }\n}\n\n// MARK: - WebView Screen\nstruct WebViewScreen: View {\n    @EnvironmentObject var appState: AppState\n    @StateObject private var configService = ConfigService.shared\n    @State private var isLoading = false // –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—á–∏–Ω–∞–µ–º —Å false\n    @State private var showError = false\n    @State private var errorMessage = \"\"\n    @State private var hasAppeared = false\n    @State private var webViewOpacity: Double = 1.0\n    @State private var pendingRedirectURL: String? // URL –æ–∂–∏–¥–∞—é—â–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n    @State private var redirectCompletionTimer: Timer? // –¢–∞–π–º–µ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏\n    @State private var userHasNavigated = false // –§–ª–∞–≥ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—à–µ–ª –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n    @State private var lastUserNavigationTime: Date? // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n    \n    var body: some View {\n        GeometryReader { geometry in\n            let isLandscape = geometry.size.width > geometry.size.height\n            \n            ZStack {\n                if let url = appState.currentURL, !url.isEmpty {\n                    WebView(\n                        url: url,\n                        isLoading: $isLoading,\n                        onNavigationAction: { navigationURL in\n                            return true\n                        },\n                        onLoadFinished: {\n                            // WebView –∑–∞–≥—Ä—É–∂–µ–Ω\n                        },\n                        onLoadError: { error in\n                            handleWebViewError(error)\n                        },\n                        onRedirectLimitReached: { intermediateURL in\n                            handleRedirectLimitReached(intermediateURL)\n                        },\n                        onRedirectDetected: {\n                            handleRedirectDetected()\n                        },\n                        onUserNavigation: { navigationURL, navigationTime in\n                            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é\n                            if navigationURL != url {\n                                userHasNavigated = true\n                                lastUserNavigationTime = navigationTime\n                                print(\"üë§ User navigation detected to: \\(navigationURL)\")\n                            }\n                        }\n                    )\n                    .background(Color.black) // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–µ–ª—å–∫–∞–Ω–∏—è\n                    .opacity(webViewOpacity)\n                    .animation(.easeInOut(duration: 0.2), value: webViewOpacity)\n                    .id(url) // ID –ø–æ –ø–æ–ª–Ω–æ–º—É URL –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n                    .ignoresSafeArea(edges: isLandscape ? .top : .horizontal) // Portrait: –±–µ–∑ –æ—Ç—Å—Ç—É–ø–æ–≤ —Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞, Landscape: –±–µ–∑ –æ—Ç—Å—Ç—É–ø–∞ —Å–≤–µ—Ä—Ö—É\n                    .ignoresSafeArea(.keyboard) // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ WebView –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (iOS 15.6+)\n                } else {\n                    LoadingOrErrorView(\n                        isLoading: isLoading,\n                        errorMessage: errorMessage,\n                        onRetry: {\n                            loadWebViewURL()\n                        }\n                    )\n                }\n                \n            }\n        }\n        .background(Color.black) // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω –¥–ª—è Safe Area\n        .onAppear {\n            if !hasAppeared {\n                hasAppeared = true\n                // –ó–∞–≥—Ä—É–∂–∞–µ–º URL –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –∏–ª–∏ –æ–Ω –∏—Å—Ç–µ–∫\n                if appState.currentURL?.isEmpty != false || appState.isURLExpired() {\n                    loadWebViewURL()\n                }\n            }\n        }\n        .alert(isPresented: $showError) {\n            Alert(\n                title: Text(\"Error\"),\n                message: Text(errorMessage),\n                primaryButton: .default(Text(\"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å\")) {\n                    loadWebViewURL()\n                },\n                secondaryButton: .cancel()\n            )\n        }\n    }\n    \n    private func loadWebViewURL() {\n        guard !isLoading else { return }\n        \n        // –ü–†–ò–û–†–ò–¢–ï–¢: –ï—Å–ª–∏ —ç—Ç–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π URL –æ—Ç push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ\n        if appState.isOneTimeNotificationURL {\n            print(\"üö´ One-time notification URL active - skipping config URL loading\")\n            print(\"üì± Current notification URL: \\(appState.currentURL ?? \"nil\")\")\n            return\n        }\n        \n        // –ï—Å–ª–∏ –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π URL, –Ω–µ –¥–µ–ª–∞–µ–º –Ω–∏—á–µ–≥–æ\n        if let savedURL = appState.currentURL, !savedURL.isEmpty, !appState.isURLExpired() {\n            return\n        }\n        \n        isLoading = true\n        showError = false\n        \n        guard let conversionData = appState.conversionData else {\n            handleConfigError(.noData)\n            return\n        }\n        \n        configService.fetchConfig(\n            conversionData: conversionData,\n            appsflyerID: appState.appsflyerID,\n            pushToken: appState.pushToken\n        ) { result in\n            DispatchQueue.main.async {\n                switch result {\n                case .success(let response):\n                    if let url = response.url, let expires = response.expires {\n                        print(\"‚úÖ Got URL from server: \\(url)\")\n                        self.isLoading = false\n                        self.appState.saveURL(url, expires: expires)\n                    } else {\n                        self.isLoading = false\n                        self.handleConfigError(.invalidResponse)\n                    }\n                    \n                case .failure(let error):\n                    self.isLoading = false\n                    self.handleConfigError(error)\n                }\n            }\n        }\n    }\n    \n    private func handleConfigError(_ error: ConfigError) {\n        switch error {\n        case .noInternetConnection:\n            if let savedURL = appState.currentURL, !savedURL.isEmpty {\n                return\n            } else {\n                errorMessage = \"No ethernet connection\"\n                showError = true\n            }\n            \n        case .serverError(let code, _):\n            if code == 404 || code >= 400 {\n                appState.setAppMode(.game)\n                return\n            }\n            fallthrough\n            \n        default:\n            if let savedURL = appState.currentURL, !savedURL.isEmpty {\n                return\n            }\n            \n            errorMessage = error.localizedDescription\n            showError = true\n        }\n    }\n    \n    private func handleWebViewError(_ error: Error) {\n        let nsError = error as NSError\n        \n        if nsError.code == NSURLErrorCancelled {\n            return\n        }\n        \n        errorMessage = \"Error while loading: \\(error.localizedDescription)\"\n        showError = true\n    }\n    \n    private func handleRedirectLimitReached(_ intermediateURL: String) {\n        print(\"üîÑ ===== REDIRECT LIMIT HANDLER =====\")\n        print(\"üîó Intermediate URL: \\(intermediateURL)\")\n        print(\"‚è∞ Time: \\(Date())\")\n        \n        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π URL, –Ω–æ –ù–ï –æ–±–Ω–æ–≤–ª—è–µ–º WebView —Å—Ä–∞–∑—É\n        pendingRedirectURL = intermediateURL\n        \n        print(\"üíæ Saved intermediate URL for later application\")\n        print(\"‚è≥ Waiting for redirect chain to complete...\")\n        \n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n        redirectCompletionTimer?.invalidate()\n        redirectCompletionTimer = Timer.scheduledTimer(withTimeInterval: 2.0, repeats: false) { _ in\n            DispatchQueue.main.async {\n                self.applyPendingRedirectURL()\n            }\n        }\n        \n        print(\"====================================\")\n    }\n    \n    private func applyPendingRedirectURL() {\n        guard let pendingURL = pendingRedirectURL else { return }\n        \n        print(\"üîÑ ===== APPLYING PENDING REDIRECT URL =====\")\n        print(\"üîó Final URL: \\(pendingURL)\")\n        print(\"‚è∞ Time: \\(Date())\")\n        \n        // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º WebView\n        withAnimation(.easeInOut(duration: 0.2)) {\n            webViewOpacity = 0.0\n        }\n        \n        // –ü–æ—Å–ª–µ —Å–∫—Ä—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª—è–µ–º URL\n        DispatchQueue.main.asyncAfter(deadline: .now() + 0.3) {\n            self.appState.currentURL = pendingURL\n            self.pendingRedirectURL = nil\n            \n            print(\"‚úÖ Applied final redirect URL\")\n            \n            // –ü–ª–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º WebView —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º URL\n            DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) {\n                withAnimation(.easeInOut(duration: 0.3)) {\n                    self.webViewOpacity = 1.0\n                }\n            }\n        }\n        \n        print(\"==========================================\")\n    }\n    \n    private func handleRedirectDetected() {\n        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ\n        redirectCompletionTimer?.invalidate()\n        \n        // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π URL, –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º –æ–∂–∏–¥–∞–Ω–∏–µ\n        if pendingRedirectURL != nil {\n            redirectCompletionTimer = Timer.scheduledTimer(withTimeInterval: 2.0, repeats: false) { _ in\n                DispatchQueue.main.async {\n                    self.applyPendingRedirectURL()\n                }\n            }\n            print(\"‚è≥ Redirect detected - extending completion timer\")\n        }\n    }\n}\n\n// MARK: - Loading/Error View\nstruct LoadingOrErrorView: View {\n    let isLoading: Bool\n    let errorMessage: String\n    let onRetry: () -> Void\n    \n    var body: some View {\n        VStack(spacing: 20) {\n            Spacer()\n            \n            if isLoading {\n                VStack(spacing: 16) {\n                    ProgressView()\n                        .scaleEffect(1.5)\n                        .progressViewStyle(CircularProgressViewStyle(tint: .blue))\n                    \n                                            Text(\"Loading\")\n                            .font(.headline)\n                            .foregroundColor(.primary)\n                }\n            } else if !errorMessage.isEmpty {\n                VStack(spacing: 16) {\n                    Image(systemName: \"wifi.slash\")\n                        .font(.system(size: 50))\n                        .foregroundColor(.red)\n                    \n                    Text(\"No ethernet connection\")\n                        .font(.title2)\n                        .fontWeight(.semibold)\n                        .foregroundColor(.primary)\n                    \n                    Text(\"Check your connection and try again\")\n                        .font(.body)\n                        .foregroundColor(.secondary)\n                        .multilineTextAlignment(.center)\n                        .padding(.horizontal)\n                    \n                    Button(\"Retry\") {\n                        onRetry()\n                    }\n                    .padding()\n                    .background(Color.blue)\n                    .foregroundColor(.white)\n                    .cornerRadius(10)\n                }\n            }\n            \n            Spacer()\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .background(Color(.systemBackground))\n    }\n}\n\nstruct GameButtonStyle: ButtonStyle {\n    let color: Color\n    \n    func makeBody(configuration: Configuration) -> some View {\n        configuration.label\n            .font(.headline)\n            .foregroundColor(.white)\n            .padding(.horizontal, 24)\n            .padding(.vertical, 12)\n            .background(color)\n            .cornerRadius(10)\n            .scaleEffect(configuration.isPressed ? 0.95 : 1.0)\n            .animation(.easeInOut(duration: 0.1), value: configuration.isPressed)\n    }\n}\n\n// MARK: - Notification Permission View\nstruct NotificationPermissionView: View {\n    @EnvironmentObject var appState: AppState\n    @State private var isAnimating = false\n    \n    var onPermissionGranted: () -> Void\n    var onPermissionSkipped: () -> Void\n    \n    var body: some View {\n        GeometryReader { geometry in\n            let isLandscape = geometry.size.width > geometry.size.height\n            let horizontalPadding: CGFloat = isLandscape ? max(60, geometry.size.width * 0.15) : 20\n            let maxContentWidth: CGFloat = isLandscape ? min(600, geometry.size.width * 0.7) : geometry.size.width\n            \n            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤\n            let isSmallDevice = geometry.size.height < 700 // iPhone SE, iPhone 12 mini –∏ –ø–æ–¥–æ–±–Ω—ã–µ\n            let safeAreaBottom = geometry.safeAreaInsets.bottom\n            let bottomPadding: CGFloat = {\n                if isLandscape {\n                    // –í –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–µ–º home indicator –∏ —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n                    if isSmallDevice {\n                        return max(50, safeAreaBottom + 20) // –ú–∏–Ω–∏–º—É–º 50, –Ω–æ –Ω–µ –º–µ–Ω—å—à–µ safe area + 20\n                    } else {\n                        return max(40, safeAreaBottom + 15) // –î–ª—è –±–æ–ª—å—à–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤\n                    }\n                } else {\n                    return max(40, safeAreaBottom + 10) // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è\n                }\n            }()\n            \n            ZStack {\n                LinearGradient(\n                    gradient: Gradient(colors: [\n                        Color(red: 0.1, green: 0.2, blue: 0.4),\n                        Color(red: 0.2, green: 0.1, blue: 0.3),\n                        Color(red: 0.1, green: 0.1, blue: 0.2)\n                    ]),\n                    startPoint: .topLeading,\n                    endPoint: .bottomTrailing\n                )\n                .ignoresSafeArea()\n                \n                HStack {\n                    Spacer()\n                    \n                    VStack(spacing: 0) {\n                        Spacer()\n                        \n                        // –ò–∫–æ–Ω–∫–∞\n                        ZStack {\n                            Circle()\n                                .fill(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.yellow, .orange]),\n                                        startPoint: .topLeading,\n                                        endPoint: .bottomTrailing\n                                    )\n                                )\n                                .frame(width: isLandscape ? 100 : 120, height: isLandscape ? 100 : 120)\n                            \n                            Image(systemName: \"bell.fill\")\n                                .font(.system(size: isLandscape ? 40 : 50, weight: .medium))\n                                .foregroundColor(.white)\n                            \n                            Circle()\n                                .fill(Color.red)\n                                .frame(width: isLandscape ? 20 : 24, height: isLandscape ? 20 : 24)\n                                .offset(x: isLandscape ? 30 : 35, y: isLandscape ? -30 : -35)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 40)\n                        \n                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ\n                        VStack(spacing: isLandscape ? 15 : 20) {\n                            Text(\"Get Notifications\")\n                                .font(.system(size: isLandscape ? 24 : 28, weight: .bold, design: .rounded))\n                                .foregroundColor(.white)\n                                .multilineTextAlignment(.center)\n                            \n                            VStack(spacing: isLandscape ? 8 : 12) {\n                                \n                                Text(\"Be among the first to receive gifts and bonuses\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .foregroundColor(.white.opacity(0.9))\n                                    .multilineTextAlignment(.center)\n                            }\n                            .padding(.horizontal, 20)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 50)\n                        \n                        Spacer()\n                        \n                        // –ö–Ω–æ–ø–∫–∏\n                        VStack(spacing: isLandscape ? 12 : 16) {\n                            Button(action: {\n                                requestNotificationPermission()\n                            }) {\n                                HStack {\n                                    Image(systemName: \"gift.fill\")\n                                        .font(isLandscape ? .body : .title3)\n                                    \n                                    Text(\"Enable Notifications\")\n                                        .font(isLandscape ? .body : .headline)\n                                        .fontWeight(.semibold)\n                                }\n                                .foregroundColor(.white)\n                                .frame(maxWidth: .infinity)\n                                .frame(height: isLandscape ? 48 : 56)\n                                .background(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.green, .blue]),\n                                        startPoint: .leading,\n                                        endPoint: .trailing\n                                    )\n                                )\n                                .cornerRadius(isLandscape ? 24 : 28)\n                                .shadow(color: .green.opacity(0.3), radius: 10, x: 0, y: 5)\n                            }\n                            \n                            Button(action: {\n                                skipNotificationPermission()\n                            }) {\n                                Text(\"Skip\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .fontWeight(.medium)\n                                    .foregroundColor(.white.opacity(0.7))\n                                    .frame(maxWidth: .infinity)\n                                    .frame(height: isLandscape ? 40 : 44)\n                                    .background(Color.white.opacity(0.1))\n                                    .cornerRadius(isLandscape ? 20 : 22)\n                                    .overlay(\n                                        RoundedRectangle(cornerRadius: isLandscape ? 20 : 22)\n                                            .stroke(Color.white.opacity(0.2), lineWidth: 1)\n                                    )\n                            }\n                        }\n                        .padding(.horizontal, 20)\n                        .padding(.bottom, bottomPadding)\n                    }\n                    .frame(maxWidth: maxContentWidth)\n                    .padding(.horizontal, horizontalPadding)\n                    \n                    Spacer()\n                }\n            }\n        }\n        .onAppear {\n            withAnimation {\n                isAnimating = true\n            }\n        }\n    }\n    \n    private func requestNotificationPermission() {\n        UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .badge, .sound]) { granted, error in\n            DispatchQueue.main.async {\n                if granted {\n                    self.onPermissionGranted()\n                } else {\n                    self.appState.saveNotificationPermissionDenied()\n                    self.onPermissionSkipped()\n                }\n            }\n        }\n    }\n    \n    private func skipNotificationPermission() {\n        appState.saveNotificationPermissionDenied()\n        onPermissionSkipped()\n    }\n}\n\n// MARK: - No Internet Connection View\nstruct NoInternetConnectionView: View {\n    @State private var isAnimating = false\n    \n    var onRetry: () -> Void\n    \n    var body: some View {\n        GeometryReader { geometry in\n            let isLandscape = geometry.size.width > geometry.size.height\n            let horizontalPadding: CGFloat = isLandscape ? max(60, geometry.size.width * 0.15) : 20\n            let maxContentWidth: CGFloat = isLandscape ? min(600, geometry.size.width * 0.7) : geometry.size.width\n            \n            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤\n            let isSmallDevice = geometry.size.height < 700 // iPhone SE, iPhone 12 mini –∏ –ø–æ–¥–æ–±–Ω—ã–µ\n            let safeAreaBottom = geometry.safeAreaInsets.bottom\n            let bottomPadding: CGFloat = {\n                if isLandscape {\n                    // –í –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–µ–º home indicator –∏ —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n                    if isSmallDevice {\n                        return max(50, safeAreaBottom + 20) // –ú–∏–Ω–∏–º—É–º 50, –Ω–æ –Ω–µ –º–µ–Ω—å—à–µ safe area + 20\n                    } else {\n                        return max(40, safeAreaBottom + 15) // –î–ª—è –±–æ–ª—å—à–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤\n                    }\n                } else {\n                    return max(40, safeAreaBottom + 10) // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è\n                }\n            }()\n            \n            ZStack {\n                LinearGradient(\n                    gradient: Gradient(colors: [\n                        Color(red: 0.1, green: 0.15, blue: 0.25),\n                        Color(red: 0.15, green: 0.1, blue: 0.2),\n                        Color(red: 0.1, green: 0.1, blue: 0.15)\n                    ]),\n                    startPoint: .topLeading,\n                    endPoint: .bottomTrailing\n                )\n                .ignoresSafeArea()\n                \n                HStack {\n                    Spacer()\n                    \n                    VStack(spacing: 0) {\n                        Spacer()\n                        \n                        // –ò–∫–æ–Ω–∫–∞\n                        ZStack {\n                            Circle()\n                                .fill(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.red, .orange]),\n                                        startPoint: .topLeading,\n                                        endPoint: .bottomTrailing\n                                    )\n                                )\n                                .frame(width: isLandscape ? 100 : 120, height: isLandscape ? 100 : 120)\n                            \n                            Image(systemName: \"wifi.slash\")\n                                .font(.system(size: isLandscape ? 40 : 50, weight: .medium))\n                                .foregroundColor(.white)\n                            \n                            Circle()\n                                .fill(Color.red)\n                                .frame(width: isLandscape ? 20 : 24, height: isLandscape ? 20 : 24)\n                                .offset(x: isLandscape ? 30 : 35, y: isLandscape ? -30 : -35)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 40)\n                        .scaleEffect(isAnimating ? 1.0 : 0.8)\n                        .animation(.easeOut(duration: 0.6), value: isAnimating)\n                        \n                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ\n                        VStack(spacing: isLandscape ? 15 : 20) {\n                            Text(\"No Internet Connection\")\n                                .font(.system(size: isLandscape ? 24 : 28, weight: .bold, design: .rounded))\n                                .foregroundColor(.white)\n                                .multilineTextAlignment(.center)\n                            \n                            VStack(spacing: isLandscape ? 8 : 12) {\n                                Text(\"Please check your internet connection\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .foregroundColor(.white.opacity(0.9))\n                                    .multilineTextAlignment(.center)\n                                \n                                Text(\"Make sure Wi-Fi or cellular data is enabled\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .foregroundColor(.white.opacity(0.9))\n                                    .multilineTextAlignment(.center)\n                            }\n                            .padding(.horizontal, 20)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 50)\n                        .opacity(isAnimating ? 1.0 : 0.0)\n                        .animation(.easeOut(duration: 0.8).delay(0.2), value: isAnimating)\n                        \n                        Spacer()\n                        \n                        // –ö–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞\n                        VStack(spacing: isLandscape ? 12 : 16) {\n                            Button(action: {\n                                onRetry()\n                            }) {\n                                HStack {\n                                    Image(systemName: \"arrow.clockwise\")\n                                        .font(isLandscape ? .body : .title3)\n                                    \n                                    Text(\"Try Again\")\n                                        .font(isLandscape ? .body : .headline)\n                                        .fontWeight(.semibold)\n                                }\n                                .foregroundColor(.white)\n                                .frame(maxWidth: .infinity)\n                                .frame(height: isLandscape ? 48 : 56)\n                                .background(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.blue, .cyan]),\n                                        startPoint: .leading,\n                                        endPoint: .trailing\n                                    )\n                                )\n                                .cornerRadius(isLandscape ? 24 : 28)\n                                .shadow(color: .blue.opacity(0.3), radius: 10, x: 0, y: 5)\n                            }\n                        }\n                        .padding(.horizontal, 20)\n                        .padding(.bottom, bottomPadding)\n                        .opacity(isAnimating ? 1.0 : 0.0)\n                        .animation(.easeOut(duration: 0.8).delay(0.4), value: isAnimating)\n                    }\n                    .frame(maxWidth: maxContentWidth)\n                    .padding(.horizontal, horizontalPadding)\n                    \n                    Spacer()\n                }\n            }\n        }\n        .onAppear {\n            withAnimation {\n                isAnimating = true\n            }\n        }\n    }\n}\n\n// MARK: - Loading View\nstruct LoadingView: View {\n    @State private var isAnimating = false\n    @State private var rotationAngle: Double = 0\n    \n    var body: some View {\n        GeometryReader { geometry in\n            ZStack {\n                LinearGradient(\n                    gradient: Gradient(colors: [\n                        Color(red: 0.05, green: 0.1, blue: 0.2),\n                        Color(red: 0.1, green: 0.05, blue: 0.15),\n                        Color(red: 0.05, green: 0.05, blue: 0.1)\n                    ]),\n                    startPoint: .topLeading,\n                    endPoint: .bottomTrailing\n                )\n                .ignoresSafeArea()\n                \n                VStack(spacing: 30) {\n                    Spacer()\n                    \n                    // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏\n                    ZStack {\n                        Circle()\n                            .stroke(Color.white.opacity(0.2), lineWidth: 4)\n                            .frame(width: 60, height: 60)\n                        \n                        Circle()\n                            .trim(from: 0, to: 0.7)\n                            .stroke(\n                                LinearGradient(\n                                    gradient: Gradient(colors: [.blue, .cyan, .blue]),\n                                    startPoint: .topLeading,\n                                    endPoint: .bottomTrailing\n                                ),\n                                style: StrokeStyle(lineWidth: 4, lineCap: .round)\n                            )\n                            .frame(width: 60, height: 60)\n                            .rotationEffect(.degrees(rotationAngle))\n                    }\n                    \n                    // –¢–µ–∫—Å—Ç\n                    VStack(spacing: 8) {\n                        Text(DataManager.currentAppName)\n                        .font(.system(size: 32, weight: .bold, design: .rounded))\n                        .foregroundColor(.white)\n                        .padding(.horizontal)\n                        .multilineTextAlignment(.center)\n                    \n                    Text(\"Loading\")\n                        .font(.body)\n                        .foregroundColor(.white.opacity(0.8))\n                    }\n                    \n                    Spacer()\n                    Spacer()\n                }\n            }\n        }\n        .onAppear {\n            withAnimation {\n                isAnimating = true\n            }\n            \n            withAnimation(.linear(duration: 1.5).repeatForever(autoreverses: false)) {\n                rotationAngle = 360\n            }\n        }\n    }\n}\n\n// MARK: - Error View\nstruct ErrorView: View {\n    let title: String\n    let message: String\n    let buttonTitle: String\n    let action: () -> Void\n    \n    var body: some View {\n        VStack(spacing: 20) {\n            Image(systemName: \"exclamationmark.triangle\")\n                .font(.system(size: 50))\n                .foregroundColor(.red)\n            \n            Text(title)\n                .font(.title2)\n                .fontWeight(.semibold)\n            \n            Text(message)\n                .font(.body)\n                .foregroundColor(.secondary)\n                .multilineTextAlignment(.center)\n                .padding(.horizontal)\n            \n            Button(buttonTitle) {\n                action()\n            }\n            .padding()\n            .background(Color.blue)\n            .foregroundColor(.white)\n            .cornerRadius(10)\n        }\n        .padding()\n    }\nChicEnergetic Spark";
				INFOPLIST_KEY_UIApplicationSceneManifest_Generation = YES;
				INFOPLIST_KEY_UIApplicationSupportsIndirectInputEvents = YES;
				INFOPLIST_KEY_UILaunchScreen_Generation = YES;
				INFOPLIST_KEY_UILaunchStoryboardName = "Launch Screen.storyboard";
				INFOPLIST_KEY_UISupportedInterfaceOrientations = UIInterfaceOrientationPortrait;
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPad = "UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight UIInterfaceOrientationPortrait UIInterfaceOrientationPortraitUpsideDown";
				IPHONEOS_DEPLOYMENT_TARGET = 15.6;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.2;
				PRODUCT_BUNDLE_IDENTIFIER = IOI.cc92;
				PRODUCT_NAME = "$(TARGET_NAME)";
				STRING_CATALOG_GENERATE_SYMBOLS = YES;
				SUPPORTED_PLATFORMS = "iphoneos iphonesimulator";
				SUPPORTS_MACCATALYST = NO;
				SUPPORTS_MAC_DESIGNED_FOR_IPHONE_IPAD = NO;
				SUPPORTS_XR_DESIGNED_FOR_IPHONE_IPAD = NO;
				SWIFT_APPROACHABLE_CONCURRENCY = YES;
				SWIFT_DEFAULT_ACTOR_ISOLATION = MainActor;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = 1;
			};
			name = Debug;
		};
		78BD09B12ECB63DA0007C67E /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				ENABLE_PREVIEWS = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_CFBundleDisplayName = "import SwiftUI\n@preconcurrency import WebKit\nimport UserNotifications\nimport UniformTypeIdentifiers\nimport PhotosUI\n\n// MARK: - WebView Component\nstruct WebView: UIViewRepresentable {\n    let url: String\n    @Binding var isLoading: Bool\n    @State private var hideLoaderTimer: Timer?\n    @State private var orientationObserver: NSObjectProtocol?\n    \n    var onNavigationAction: ((URL) -> Bool)?\n    var onLoadFinished: (() -> Void)?\n    var onLoadError: ((Error) -> Void)?\n    var onRedirectLimitReached: ((String) -> Void)? // Callback –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n    var onRedirectDetected: (() -> Void)? // Callback –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞\n    var onUserNavigation: ((String, Date) -> Void)? // Callback –ø—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n    \n    func makeUIView(context: Context) -> WKWebView {\n        let configuration = WKWebViewConfiguration()\n        \n        configuration.allowsInlineMediaPlayback = true\n        configuration.mediaTypesRequiringUserActionForPlayback = []\n        configuration.allowsPictureInPictureMediaPlayback = true\n        \n        let preferences = WKPreferences()\n        \n        // ‚úÖ –ü–û–õ–ù–ê–Ø –ü–û–î–î–ï–†–ñ–ö–ê JAVASCRIPT\n        if #available(iOS 14.0, *) {\n            configuration.defaultWebpagePreferences.allowsContentJavaScript = true\n        } else {\n            preferences.javaScriptEnabled = true\n        }\n        preferences.javaScriptCanOpenWindowsAutomatically = true\n        \n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Ñ—É–Ω–∫—Ü–∏–π\n        if #available(iOS 15.0, *) {\n            configuration.preferences.isTextInteractionEnabled = true\n            configuration.preferences.isElementFullscreenEnabled = true\n        }\n        \n        // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å input –ø–æ–ª—è–º–∏\n        if #available(iOS 16.4, *) {\n            configuration.preferences.shouldPrintBackgrounds = true\n        }\n        \n        configuration.preferences = preferences\n        \n        configuration.allowsAirPlayForMediaPlayback = true\n        \n        // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏\n        configuration.processPool = WKProcessPool()\n        configuration.suppressesIncrementalRendering = true // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–µ–ª—å–∫–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n        \n        // ‚úÖ –ü–û–õ–ù–ê–Ø –ü–û–î–î–ï–†–ñ–ö–ê COOKIE –ò –°–ï–°–°–ò–ô\n        configuration.websiteDataStore = WKWebsiteDataStore.default()\n        \n        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP Cookie –ø–æ–ª–∏—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ\n        HTTPCookieStorage.shared.cookieAcceptPolicy = .always\n        \n        // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π\n        if #available(iOS 14.0, *) {\n            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n            configuration.limitsNavigationsToAppBoundDomains = false\n        }\n        \n        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\n        if #available(iOS 15.0, *) {\n            configuration.upgradeKnownHostsToHTTPS = false\n        }\n        \n        // ‚úÖ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–ï–ë-–í–û–ó–ú–û–ñ–ù–û–°–¢–ò\n        if #available(iOS 14.0, *) {\n            // –†–∞–∑—Ä–µ—à–∞–µ–º –≤—Å–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞\n            configuration.defaultWebpagePreferences.allowsContentJavaScript = true\n        }\n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤\n        if #available(iOS 14.5, *) {\n            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n            configuration.limitsNavigationsToAppBoundDomains = false\n        }\n        \n        let webView = WKWebView(frame: .zero, configuration: configuration)\n        webView.navigationDelegate = context.coordinator\n        webView.uiDelegate = context.coordinator\n        \n        webView.customUserAgent = DataManager.createCustomUserAgent()\n        webView.allowsBackForwardNavigationGestures = true\n        webView.allowsLinkPreview = true\n        \n        // ‚úÖ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò WEBVIEW\n        webView.isOpaque = true\n        webView.backgroundColor = UIColor.black\n        \n        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–µ–ª—å–∫–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n        webView.scrollView.backgroundColor = UIColor.black\n        webView.scrollView.bounces = true\n        webView.scrollView.alwaysBounceVertical = true\n        \n        // ‚úÖ –ê–ì–†–ï–°–°–ò–í–ù–û–ï –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ó–£–ú–ê –ù–ê –ù–ê–¢–ò–í–ù–û–ú –£–†–û–í–ù–ï\n        webView.scrollView.minimumZoomScale = 1.0\n        webView.scrollView.maximumZoomScale = 1.0\n        webView.scrollView.zoomScale = 1.0\n        webView.scrollView.bouncesZoom = false\n        webView.scrollView.isScrollEnabled = true // –û—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É, —É–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ –∑—É–º\n        \n        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑—É–º–∞\n        // –ò—Å–ø–æ–ª—å–∑—É–µ–º .never –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —á–µ—Ä–µ–∑ JavaScript\n        // –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ contentInset –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã\n        webView.scrollView.contentInsetAdjustmentBehavior = .never\n        webView.scrollView.automaticallyAdjustsScrollIndicatorInsets = true\n        \n        // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ\n        webView.scrollView.keyboardDismissMode = .none\n        \n        // –û—Ç–∫–ª—é—á–∞–µ–º –í–°–ï –∂–µ—Å—Ç—ã –∑—É–º–∞\n        if let scrollView = webView.scrollView as UIScrollView? {\n            // –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ tap –∂–µ—Å—Ç—ã (–≤–∫–ª—é—á–∞—è –¥–≤–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ)\n            for gesture in scrollView.gestureRecognizers ?? [] {\n                if let tapGesture = gesture as? UITapGestureRecognizer {\n                    if tapGesture.numberOfTapsRequired == 2 {\n                        tapGesture.isEnabled = false\n                        print(\"üö´ Disabled double-tap zoom gesture\")\n                    }\n                }\n                \n                // –û—Ç–∫–ª—é—á–∞–µ–º pinch –∂–µ—Å—Ç—ã\n                if let pinchGesture = gesture as? UIPinchGestureRecognizer {\n                    pinchGesture.isEnabled = false\n                    print(\"üö´ Disabled pinch zoom gesture\")\n                }\n            }\n            \n            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–µ–ª–µ–≥–∞—Ç –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è\n            scrollView.delegate = context.coordinator\n        }\n        \n        // –û—Ç–∫–ª—é—á–∞–µ–º –±–µ–ª—ã–π —Ñ–æ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n        if #available(iOS 15.0, *) {\n            webView.underPageBackgroundColor = UIColor.black\n        }\n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Ñ—É–Ω–∫—Ü–∏–π\n        if #available(iOS 16.4, *) {\n            webView.isInspectable = true // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤ Safari Web Inspector\n        }\n        \n        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –∑–∞ –ø–æ–≤–æ—Ä–æ—Ç–∞–º–∏ —ç–∫—Ä–∞–Ω–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –∑—É–º–∞\n        context.coordinator.setupOrientationObserver(for: webView)\n        \n        return webView\n    }\n    \n    func updateUIView(_ webView: WKWebView, context: Context) {\n        guard let targetURL = URL(string: url) else {\n            print(\"‚ùå WebView: Invalid URL - \\(url)\")\n            return\n        }\n        \n        // –ù–ï –≤–º–µ—à–∏–≤–∞–µ–º—Å—è –µ—Å–ª–∏ WebView —É–∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–ª–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n        if webView.isLoading {\n            print(\"üîÑ WebView: Currently loading - not interfering with navigation\")\n            return\n        }\n        \n        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π URL –≤ WebView\n        let currentURLString = webView.url?.absoluteString ?? \"\"\n        let targetURLString = targetURL.absoluteString\n        \n        // –í–ê–ñ–ù–û: –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ\n        // –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∫ config URL –∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º\n        if !currentURLString.isEmpty && currentURLString != targetURLString {\n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            let hasNavigationHistory = webView.canGoBack || webView.canGoForward\n            let isDifferentDomain = URL(string: currentURLString)?.host != URL(string: targetURLString)?.host\n            \n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π URL –∏–∑ UserDefaults\n            let lastUserURL = UserDefaults.standard.string(forKey: \"last_opened_url\") ?? \"\"\n            let isCurrentURLUserOpened = currentURLString == lastUserURL\n            \n            // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º –µ—Å–ª–∏ —ç—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –Ω–∞ —Ç–æ–º –∂–µ –¥–æ–º–µ–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä /redirect/1 -> /redirect/2)\n            let isRedirectSequence = currentURLString.contains(\"/redirect/\") && targetURLString.contains(\"/redirect/\")\n            \n            // –ù–û–í–û–ï: –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –∞ target - —Ä–µ–¥–∏—Ä–µ–∫—Ç\n            let isCurrentFinal = currentURLString.contains(\"/final\") || !currentURLString.contains(\"/redirect/\")\n            let isTargetRedirect = targetURLString.contains(\"/redirect/\")\n            let shouldPreserveFinalPage = isCurrentFinal && isTargetRedirect\n            \n            if ((hasNavigationHistory || (isDifferentDomain && isCurrentURLUserOpened)) && !isRedirectSequence) || shouldPreserveFinalPage {\n                print(\"üö´ WebView: NOT forcing reload\")\n                print(\"   Current URL: \\(currentURLString)\")\n                print(\"   Target URL: \\(targetURLString)\")\n                print(\"   Has history: \\(hasNavigationHistory)\")\n                print(\"   Different domain: \\(isDifferentDomain)\")\n                print(\"   Is user-opened URL: \\(isCurrentURLUserOpened)\")\n                print(\"   Is redirect sequence: \\(isRedirectSequence)\")\n                print(\"   Should preserve final page: \\(shouldPreserveFinalPage)\")\n                print(\"   Allowing user to stay on current page\")\n                return\n            }\n        }\n        \n        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ URL –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª—Å—è –∏ WebView –Ω–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–≥—Ä—É–∑–∫–∏\n        if currentURLString != targetURLString && !webView.isLoading {\n            print(\"üåê WebView: Loading new URL - \\(targetURLString)\")\n            print(\"   Previous URL: \\(currentURLString)\")\n            \n            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä\n            DispatchQueue.main.async {\n                self.isLoading = true\n                self.hideLoaderTimer?.invalidate()\n            }\n            \n            // –°–æ–∑–¥–∞–µ–º –∑–∞–ø—Ä–æ—Å —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏\n            var request = URLRequest(url: targetURL)\n            request.cachePolicy = .returnCacheDataElseLoad\n            request.timeoutInterval = 30.0\n            \n            webView.load(request)\n        } else if webView.isLoading {\n            print(\"üîÑ WebView: Already loading, skipping new request\")\n        } else {\n            print(\"üîÑ WebView: URL unchanged, skipping reload\")\n        }\n    }\n    \n    func makeCoordinator() -> Coordinator {\n        Coordinator(self)\n    }\n    \n    private func createCustomUserAgent() -> String {\n        let systemVersion = UIDevice.current.systemVersion\n        let deviceModel = UIDevice.current.model\n        \n        return \"Mozilla/5.0 (\\(deviceModel); CPU OS \\(systemVersion.replacingOccurrences(of: \".\", with: \"_\")) like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/\\(systemVersion) Mobile/15E148 Safari/604.1\"\n    }\n    \n    class Coordinator: NSObject, WKNavigationDelegate, WKUIDelegate, UIScrollViewDelegate {\n        let parent: WebView\n        private var redirectCount = 0\n        private let maxRedirects = 15\n        private var isHandlingRedirectLimit = false\n        private var orientationObserver: NSObjectProtocol?\n        private weak var webView: WKWebView?\n        private var lastRedirectTime: TimeInterval = 0\n        private var redirectChainStartURL: String?\n        private var isGamblingDomain = false\n        \n        init(_ parent: WebView) {\n            self.parent = parent\n        }\n        \n        deinit {\n            removeOrientationObserver()\n        }\n        \n        func setupOrientationObserver(for webView: WKWebView) {\n            self.webView = webView\n            removeOrientationObserver() // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –µ—Å–ª–∏ –µ—Å—Ç—å\n            \n            orientationObserver = NotificationCenter.default.addObserver(\n                forName: UIDevice.orientationDidChangeNotification,\n                object: nil,\n                queue: .main\n            ) { [weak self] _ in\n                self?.handleOrientationChange()\n            }\n        }\n        \n        private func removeOrientationObserver() {\n            if let observer = orientationObserver {\n                NotificationCenter.default.removeObserver(observer)\n                orientationObserver = nil\n            }\n        }\n        \n        private func handleOrientationChange() {\n            guard let webView = webView else { return }\n            \n            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–≤–æ—Ä–æ—Ç–∞\n            DispatchQueue.main.asyncAfter(deadline: .now() + 0.3) {\n                // –¢–æ–ª—å–∫–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑—É–º, –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É\n                if webView.scrollView.zoomScale != 1.0 {\n                    webView.scrollView.setZoomScale(1.0, animated: false)\n                    print(\"üîÑ WebView zoom reset to 100% after orientation change\")\n                }\n                \n                // –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑—É–º–∞ –±–µ–∑ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π\n                webView.scrollView.minimumZoomScale = 1.0\n                webView.scrollView.maximumZoomScale = 1.0\n                webView.scrollView.bouncesZoom = false\n                \n                print(\"üîß Zoom settings reapplied after orientation change (no page reload)\")\n            }\n        }\n        \n        private func handleDeepLink(url: URL, webView: WKWebView) {\n            print(\"üîó ===== DEEP LINK HANDLING =====\")\n            print(\"üì± URL: \\(url.absoluteString)\")\n            print(\"üîç Scheme: \\(url.scheme ?? \"nil\")\")\n            print(\"üè† Host: \\(url.host ?? \"nil\")\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è deep links\n            // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å –Ω–∞–ø—Ä—è–º—É—é, –Ω–µ –ø–æ–ª–∞–≥–∞—è—Å—å –Ω–∞ canOpenURL\n            print(\"üöÄ Attempting to open deep link directly...\")\n            UIApplication.shared.open(url, options: [:]) { success in\n                print(\"üì± Deep link opened: \\(success ? \"‚úÖ success\" : \"‚ùå failed\")\")\n                \n                if success {\n                    print(\"‚úÖ Successfully opened external app\")\n                    // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –¥–æ–ª—å—à–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                        self.returnToPreviousPage(webView: webView, fallbackURL: currentURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open deep link directly\")\n                    // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä—è–º–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, –ø—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã\n                    DispatchQueue.main.async {\n                        self.handleUnsupportedDeepLink(url: url, webView: webView, fallbackURL: currentURL)\n                    }\n                }\n            }\n            \n            print(\"================================\")\n        }\n        \n        private func handleUPILink(url: URL, webView: WKWebView) {\n            print(\"üí≥ ===== UPI LINK HANDLING =====\")\n            print(\"üì± UPI URL: \\(url.absoluteString)\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –°–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö UPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞\n            let upiApps = [\n                (\"phonepe\", \"PhonePe\"),\n                (\"paytmmp\", \"Paytm\"),\n                (\"gpay\", \"Google Pay\"),\n                (\"bhimupi\", \"BHIM\"),\n                (\"phonepe-switch\", \"PhonePe Switch\"),\n                (\"paytm\", \"Paytm Alt\"),\n                (\"phonepe-merchant\", \"PhonePe Merchant\")\n            ]\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å UPI —Å—Å—ã–ª–∫—É –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n            tryUPIApps(url: url, apps: upiApps, currentIndex: 0, webView: webView, fallbackURL: currentURL)\n            \n            print(\"===============================\")\n        }\n        \n        private func tryUPIApps(url: URL, apps: [(String, String)], currentIndex: Int, webView: WKWebView, fallbackURL: URL?) {\n            guard currentIndex < apps.count else {\n                print(\"‚ùå All UPI apps failed, returning to previous page\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            let (scheme, appName) = apps[currentIndex]\n            let upiURLString = url.absoluteString.replacingOccurrences(of: \"upi://\", with: \"\\(scheme)://\")\n            \n            guard let upiURL = URL(string: upiURLString) else {\n                print(\"‚ùå Invalid UPI URL for \\(appName)\")\n                tryUPIApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            print(\"üîÑ Trying UPI with \\(appName): \\(upiURLString)\")\n            \n            UIApplication.shared.open(upiURL, options: [:]) { success in\n                if success {\n                    print(\"‚úÖ Successfully opened UPI with \\(appName)\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                        self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open UPI with \\(appName), trying next app\")\n                    DispatchQueue.main.async {\n                        self.tryUPIApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                    }\n                }\n            }\n        }\n        \n        private func handleBankIDLink(url: URL, webView: WKWebView) {\n            print(\"üè¶ ===== BANKID LINK HANDLING =====\")\n            print(\"üì± BankID URL: \\(url.absoluteString)\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –°–ø–∏—Å–æ–∫ BankID —Å—Ö–µ–º –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞\n            let bankidApps = [\n                (\"bankid\", \"BankID\"),\n                (\"bankid-app\", \"BankID App\"),\n                (\"mobilebankid\", \"Mobile BankID\")\n            ]\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å BankID —Å—Å—ã–ª–∫—É –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n            tryBankIDApps(url: url, apps: bankidApps, currentIndex: 0, webView: webView, fallbackURL: currentURL)\n            \n            print(\"===============================\")\n        }\n        \n        private func tryBankIDApps(url: URL, apps: [(String, String)], currentIndex: Int, webView: WKWebView, fallbackURL: URL?) {\n            guard currentIndex < apps.count else {\n                print(\"‚ùå All BankID apps failed, returning to previous page\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            let (scheme, appName) = apps[currentIndex]\n            let originalScheme = url.scheme?.lowercased() ?? \"\"\n            let bankidURLString = url.absoluteString.replacingOccurrences(of: \"\\(originalScheme)://\", with: \"\\(scheme)://\")\n            \n            guard let bankidURL = URL(string: bankidURLString) else {\n                print(\"‚ùå Invalid BankID URL for \\(appName)\")\n                tryBankIDApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            print(\"üîÑ Trying BankID with \\(appName): \\(bankidURLString)\")\n            \n            UIApplication.shared.open(bankidURL, options: [:]) { success in\n                if success {\n                    print(\"‚úÖ Successfully opened BankID with \\(appName)\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 3.0) { // BankID –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏\n                        self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open BankID with \\(appName), trying next app\")\n                    DispatchQueue.main.async {\n                        self.tryBankIDApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                    }\n                }\n            }\n        }\n        \n        private func handlePhonePeLink(url: URL, webView: WKWebView) {\n            print(\"üí≥ ===== PHONEPE LINK HANDLING =====\")\n            print(\"üì± PhonePe URL: \\(url.absoluteString)\")\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π URL –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞\n            let currentURL = webView.url\n            print(\"üíæ Current URL saved for return: \\(currentURL?.absoluteString ?? \"nil\")\")\n            \n            // –°–ø–∏—Å–æ–∫ PhonePe —Å—Ö–µ–º –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞\n            let phonepeApps = [\n                (\"phonepe\", \"PhonePe\"),\n                (\"phonepe-switch\", \"PhonePe Switch\"),\n                (\"phonepe-merchant\", \"PhonePe Merchant\")\n            ]\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å PhonePe —Å—Å—ã–ª–∫—É –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n            tryPhonePeApps(url: url, apps: phonepeApps, currentIndex: 0, webView: webView, fallbackURL: currentURL)\n            \n            print(\"===============================\")\n        }\n        \n        private func tryPhonePeApps(url: URL, apps: [(String, String)], currentIndex: Int, webView: WKWebView, fallbackURL: URL?) {\n            guard currentIndex < apps.count else {\n                print(\"‚ùå All PhonePe apps failed, returning to previous page\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            let (scheme, appName) = apps[currentIndex]\n            let originalScheme = url.scheme?.lowercased() ?? \"\"\n            let phonepeURLString = url.absoluteString.replacingOccurrences(of: \"\\(originalScheme)://\", with: \"\\(scheme)://\")\n            \n            guard let phonepeURL = URL(string: phonepeURLString) else {\n                print(\"‚ùå Invalid PhonePe URL for \\(appName)\")\n                tryPhonePeApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                return\n            }\n            \n            print(\"üîÑ Trying PhonePe with \\(appName): \\(phonepeURLString)\")\n            \n            UIApplication.shared.open(phonepeURL, options: [:]) { success in\n                if success {\n                    print(\"‚úÖ Successfully opened PhonePe with \\(appName)\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                        self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                    }\n                } else {\n                    print(\"‚ùå Failed to open PhonePe with \\(appName), trying next app\")\n                    DispatchQueue.main.async {\n                        self.tryPhonePeApps(url: url, apps: apps, currentIndex: currentIndex + 1, webView: webView, fallbackURL: fallbackURL)\n                    }\n                }\n            }\n        }\n        \n        private func returnToPreviousPage(webView: WKWebView, fallbackURL: URL?) {\n            print(\"‚¨ÖÔ∏è ===== RETURNING TO PREVIOUS PAGE =====\")\n            \n            if webView.canGoBack {\n                print(\"‚úÖ Going back to previous page\")\n                webView.goBack()\n                \n                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ\n                DispatchQueue.main.asyncAfter(deadline: .now() + 3.0) {\n                    self.checkPageLoadStatus(webView: webView, fallbackURL: fallbackURL)\n                }\n            } else if let fallbackURL = fallbackURL {\n                print(\"üîÑ No back history, reloading fallback URL\")\n                webView.load(URLRequest(url: fallbackURL))\n            } else {\n                print(\"‚ö†Ô∏è No back history and no fallback URL\")\n            }\n            \n            print(\"========================================\")\n        }\n        \n        private func checkPageLoadStatus(webView: WKWebView, fallbackURL: URL?) {\n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–∫–∏\n            webView.evaluateJavaScript(\"document.title\") { result, error in\n                if let title = result as? String {\n                    print(\"üìÑ Current page title: \\(title)\")\n                    \n                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ —Ç–∏–ø–∏—á–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –æ—à–∏–±–æ–∫\n                    let errorTitles = [\"error\", \"not found\", \"404\", \"500\", \"unavailable\", \"problem\"]\n                    let isErrorPage = errorTitles.contains { title.lowercased().contains($0) }\n                    \n                    if isErrorPage {\n                        print(\"‚ùå Error page detected, attempting to reload fallback URL\")\n                        if let fallbackURL = fallbackURL {\n                            DispatchQueue.main.async {\n                                webView.load(URLRequest(url: fallbackURL))\n                            }\n                        }\n                    } else {\n                        print(\"‚úÖ Page appears to be loaded correctly\")\n                    }\n                } else {\n                    print(\"‚ö†Ô∏è Could not get page title: \\(error?.localizedDescription ?? \"unknown error\")\")\n                }\n            }\n        }\n        \n        private func handleUnsupportedDeepLink(url: URL, webView: WKWebView, fallbackURL: URL?) {\n            print(\"üîç ===== HANDLING UNSUPPORTED DEEP LINK =====\")\n            \n            // –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–∫—Ä—ã—Ç–∏—è\n            if let scheme = url.scheme?.lowercased() {\n                var alternativeURL: URL?\n                var shouldTryAlternativeSchemes = false\n                \n                switch scheme {\n                // –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏\n                case \"instagram\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://instagram.com\\(path)\")\n                    }\n                case \"twitter\", \"x\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://twitter.com\\(path)\")\n                    }\n                case \"facebook\", \"fb\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://facebook.com\\(path)\")\n                    }\n                case \"youtube\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://youtube.com\\(path)\")\n                    }\n                case \"tiktok\":\n                    if let path = url.path.isEmpty ? nil : url.path {\n                        alternativeURL = URL(string: \"https://tiktok.com\\(path)\")\n                    }\n                \n                // –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n                case \"paytmmp\", \"paytm\":\n                    print(\"üí≥ Detected Paytm payment link\")\n                    shouldTryAlternativeSchemes = true\n                    // –ü—ã—Ç–∞–µ–º—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è Paytm\n                    let paytmSchemes = [\"paytm://\", \"paytmmp://\"]\n                    for altScheme in paytmSchemes {\n                        if altScheme != \"\\(scheme)://\" {\n                            let altURLString = url.absoluteString.replacingOccurrences(of: \"\\(scheme)://\", with: altScheme)\n                            if let altURL = URL(string: altURLString) {\n                                print(\"üîÑ Trying alternative Paytm scheme: \\(altURLString)\")\n                                UIApplication.shared.open(altURL, options: [:]) { success in\n                                    if success {\n                                        print(\"‚úÖ Successfully opened Paytm with alternative scheme\")\n                                        DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                        }\n                                        return\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    \n                case \"phonepe\", \"phonepe-merchant\", \"phonepe-switch\":\n                    print(\"üí≥ Detected PhonePe payment link\")\n                    shouldTryAlternativeSchemes = true\n                    // –ü—ã—Ç–∞–µ–º—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è PhonePe\n                    let phonepeSchemes = [\"phonepe://\", \"phonepe-merchant://\", \"phonepe-switch://\"]\n                    for altScheme in phonepeSchemes {\n                        if altScheme != \"\\(scheme)://\" {\n                            let altURLString = url.absoluteString.replacingOccurrences(of: \"\\(scheme)://\", with: altScheme)\n                            if let altURL = URL(string: altURLString) {\n                                print(\"üîÑ Trying alternative PhonePe scheme: \\(altURLString)\")\n                                UIApplication.shared.open(altURL, options: [:]) { success in\n                                    if success {\n                                        print(\"‚úÖ Successfully opened PhonePe with alternative scheme\")\n                                        DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                        }\n                                        return\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    \n                case \"bankid\", \"bankid-app\", \"mobilebankid\":\n                    print(\"üè¶ Detected BankID authentication link\")\n                    shouldTryAlternativeSchemes = true\n                    // –ü—ã—Ç–∞–µ–º—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è BankID\n                    let bankidSchemes = [\"bankid://\", \"bankid-app://\", \"mobilebankid://\"]\n                    for altScheme in bankidSchemes {\n                        if altScheme != \"\\(scheme)://\" {\n                            let altURLString = url.absoluteString.replacingOccurrences(of: \"\\(scheme)://\", with: altScheme)\n                            if let altURL = URL(string: altURLString) {\n                                print(\"üîÑ Trying alternative BankID scheme: \\(altURLString)\")\n                                UIApplication.shared.open(altURL, options: [:]) { success in\n                                    if success {\n                                        print(\"‚úÖ Successfully opened BankID with alternative scheme\")\n                                        DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                        }\n                                        return\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    \n                case \"gpay\", \"googlepay\", \"tez\":\n                    print(\"üí≥ Detected Google Pay payment link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"upi\":\n                    print(\"üí≥ Detected UPI payment link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"bhim\", \"bhimupi\":\n                    print(\"üí≥ Detected BHIM payment link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"whatsapp\":\n                    print(\"üí¨ Detected WhatsApp link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                case \"telegram\", \"tg\":\n                    print(\"üí¨ Detected Telegram link\")\n                    shouldTryAlternativeSchemes = true\n                    \n                default:\n                    print(\"ü§∑‚Äç‚ôÇÔ∏è Unknown scheme: \\(scheme)\")\n                    shouldTryAlternativeSchemes = true\n                }\n                \n                // –ï—Å–ª–∏ –µ—Å—Ç—å –≤–µ–±-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞, –ø—ã—Ç–∞–µ–º—Å—è –µ–µ\n                if let altURL = alternativeURL {\n                    print(\"üîÑ Trying web alternative URL: \\(altURL.absoluteString)\")\n                    webView.load(URLRequest(url: altURL))\n                    return\n                }\n                \n                // –î–ª—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–¥–æ–∂–¥–∞—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å\n                if shouldTryAlternativeSchemes {\n                    print(\"‚è≥ Waiting and retrying deep link for \\(scheme)...\")\n                    DispatchQueue.main.asyncAfter(deadline: .now() + 1.0) {\n                        UIApplication.shared.open(url, options: [:]) { success in\n                            if success {\n                                print(\"‚úÖ Successfully opened \\(scheme) on retry\")\n                                DispatchQueue.main.asyncAfter(deadline: .now() + 2.0) {\n                                    self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                                }\n                            } else {\n                                print(\"‚ùå Failed to open \\(scheme) on retry\")\n                                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n                                DispatchQueue.main.async {\n                                    self.showDeepLinkFailureMessage(scheme: scheme, webView: webView, fallbackURL: fallbackURL)\n                                }\n                            }\n                        }\n                    }\n                    return\n                }\n            }\n            \n            // –ï—Å–ª–∏ –Ω–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n            print(\"‚¨ÖÔ∏è No alternative found, returning to previous page\")\n            self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n            \n            print(\"===============================================\")\n        }\n        \n        private func showDeepLinkFailureMessage(scheme: String, webView: WKWebView, fallbackURL: URL?) {\n            print(\"üí¨ ===== SHOWING DEEP LINK FAILURE MESSAGE =====\")\n            \n            let appName = getAppNameForScheme(scheme)\n            let message = \"The \\(appName) app is required to complete this action. Please install \\(appName) from the App Store or try again.\"\n            \n            // –°–æ–∑–¥–∞–µ–º alert\n            let alert = UIAlertController(\n                title: \"App Required\",\n                message: message,\n                preferredStyle: .alert\n            )\n            \n            // –ö–Ω–æ–ø–∫–∞ \"Try Again\"\n            alert.addAction(UIAlertAction(title: \"Try Again\", style: .default) { _ in\n                print(\"üîÑ User chose to try again\")\n                // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å –µ—â–µ —Ä–∞–∑\n                if let originalURL = URL(string: \"\\(scheme)://\\(fallbackURL?.path ?? \"\")\") {\n                    UIApplication.shared.open(originalURL, options: [:]) { success in\n                        if !success {\n                            // –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n                            DispatchQueue.main.async {\n                                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                            }\n                        }\n                    }\n                } else {\n                    self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n                }\n            })\n            \n            // –ö–Ω–æ–ø–∫–∞ \"Cancel\"\n            alert.addAction(UIAlertAction(title: \"Cancel\", style: .cancel) { _ in\n                print(\"‚ùå User cancelled deep link\")\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n            })\n            \n            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º alert\n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let window = windowScene.windows.first,\n               let rootViewController = window.rootViewController {\n                DispatchQueue.main.async {\n                    rootViewController.present(alert, animated: true)\n                }\n            } else {\n                // –ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ–º –ø–æ–∫–∞–∑–∞—Ç—å alert, –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è\n                self.returnToPreviousPage(webView: webView, fallbackURL: fallbackURL)\n            }\n            \n            print(\"================================================\")\n        }\n        \n        private func getAppNameForScheme(_ scheme: String) -> String {\n            switch scheme.lowercased() {\n            case \"paytmmp\", \"paytm\":\n                return \"Paytm\"\n            case \"phonepe\", \"phonepe-merchant\", \"phonepe-switch\":\n                return \"PhonePe\"\n            case \"bankid\", \"bankid-app\", \"mobilebankid\":\n                return \"BankID\"\n            case \"gpay\", \"googlepay\", \"tez\":\n                return \"Google Pay\"\n            case \"upi\":\n                return \"UPI\"\n            case \"bhim\", \"bhimupi\":\n                return \"BHIM\"\n            case \"whatsapp\":\n                return \"WhatsApp\"\n            case \"telegram\", \"tg\":\n                return \"Telegram\"\n            case \"instagram\":\n                return \"Instagram\"\n            case \"twitter\", \"x\":\n                return \"Twitter\"\n            case \"facebook\", \"fb\":\n                return \"Facebook\"\n            case \"youtube\":\n                return \"YouTube\"\n            case \"tiktok\":\n                return \"TikTok\"\n            default:\n                return \"required\"\n            }\n        }\n        \n        private func shouldOpenURLExternally(url: URL, urlString: String, scheme: String, host: String) -> Bool {\n            // –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ª—É—á—à–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö\n            let externalAppDomains = [\n                // –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏\n                \"instagram.com\", \"www.instagram.com\",\n                \"facebook.com\", \"www.facebook.com\", \"m.facebook.com\",\n                \"twitter.com\", \"www.twitter.com\", \"mobile.twitter.com\", \"x.com\", \"www.x.com\",\n                \"tiktok.com\", \"www.tiktok.com\", \"m.tiktok.com\",\n                \"linkedin.com\", \"www.linkedin.com\",\n                \"snapchat.com\", \"www.snapchat.com\",\n                \n                // –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã\n                \"telegram.org\", \"t.me\", \"web.telegram.org\",\n                \"whatsapp.com\", \"www.whatsapp.com\", \"web.whatsapp.com\",\n                \"discord.com\", \"www.discord.com\",\n                \n                // –í–∏–¥–µ–æ –∏ –º—É–∑—ã–∫–∞\n                \"youtube.com\", \"www.youtube.com\", \"m.youtube.com\",\n                \"youtu.be\",\n                \"spotify.com\", \"www.spotify.com\", \"open.spotify.com\",\n                \"soundcloud.com\", \"www.soundcloud.com\",\n                \n                // –ú–∞–≥–∞–∑–∏–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n                \"apps.apple.com\", \"itunes.apple.com\",\n                \"play.google.com\",\n                \n                // –ö–∞—Ä—Ç—ã\n                \"maps.google.com\", \"www.google.com/maps\",\n                \"maps.apple.com\"\n            ]\n            \n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ URL –¥–æ–º–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞\n            let shouldOpen = externalAppDomains.contains { domain in\n                host == domain || host.hasSuffix(\".\" + domain)\n            }\n            \n            if shouldOpen {\n                print(\"üéØ Domain \\(host) should be opened externally\")\n            }\n            \n            return shouldOpen\n        }\n        \n        private func isGamblingDomain(_ url: URL) -> Bool {\n            guard let host = url.host?.lowercased() else { return false }\n            \n            let gamblingDomains = [\n                // Casino domains\n                \"ninecasino\", \"betonliga\", \"invofy\", \"casino\", \"bet\", \"poker\", \"slots\",\n                \"gambling\", \"game\", \"play\", \"win\", \"jackpot\", \"roulette\", \"blackjack\",\n                // Gaming providers\n                \"bgaming\", \"jacks\", \"pragmatic\", \"netent\", \"microgaming\", \"playtech\",\n                \"evolution\", \"ezugi\", \"playson\", \"quickspin\", \"yggdrasil\", \"nolimit\",\n                // Specific domains from logs\n                \"ninecasinogo.com\", \"02ninecasino61.com\", \"auth.betonliga.com\", \"invofy5.com\"\n            ]\n            \n            return gamblingDomains.contains { domain in\n                host.contains(domain)\n            }\n        }\n        \n        private func isGamingProviderDomain(_ url: URL) -> Bool {\n            guard let host = url.host?.lowercased() else { return false }\n            \n            let gamingProviders = [\n                // Major gaming providers that use about:blank and special schemes\n                \"bgaming\", \"jacks\", \"pragmaticplay\", \"netent\", \"microgaming\", \"playtech\",\n                \"evolution\", \"ezugi\", \"playson\", \"quickspin\", \"yggdrasil\", \"nolimitcity\",\n                \"redtiger\", \"bigtime\", \"relax\", \"hacksaw\", \"push\", \"thunderkick\",\n                \"kalamba\", \"fantasma\", \"booming\", \"spinomenal\", \"wazdan\", \"evoplay\"\n            ]\n            \n            return gamingProviders.contains { provider in\n                host.contains(provider)\n            }\n        }\n        \n        private func isTrackingDomain(_ url: URL) -> Bool {\n            guard let host = url.host?.lowercased() else { return false }\n            \n            let trackingDomains = [\n                // Google tracking\n                \"doubleclick.net\", \"googleadservices.com\", \"googlesyndication.com\",\n                \"google-analytics.com\", \"googletagmanager.com\", \"googletagservices.com\",\n                // Facebook tracking\n                \"facebook.com\", \"connect.facebook.net\",\n                // Other tracking\n                \"hotjar.com\", \"mixpanel.com\", \"segment.com\", \"amplitude.com\",\n                \"yandex.ru\", \"mc.yandex.ru\"\n            ]\n            \n            return trackingDomains.contains { domain in\n                host.contains(domain)\n            }\n        }\n        \n        private func resetRedirectCounterSafely() {\n            let now = Date().timeIntervalSince1970\n            \n            // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª\n            let resetInterval: TimeInterval = isGamblingDomain ? 10.0 : 3.0\n            \n            if now - lastRedirectTime > resetInterval {\n                redirectCount = 0\n                isHandlingRedirectLimit = false\n                redirectChainStartURL = nil\n                print(\"üîÑ Redirect counter reset after \\(resetInterval)s interval\")\n            }\n        }\n        \n        private func disableZoomWithJavaScript(_ webView: WKWebView) {\n            let jsCode = \"\"\"\n                // –ü–û–õ–ù–û–ï –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ó–£–ú–ê –° –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–û–ô –û–ë–†–ê–ë–û–¢–ö–û–ô –ö–õ–ê–í–ò–ê–¢–£–†–´\n                \n                // ============================================\n                // –ì–õ–û–ë–ê–õ–¨–ù–´–ô STATE (Single Source of Truth)\n                // ============================================\n                var GLOBAL_STATE = {\n                    activeInputElement: null,\n                    keyboardVisible: false,\n                    keyboardAnimating: false,\n                    scrollDebounceTimer: null,\n                    lastViewportHeight: window.visualViewport ? window.visualViewport.height : window.innerHeight\n                };\n                \n                // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º\n                window.getActiveInputElement = function() {\n                    return GLOBAL_STATE.activeInputElement;\n                };\n                \n                // 1. –£—Å–∏–ª–µ–Ω–Ω—ã–π viewport meta tag\n                function enforceViewportSettings() {\n                    var viewport = document.querySelector('meta[name=\"viewport\"]');\n                    var viewportContent = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover';\n                    \n                    if (viewport) {\n                        viewport.setAttribute('content', viewportContent);\n                    } else {\n                        var meta = document.createElement('meta');\n                        meta.name = 'viewport';\n                        meta.content = viewportContent;\n                        document.getElementsByTagName('head')[0].appendChild(meta);\n                    }\n                    \n                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ viewport —Ç–µ–≥–∏\n                    var allViewports = document.querySelectorAll('meta[name=\"viewport\"]');\n                    for (var i = 0; i < allViewports.length; i++) {\n                        allViewports[i].setAttribute('content', viewportContent);\n                    }\n                }\n                \n                // 2. CSS —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑—É–º–∞ (—É–ª—É—á—à–µ–Ω–Ω—ã–µ –¥–ª—è input –ø–æ–ª–µ–π)\n                function addZoomPreventionCSS() {\n                    var style = document.createElement('style');\n                    style.textContent = `\n                        * {\n                            -webkit-user-select: none;\n                            -webkit-touch-callout: none;\n                            -webkit-tap-highlight-color: transparent;\n                        }\n                        \n                        html, body {\n                            -ms-touch-action: manipulation;\n                            touch-action: manipulation;\n                            -webkit-text-size-adjust: 100%;\n                            -ms-text-size-adjust: 100%;\n                            -webkit-overflow-scrolling: touch;\n                        }\n                        \n                        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è input —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */\n                        input, textarea, select, button, a, [contenteditable], [role=\"textbox\"] {\n                            -webkit-user-select: auto !important;\n                            -webkit-touch-callout: default !important;\n                            touch-action: manipulation !important;\n                            -webkit-tap-highlight-color: rgba(0,0,0,0.1) !important;\n                        }\n                        \n                        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –¥–ª—è —Ñ–æ—Ä–º */\n                        form, .form-control, .input, .form-group {\n                            -webkit-user-select: auto !important;\n                            touch-action: manipulation !important;\n                        }\n                        \n                        /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ \"–ø—Ä—ã–∂–∫–∏\" –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */\n                        input:focus, textarea:focus, select:focus, [contenteditable]:focus {\n                            -webkit-transform: translateZ(0);\n                            transform: translateZ(0);\n                        }\n                    `;\n                    document.head.appendChild(style);\n                }\n                \n                // 3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö –∂–µ—Å—Ç–æ–≤ –∑—É–º–∞\n                function blockZoomGestures() {\n                    // –ë–ª–æ–∫–∏—Ä—É–µ–º –∂–µ—Å—Ç—ã –ø–∏–Ω—á–∞\n                    document.addEventListener('gesturestart', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }, { passive: false, capture: true });\n                    \n                    document.addEventListener('gesturechange', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }, { passive: false, capture: true });\n                    \n                    document.addEventListener('gestureend', function(e) {\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }, { passive: false, capture: true });\n                    \n                    // –ë–ª–æ–∫–∏—Ä—É–µ–º wheel —Å–æ–±—ã—Ç–∏—è (–∑—É–º –∫–æ–ª–µ—Å–∏–∫–æ–º –º—ã—à–∏)\n                    document.addEventListener('wheel', function(e) {\n                        if (e.ctrlKey) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    }, { passive: false, capture: true });\n                    \n                    // –ë–ª–æ–∫–∏—Ä—É–µ–º keydown —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∑—É–º–∞ (Ctrl +/-)\n                    document.addEventListener('keydown', function(e) {\n                        if ((e.ctrlKey || e.metaKey) && (e.key === '+' || e.key === '-' || e.key === '=' || e.key === '0')) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    }, { passive: false, capture: true });\n                }\n                \n                // 4. –£–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–≤–æ–π–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è —Å –∑–∞—â–∏—Ç–æ–π input –ø–æ–ª–µ–π\n                function blockDoubleTapZoom() {\n                    var lastTouchEnd = 0;\n                    var touchCount = 0;\n                    var lastTouchTarget = null;\n                    var isNavigating = false;\n                    var touchStartTime = 0;\n                    var touchStartCount = 0;\n                    \n                    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é\n                    window.addEventListener('beforeunload', function() {\n                        isNavigating = true;\n                        setTimeout(function() { isNavigating = false; }, 1000);\n                    });\n                    \n                    window.addEventListener('popstate', function() {\n                        isNavigating = true;\n                        setTimeout(function() { isNavigating = false; }, 1000);\n                    });\n                    \n                    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö ‚Üí –ò–°–ü–û–õ–¨–ó–£–ï–ú –ì–õ–û–ë–ê–õ–¨–ù–´–ô STATE\n                    document.addEventListener('focusin', function(event) {\n                        var target = event.target;\n                        if (isInputElement(target)) {\n                            GLOBAL_STATE.activeInputElement = target;\n                            console.log('üìù Input element focused, disabling zoom protection temporarily');\n                        }\n                    }, true);\n                    \n                    document.addEventListener('focusout', function(event) {\n                        var target = event.target;\n                        if (isInputElement(target)) {\n                            // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–±—Ä–æ—Å–æ–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤\n                            setTimeout(function() {\n                                GLOBAL_STATE.activeInputElement = null;\n                                console.log('üìù Input element unfocused, re-enabling zoom protection');\n                            }, 300);\n                        }\n                    }, true);\n                    \n                    // –ë–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ touchstart\n                    document.addEventListener('touchstart', function(event) {\n                        if (isNavigating) return;\n                        \n                        var target = event.target;\n                        \n                        // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –∏–ª–∏ –∫–æ–≥–¥–∞ input –∞–∫—Ç–∏–≤–µ–Ω\n                        if (isInputElement(target) || GLOBAL_STATE.activeInputElement) {\n                            return;\n                        }\n                        \n                        var now = Date.now();\n                        if (now - touchStartTime <= 350) { // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—Ä–µ–º—è –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è\n                            touchStartCount++;\n                            if (touchStartCount >= 2) {\n                                if (!isInteractiveElement(target)) {\n                                    event.preventDefault();\n                                    console.log('üö´ Blocked fast double touchstart');\n                                    return false;\n                                }\n                            }\n                        } else {\n                            touchStartCount = 1;\n                        }\n                        touchStartTime = now;\n                    }, { passive: false });\n                    \n                    // –ë–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ touchend\n                    document.addEventListener('touchend', function(event) {\n                        if (isNavigating) return;\n                        \n                        var target = event.target;\n                        \n                        // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –∏–ª–∏ –∫–æ–≥–¥–∞ input –∞–∫—Ç–∏–≤–µ–Ω\n                        if (isInputElement(target) || GLOBAL_STATE.activeInputElement) {\n                            return;\n                        }\n                        \n                        var now = Date.now();\n                        \n                        if (now - lastTouchEnd > 500 || target !== lastTouchTarget) {\n                            touchCount = 1;\n                        } else {\n                            touchCount++;\n                        }\n                        \n                        // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –¥–≤–æ–π–Ω—ã–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö\n                        if (now - lastTouchEnd <= 450 && touchCount >= 2) { // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—Ä–µ–º—è\n                            if (!isInteractiveElement(target)) {\n                                event.preventDefault();\n                                console.log('üö´ Blocked double-tap zoom');\n                                touchCount = 0;\n                                return false;\n                            }\n                        }\n                        \n                        lastTouchEnd = now;\n                        lastTouchTarget = target;\n                    }, { passive: false });\n                    \n                    // –ë–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ click —Å–æ–±—ã—Ç–∏–π\n                    document.addEventListener('click', function(event) {\n                        if (isNavigating) return;\n                        \n                        var target = event.target;\n                        \n                        // –ù–ï –±–ª–æ–∫–∏—Ä—É–µ–º click –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –∏–ª–∏ –∫–æ–≥–¥–∞ input –∞–∫—Ç–∏–≤–µ–Ω\n                        if (isInputElement(target) || GLOBAL_STATE.activeInputElement) {\n                            return;\n                        }\n                        \n                        var now = Date.now();\n                        if (now - lastClickTime <= 450) { // –£–≤–µ–ª–∏—á–∏–ª–∏ –≤—Ä–µ–º—è\n                            clickCount++;\n                            if (clickCount >= 2 && !isInteractiveElement(target)) {\n                                event.preventDefault();\n                                console.log('üö´ Blocked double-click zoom');\n                                return false;\n                            }\n                        } else {\n                            clickCount = 1;\n                        }\n                        lastClickTime = now;\n                    }, { passive: false });\n                }\n                \n                // 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ input —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n                function isInputElement(target) {\n                    if (!target) return false;\n                    \n                    var tagName = target.tagName ? target.tagName.toLowerCase() : '';\n                    var inputTypes = ['input', 'textarea', 'select'];\n                    \n                    if (inputTypes.includes(tagName)) {\n                        return true;\n                    }\n                    \n                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º contenteditable —ç–ª–µ–º–µ–Ω—Ç—ã\n                    if (target.contentEditable === 'true' || target.contentEditable === '') {\n                        return true;\n                    }\n                    \n                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º role=\"textbox\"\n                    if (target.getAttribute('role') === 'textbox') {\n                        return true;\n                    }\n                    \n                    return false;\n                }\n                \n                // 6. –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n                function isInteractiveElement(target) {\n                    if (!target) return false;\n                    \n                    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º input —ç–ª–µ–º–µ–Ω—Ç—ã\n                    if (isInputElement(target)) {\n                        return true;\n                    }\n                    \n                    var currentElement = target;\n                    var maxDepth = 7;\n                    var depth = 0;\n                    \n                    while (currentElement && depth < maxDepth) {\n                        var tagName = currentElement.tagName ? currentElement.tagName.toLowerCase() : '';\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ–≥–∏\n                        if (['button', 'a', 'input', 'select', 'textarea', 'label', 'option', 'form'].includes(tagName)) {\n                            return true;\n                        }\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –∫–ª–∞—Å—Å—ã\n                        if (currentElement.onclick || \n                            currentElement.getAttribute('onclick') ||\n                            currentElement.getAttribute('role') === 'button' ||\n                            currentElement.getAttribute('role') === 'textbox' ||\n                            currentElement.getAttribute('tabindex') ||\n                            currentElement.hasAttribute('data-click') ||\n                            currentElement.hasAttribute('data-action') ||\n                            currentElement.hasAttribute('data-toggle') ||\n                            currentElement.classList.contains('btn') ||\n                            currentElement.classList.contains('button') ||\n                            currentElement.classList.contains('clickable') ||\n                            currentElement.classList.contains('link') ||\n                            currentElement.classList.contains('interactive') ||\n                            currentElement.classList.contains('form-control') ||\n                            currentElement.classList.contains('input')) {\n                            return true;\n                        }\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∏–ª–∏\n                        try {\n                            var styles = window.getComputedStyle(currentElement);\n                            if (styles.cursor === 'pointer') {\n                                return true;\n                            }\n                        } catch (e) {}\n                        \n                        currentElement = currentElement.parentElement;\n                        depth++;\n                    }\n                    \n                    return false;\n                }\n                \n                // 6. –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–ë–ï–ó –ü–û–î–ï–†–ì–ò–í–ê–ù–ò–ô)\n                function setupKeyboardProtection() {\n                    if (!window.visualViewport) {\n                        console.warn('‚ö†Ô∏è visualViewport not supported');\n                        return;\n                    }\n                    \n                    // ============================================\n                    // –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ visualViewport resize\n                    // ============================================\n                    window.visualViewport.addEventListener('resize', function() {\n                        var currentHeight = window.visualViewport.height;\n                        var heightDiff = GLOBAL_STATE.lastViewportHeight - currentHeight;\n                        var wasVisible = GLOBAL_STATE.keyboardVisible;\n                        \n                        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã\n                        GLOBAL_STATE.keyboardVisible = (window.innerHeight - currentHeight) > 150;\n                        \n                        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è\n                        if (GLOBAL_STATE.keyboardVisible && !wasVisible) {\n                            console.log('‚å®Ô∏è Keyboard appeared');\n                            GLOBAL_STATE.keyboardAnimating = true;\n                        } else if (!GLOBAL_STATE.keyboardVisible && wasVisible) {\n                            console.log('‚å®Ô∏è Keyboard disappeared');\n                            GLOBAL_STATE.keyboardAnimating = false;\n                        }\n                        \n                        // –ï—Å–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ò –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π input\n                        if (GLOBAL_STATE.keyboardVisible && heightDiff > 100 && GLOBAL_STATE.activeInputElement) {\n                            // –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–æ–ª–ª—ã (debouncing)\n                            if (GLOBAL_STATE.scrollDebounceTimer) {\n                                clearTimeout(GLOBAL_STATE.scrollDebounceTimer);\n                            }\n                            \n                            // –ü–ª–∞–Ω–∏—Ä—É–µ–º –û–î–ò–ù —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ viewport\n                            GLOBAL_STATE.scrollDebounceTimer = setTimeout(function() {\n                                if (GLOBAL_STATE.activeInputElement) {\n                                    scrollToInputInstant(GLOBAL_STATE.activeInputElement);\n                                }\n                                GLOBAL_STATE.keyboardAnimating = false;\n                            }, 100); // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π debounce –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏\n                        }\n                        \n                        // –ï—Å–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è\n                        if (!GLOBAL_STATE.keyboardVisible && wasVisible) {\n                            // –û—Ç–º–µ–Ω—è–µ–º –≤—Å–µ pending —Å–∫—Ä–æ–ª–ª—ã\n                            if (GLOBAL_STATE.scrollDebounceTimer) {\n                                clearTimeout(GLOBAL_STATE.scrollDebounceTimer);\n                                GLOBAL_STATE.scrollDebounceTimer = null;\n                            }\n                        }\n                        \n                        GLOBAL_STATE.lastViewportHeight = currentHeight;\n                    });\n                    \n                    // ============================================\n                    // –ë–õ–û–ö–ò–†–û–í–ö–ê –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞\n                    // ============================================\n                    document.addEventListener('touchend', function(event) {\n                        var target = event.target;\n                        if (isInputElement(target)) {\n                            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª\n                            event.preventDefault();\n                            \n                            // –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ –¥–∞–µ–º —Ñ–æ–∫—É—Å (–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å)\n                            target.focus();\n                            \n                            console.log('üîí Browser autoscroll blocked, focus applied programmatically');\n                        }\n                    }, { capture: true, passive: false });\n                    \n                    console.log('‚úÖ Optimized keyboard protection enabled');\n                }\n                \n                // ============================================\n                // –ú–ì–ù–û–í–ï–ù–ù–´–ô —Å–∫—Ä–æ–ª–ª –∫ input (–ë–ï–ó smooth –∞–Ω–∏–º–∞—Ü–∏–∏)\n                // ============================================\n                function scrollToInputInstant(element) {\n                    if (!element) return;\n                    \n                    try {\n                        var rect = element.getBoundingClientRect();\n                        var elementTop = rect.top + (window.pageYOffset || document.documentElement.scrollTop);\n                        var viewportHeight = window.visualViewport ? window.visualViewport.height : window.innerHeight;\n                        \n                        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–π —Ç—Ä–µ—Ç–∏ —ç–∫—Ä–∞–Ω–∞ (30% –æ—Ç –≤–µ—Ä—Ö–∞)\n                        var targetScroll = elementTop - (viewportHeight * 0.3);\n                        targetScroll = Math.max(0, targetScroll);\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–µ–Ω –ª–∏ —Å–∫—Ä–æ–ª–ª\n                        var currentScroll = window.pageYOffset || document.documentElement.scrollTop;\n                        var scrollDiff = Math.abs(targetScroll - currentScroll);\n                        \n                        if (scrollDiff > 20) {\n                            // INSTANT —Å–∫—Ä–æ–ª–ª (–ù–ï smooth!) –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π\n                            window.scrollTo({\n                                top: targetScroll,\n                                behavior: 'auto'  // 'auto' = instant/immediate\n                            });\n                            console.log('üìç Input positioned instantly (distance: ' + Math.round(scrollDiff) + 'px)');\n                        } else {\n                            console.log('üìç Input already in optimal position');\n                        }\n                    } catch (e) {\n                        console.warn('‚ö†Ô∏è Error in scrollToInputInstant:', e);\n                    }\n                }\n                \n                // 7. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–±–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–π)\n                function startZoomMonitoring() {\n                    setInterval(function() {\n                        // –ù–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º viewport –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω input\n                        if (!GLOBAL_STATE.activeInputElement) {\n                            enforceViewportSettings();\n                        }\n                        \n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑—É–º –µ—Å–ª–∏ –æ–Ω –ø–æ—è–≤–∏–ª—Å—è (–Ω–æ –Ω–µ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞)\n                        if (window.visualViewport && window.visualViewport.scale > 1.01 && !GLOBAL_STATE.activeInputElement) {\n                            console.log('üîß Detected zoom, attempting to reset');\n                            window.scrollTo(0, 0);\n                        }\n                    }, 2000); // –£–≤–µ–ª–∏—á–∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª —á—Ç–æ–±—ã –º–µ–Ω—å—à–µ –º–µ—à–∞—Ç—å\n                }\n                \n                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞—â–∏—Ç\n                enforceViewportSettings();\n                addZoomPreventionCSS();\n                blockZoomGestures();\n                blockDoubleTapZoom();\n                setupKeyboardProtection();\n                startZoomMonitoring();\n                \n                console.log('üö´ COMPLETE ZOOM PROTECTION WITH OPTIMIZED KEYBOARD SUPPORT ENABLED');\n                console.log('‚úÖ Improvements: Single viewport handler, instant scroll, debouncing, prevented browser autoscroll');\n            \"\"\"\n            \n            webView.evaluateJavaScript(jsCode) { result, error in\n                if let error = error {\n                    print(\"‚ùå Error executing complete zoom disable JavaScript: \\(error.localizedDescription)\")\n                } else {\n                    print(\"‚úÖ Complete zoom protection enabled via JavaScript\")\n                }\n            }\n        }\n        \n        func webView(_ webView: WKWebView, didStartProvisionalNavigation navigation: WKNavigation!) {\n            // –ü—Ä–æ—Å—Ç–æ–µ –Ω–∞—á–∞–ª–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            print(\"üåê WebView: Started loading\")\n        }\n        \n        func webView(_ webView: WKWebView, didReceiveServerRedirectForProvisionalNavigation navigation: WKNavigation!) {\n            print(\"üîÑ Server redirect detected\")\n        }\n        \n        func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!) {\n            DispatchQueue.main.async {\n                print(\"‚úÖ WebView: Successfully loaded URL - \\(webView.url?.absoluteString ?? \"N/A\")\")\n                \n                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π URL –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å–µ—Ç–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\n                if let currentUrl = webView.url?.absoluteString,\n                   currentUrl.hasPrefix(\"http://\") || currentUrl.hasPrefix(\"https://\") {\n                    UserDefaults.standard.set(currentUrl, forKey: \"last_opened_url\")\n                    print(\"üíæ Updated last opened URL: \\(currentUrl)\")\n                }\n                \n                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –¥–æ–º–µ–Ω–∞\n                if let currentUrl = webView.url {\n                    self.isGamblingDomain = self.isGamblingDomain(currentUrl)\n                }\n                \n                // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –∂–¥–µ–º –¥–æ–ª—å—à–µ –ø–µ—Ä–µ–¥ —Å–±—Ä–æ—Å–æ–º —Å—á–µ—Ç—á–∏–∫–∞\n                let resetDelay: TimeInterval = self.isGamblingDomain ? 5.0 : 1.0\n                \n                DispatchQueue.main.asyncAfter(deadline: .now() + resetDelay) {\n                    self.resetRedirectCounterSafely()\n                    print(\"üîÑ Redirect counter reset after \\(resetDelay)s - page loaded successfully\")\n                }\n                \n                // –û—Ç–∫–ª—é—á–∞–µ–º –∑—É–º —á–µ—Ä–µ–∑ JavaScript —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∏–ª–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞\n                if let currentUrl = webView.url?.host {\n                    let lastHost = UserDefaults.standard.string(forKey: \"last_zoom_protection_host\")\n                    if lastHost != currentUrl {\n                        UserDefaults.standard.set(currentUrl, forKey: \"last_zoom_protection_host\")\n                        self.disableZoomWithJavaScript(webView)\n                        print(\"üîß Applied zoom protection for new host: \\(currentUrl)\")\n                    } else {\n                        print(\"üîß Zoom protection already applied for host: \\(currentUrl)\")\n                    }\n                } else {\n                    // –ï—Å–ª–∏ –Ω–µ—Ç —Ö–æ—Å—Ç–∞, –ø—Ä–∏–º–µ–Ω—è–µ–º –∑–∞—â–∏—Ç—É\n                    self.disableZoomWithJavaScript(webView)\n                }\n                \n                // –°–∫—Ä—ã–≤–∞–µ–º –ª–æ–∞–¥–µ—Ä\n                self.parent.hideLoaderTimer?.invalidate()\n                self.parent.hideLoaderTimer = Timer.scheduledTimer(withTimeInterval: 1.0, repeats: false) { _ in\n                    DispatchQueue.main.async {\n                        self.parent.isLoading = false\n                    }\n                }\n                \n                self.parent.onLoadFinished?()\n            }\n        }\n        \n        func webView(_ webView: WKWebView, didFail navigation: WKNavigation!, withError error: Error) {\n            DispatchQueue.main.async {\n                let nsError = error as NSError\n                print(\"‚ùå Navigation failed: \\(nsError.localizedDescription) (code: \\(nsError.code))\")\n                \n                // –ù–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫\n                if nsError.code != NSURLErrorCancelled && nsError.code != 102 {\n                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –æ—à–∏–±–æ–∫\n                    self.resetRedirectCounterSafely()\n                    print(\"üîÑ Redirect counter reset due to navigation failure\")\n                } else {\n                    print(\"‚ö†Ô∏è Navigation cancelled/interrupted - keeping redirect counter\")\n                }\n                \n                self.parent.onLoadError?(error)\n            }\n        }\n        \n        func webView(_ webView: WKWebView, didFailProvisionalNavigation navigation: WKNavigation!, withError error: Error) {\n            DispatchQueue.main.async {\n                let nsError = error as NSError\n                print(\"üî¥ WebView Failed Provisional Navigation:\")\n                print(\"   Error Code: \\(nsError.code)\")\n                print(\"   Error Domain: \\(nsError.domain)\")\n                print(\"   Error Description: \\(error.localizedDescription)\")\n                print(\"   URL: \\(webView.url?.absoluteString ?? \"N/A\")\")\n                \n                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –æ—Ç–º–µ–Ω—É –∑–∞–ø—Ä–æ—Å–æ–≤ (-999) –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ (102)\n                if nsError.code == NSURLErrorCancelled || nsError.code == 102 {\n                    print(\"   Ignored error - cancelled or frame load interrupted\")\n                    return\n                }\n                \n                // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –±–æ–ª–µ–µ —Ç–µ—Ä–ø–∏–º–æ –æ—Ç–Ω–æ—Å–∏–º—Å—è –∫ –æ—à–∏–±–∫–∞–º\n                let shouldResetCounter = !self.isGamblingDomain ||\n                                       (nsError.code != NSURLErrorTimedOut &&\n                                        nsError.code != NSURLErrorNetworkConnectionLost &&\n                                        nsError.code != NSURLErrorNotConnectedToInternet)\n                \n                if shouldResetCounter {\n                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –æ—à–∏–±–æ–∫\n                    self.resetRedirectCounterSafely()\n                    print(\"üîÑ Redirect counter reset due to provisional navigation failure\")\n                } else {\n                    print(\"‚ö†Ô∏è Temporary error on gambling domain - keeping redirect counter\")\n                }\n                \n                // –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–µ–º –∏—Ö –¥–∞–ª—å—à–µ\n                self.parent.onLoadError?(error)\n            }\n        }\n        \n        func webView(_ webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping (WKNavigationActionPolicy) -> Void) {\n            \n            guard let url = navigationAction.request.url else {\n                decisionHandler(.allow)\n                return\n            }\n            \n            print(\"üîó Navigation request: \\(url.absoluteString)\")\n            \n            // –û–±—Ä–∞–±–æ—Ç–∫–∞ deep links –∏ –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π\n            if !url.absoluteString.hasPrefix(\"http\") && !url.absoluteString.hasPrefix(\"https\") {\n                let scheme = url.scheme?.lowercased() ?? \"\"\n                let urlString = url.absoluteString.lowercased()\n                \n                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Å—Ö–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–≥—Ä–æ–≤—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏\n                if scheme == \"about\" {\n                    // –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ about: —Å—Ö–µ–º—ã –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤\n                    let allowedAboutSchemes = [\"about:blank\", \"about:srcdoc\"]\n                    let isAllowedAboutScheme = allowedAboutSchemes.contains { allowedScheme in\n                        urlString.hasPrefix(allowedScheme)\n                    }\n                    \n                    if isAllowedAboutScheme {\n                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n                        if let currentURL = webView.url {\n                            let isCurrentGambling = self.isGamblingDomain(currentURL)\n                            let isCurrentGamingProvider = self.isGamingProviderDomain(currentURL)\n                            \n                            if isCurrentGambling || isCurrentGamingProvider {\n                                print(\"üéÆ Allowing \\(urlString.components(separatedBy: \"?\").first ?? urlString) for gaming site: \\(currentURL.host ?? \"unknown\")\")\n                                decisionHandler(.allow)\n                                return\n                            }\n                        }\n                        \n                        // –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ —Ç–æ–∂–µ —Ä–∞–∑—Ä–µ—à–∞–µ–º (—á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è popup –æ–∫–æ–Ω –∏ iframe)\n                        print(\"üéÆ Allowing \\(urlString.components(separatedBy: \"?\").first ?? urlString) (commonly used for popups and gaming)\")\n                        decisionHandler(.allow)\n                        return\n                    } else {\n                        print(\"üö´ Blocking unsupported about scheme: \\(url.absoluteString)\")\n                        decisionHandler(.cancel)\n                        return\n                    }\n                }\n                \n                // –†–∞–∑—Ä–µ—à–∞–µ–º data: —Å—Ö–µ–º—ã –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä)\n                if scheme == \"data\" {\n                    print(\"üéÆ Allowing data scheme for gaming content\")\n                    decisionHandler(.allow)\n                    return\n                }\n                \n                // –†–∞–∑—Ä–µ—à–∞–µ–º blob: —Å—Ö–µ–º—ã –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –º–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)\n                if scheme == \"blob\" {\n                    print(\"üéÆ Allowing blob scheme for gaming media content\")\n                    decisionHandler(.allow)\n                    return\n                }\n                \n                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å—Ö–µ–º—ã\n                let blockedSchemes = [\"javascript\", \"file\"]\n                \n                if blockedSchemes.contains(scheme) {\n                    print(\"üö´ Blocking dangerous system scheme: \\(scheme):// (URL: \\(url.absoluteString))\")\n                    decisionHandler(.cancel)\n                    return\n                }\n                \n                print(\"üì± Deep link detected: \\(scheme)://\")\n                \n                // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å—Å—ã–ª–æ–∫\n                if scheme == \"upi\" {\n                    print(\"üí≥ UPI payment link detected - attempting multiple payment apps\")\n                    self.handleUPILink(url: url, webView: webView)\n                } else if [\"bankid\", \"bankid-app\", \"mobilebankid\"].contains(scheme) {\n                    print(\"üè¶ BankID authentication link detected\")\n                    self.handleBankIDLink(url: url, webView: webView)\n                } else if [\"phonepe\", \"phonepe-merchant\", \"phonepe-switch\"].contains(scheme) {\n                    print(\"üí≥ PhonePe payment link detected\")\n                    self.handlePhonePeLink(url: url, webView: webView)\n                } else {\n                    self.handleDeepLink(url: url, webView: webView)\n                }\n                \n                decisionHandler(.cancel)\n                return\n            }\n            \n            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö HTTP/HTTPS —Å—Å—ã–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤ –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö\n            if let scheme = url.scheme?.lowercased(), let host = url.host?.lowercased() {\n                let urlString = url.absoluteString.lowercased()\n                \n                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –Ω–æ –ª—É—á—à–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö\n                let shouldOpenExternally = self.shouldOpenURLExternally(url: url, urlString: urlString, scheme: scheme, host: host)\n                \n                if shouldOpenExternally {\n                    print(\"üì± External app link detected: \\(url.absoluteString)\")\n                    self.handleDeepLink(url: url, webView: webView)\n                    decisionHandler(.cancel)\n                    return\n                }\n            }\n            \n            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–º–µ–Ω–∞ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏\n            isGamblingDomain = isGamblingDomain(url)\n            let isTracking = isTrackingDomain(url)\n            \n            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç—Ä–µ–∫–∏–Ω–≥–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã –≤ –ø–æ–¥—Å—á–µ—Ç–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n            if isTracking {\n                print(\"üìä Tracking domain detected, ignoring for redirect count: \\(url.host ?? \"unknown\")\")\n                decisionHandler(.allow)\n                return\n            }\n            \n            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–∫–∏ \"too many redirects\"\n            if navigationAction.navigationType == .other {\n                let now = Date().timeIntervalSince1970\n                \n                // –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é —Ü–µ–ø–æ—á–∫—É —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏\n                if redirectChainStartURL == nil || now - lastRedirectTime > 5.0 {\n                    redirectChainStartURL = url.absoluteString\n                    redirectCount = 1\n                    print(\"üîÑ Starting new redirect chain from: \\(url.absoluteString)\")\n                } else {\n                    redirectCount += 1\n                }\n                \n                lastRedirectTime = now\n                print(\"üîÑ Redirect #\\(redirectCount): \\(url.absoluteString)\")\n                \n                // –î–ª—è –∫–∞–∑–∏–Ω–æ —Å–∞–π—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ª–∏–º–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n                let effectiveMaxRedirects = isGamblingDomain ? 25 : maxRedirects\n                \n                // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ –∫–∞–∂–¥–æ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ\n                parent.onRedirectDetected?()\n                \n                // –ï—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n                if redirectCount >= effectiveMaxRedirects && !isHandlingRedirectLimit {\n                    print(\"‚ö†Ô∏è Redirect limit reached (\\(effectiveMaxRedirects)) for \\(isGamblingDomain ? \"gambling\" : \"regular\") domain\")\n                    print(\"üîó Chain started from: \\(redirectChainStartURL ?? \"unknown\")\")\n                    print(\"üîó Current URL: \\(url.absoluteString)\")\n                    \n                    isHandlingRedirectLimit = true\n                    redirectCount = 0 // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤–æ–π —Ü–µ–ø–æ—á–∫–∏\n                    redirectChainStartURL = nil\n                    \n                    // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞\n                    parent.onRedirectLimitReached?(url.absoluteString)\n                    \n                    decisionHandler(.cancel)\n                    return\n                }\n            } else {\n                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–π (–Ω–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤) —Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏\n                if navigationAction.navigationType == .linkActivated || navigationAction.navigationType == .formSubmitted {\n                    resetRedirectCounterSafely()\n                    print(\"üîÑ Reset redirect counter - new user navigation\")\n                    \n                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—à–µ–ª –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n                    if let currentURL = webView.url?.absoluteString, currentURL != url.absoluteString {\n                        print(\"üë§ User manually navigated from \\(currentURL) to \\(url.absoluteString)\")\n                        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π URL –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å–µ—Ç–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\n                        UserDefaults.standard.set(url.absoluteString, forKey: \"last_opened_url\")\n                        \n                        // –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n                        parent.onUserNavigation?(url.absoluteString, Date())\n                    }\n                }\n            }\n            \n            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            if let shouldAllow = parent.onNavigationAction?(url), !shouldAllow {\n                decisionHandler(.cancel)\n                return\n            }\n            \n            // –†–∞–∑—Ä–µ—à–∞–µ–º –≤—Å–µ HTTP/HTTPS –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n            decisionHandler(.allow)\n        }\n        \n        func webView(_ webView: WKWebView, createWebViewWith configuration: WKWebViewConfiguration, for navigationAction: WKNavigationAction, windowFeatures: WKWindowFeatures) -> WKWebView? {\n            if let url = navigationAction.request.url {\n                webView.load(URLRequest(url: url))\n            }\n            return nil\n        }\n        \n        func webView(_ webView: WKWebView, runJavaScriptAlertPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping () -> Void) {\n            let alert = UIAlertController(title: nil, message: message, preferredStyle: .alert)\n            alert.addAction(UIAlertAction(title: \"OK\", style: .default) { _ in\n                completionHandler()\n            })\n            \n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let window = windowScene.windows.first {\n                window.rootViewController?.present(alert, animated: true)\n            } else {\n                completionHandler()\n            }\n        }\n        \n        func webView(_ webView: WKWebView, runJavaScriptConfirmPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping (Bool) -> Void) {\n            let alert = UIAlertController(title: nil, message: message, preferredStyle: .alert)\n            alert.addAction(UIAlertAction(title: \"OK\", style: .default) { _ in\n                completionHandler(true)\n            })\n            alert.addAction(UIAlertAction(title: \"Cancel\", style: .cancel) { _ in\n                completionHandler(false)\n            })\n            \n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let window = windowScene.windows.first {\n                window.rootViewController?.present(alert, animated: true)\n            } else {\n                completionHandler(false)\n            }\n        }\n        \n        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è Protected Media Content (iOS 15+)\n        @available(iOS 15.0, *)\n        func webView(_ webView: WKWebView, requestMediaCapturePermissionFor origin: WKSecurityOrigin, initiatedByFrame frame: WKFrameInfo, type: WKMediaCaptureType, decisionHandler: @escaping (WKPermissionDecision) -> Void) {\n            print(\"üìπ Auto-granting media capture permission for: \\(origin.host)\")\n            decisionHandler(.grant)\n        }\n        \n        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —É–±—Ä–∞–Ω–æ - API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\n        \n        // MARK: - UIScrollViewDelegate –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑—É–º–∞\n        \n        func viewForZooming(in scrollView: UIScrollView) -> UIView? {\n            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º nil —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –∑—É–º\n            return nil\n        }\n        \n        func scrollViewWillBeginZooming(_ scrollView: UIScrollView, with view: UIView?) {\n            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –Ω–∞—á–∞–ª–æ –∑—É–º–∞\n            print(\"üö´ Prevented zoom attempt\")\n        }\n        \n        func scrollViewDidZoom(_ scrollView: UIScrollView) {\n            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∑—É–º –µ—Å–ª–∏ –æ–Ω –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –ø—Ä–æ–∏–∑–æ—à–µ–ª\n            if scrollView.zoomScale != 1.0 {\n                print(\"üîß Force resetting zoom scale from \\(scrollView.zoomScale) to 1.0\")\n                scrollView.setZoomScale(1.0, animated: false)\n            }\n        }\n        \n        func scrollViewDidEndZooming(_ scrollView: UIScrollView, with view: UIView?, atScale scale: CGFloat) {\n            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–±—Ä–æ—Å –∑—É–º–∞\n            if scale != 1.0 {\n                print(\"üîß Force resetting zoom scale after zoom end from \\(scale) to 1.0\")\n                scrollView.setZoomScale(1.0, animated: false)\n            }\n        }\n        \n        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ WKOpenPanelParameters\n        func webView(_ webView: WKWebView, runOpenPanelWith parameters: Any, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping ([URL]?) -> Void) {\n            print(\"üìÅ File upload request - opening file picker\")\n            \n            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º action sheet –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞\n            presentFilePickerOptions(webView: webView, completionHandler: completionHandler)\n        }\n        \n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–ø—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (–∫–∞–º–µ—Ä–∞ –∏–ª–∏ —Ñ–∞–π–ª—ã)\n        private func presentFilePickerOptions(webView: WKWebView, completionHandler: @escaping ([URL]?) -> Void) {\n            guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n                  let window = windowScene.windows.first,\n                  let rootViewController = window.rootViewController else {\n                completionHandler(nil)\n                return\n            }\n            \n            let actionSheet = UIAlertController(title: \"Select File\", message: nil, preferredStyle: .actionSheet)\n            \n            // –û–ø—Ü–∏—è –∫–∞–º–µ—Ä—ã\n            actionSheet.addAction(UIAlertAction(title: \"Camera\", style: .default) { _ in\n                self.presentImagePicker(webView: webView, sourceType: .camera, completionHandler: completionHandler)\n            })\n            \n            // –û–ø—Ü–∏—è —Ñ–æ—Ç–æ–≥–∞–ª–µ—Ä–µ–∏\n            actionSheet.addAction(UIAlertAction(title: \"Photo Library\", style: .default) { _ in\n                self.presentImagePicker(webView: webView, sourceType: .photoLibrary, completionHandler: completionHandler)\n            })\n            \n            // –û–ø—Ü–∏—è —Ñ–∞–π–ª–æ–≤\n            actionSheet.addAction(UIAlertAction(title: \"Files\", style: .default) { _ in\n                self.presentDocumentPicker(webView: webView, completionHandler: completionHandler)\n            })\n            \n            // –û—Ç–º–µ–Ω–∞\n            actionSheet.addAction(UIAlertAction(title: \"Cancel\", style: .cancel) { _ in\n                completionHandler(nil)\n            })\n            \n            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è iPad\n            if let popover = actionSheet.popoverPresentationController {\n                popover.sourceView = rootViewController.view\n                popover.sourceRect = CGRect(x: rootViewController.view.bounds.midX, y: rootViewController.view.bounds.midY, width: 0, height: 0)\n                popover.permittedArrowDirections = []\n            }\n            \n            rootViewController.present(actionSheet, animated: true)\n        }\n        \n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º UIImagePickerController –¥–ª—è –∫–∞–º–µ—Ä—ã/–≥–∞–ª–µ—Ä–µ–∏\n        private func presentImagePicker(webView: WKWebView, sourceType: UIImagePickerController.SourceType, completionHandler: @escaping ([URL]?) -> Void) {\n            guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n                  let window = windowScene.windows.first,\n                  let rootViewController = window.rootViewController else {\n                completionHandler(nil)\n                return\n            }\n            \n            let imagePicker = UIImagePickerController()\n            imagePicker.sourceType = sourceType\n            imagePicker.mediaTypes = [\"public.image\"]\n            \n            let coordinator = ImagePickerCoordinator(completionHandler: completionHandler)\n            imagePicker.delegate = coordinator\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º coordinator —á—Ç–æ–±—ã –æ–Ω –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è\n            objc_setAssociatedObject(imagePicker, \"coordinator\", coordinator, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)\n            \n            rootViewController.present(imagePicker, animated: true)\n        }\n        \n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º UIDocumentPickerViewController –¥–ª—è —Ñ–∞–π–ª–æ–≤\n        private func presentDocumentPicker(webView: WKWebView, completionHandler: @escaping ([URL]?) -> Void) {\n            guard let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n                  let window = windowScene.windows.first,\n                  let rootViewController = window.rootViewController else {\n                completionHandler(nil)\n                return\n            }\n            \n            let documentPicker = UIDocumentPickerViewController(forOpeningContentTypes: [.data, .image, .movie, .audio, .text, .pdf])\n            documentPicker.allowsMultipleSelection = false // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–±–æ—Ä\n            \n            let coordinator = DocumentPickerCoordinator(completionHandler: completionHandler)\n            documentPicker.delegate = coordinator\n            \n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º coordinator —á—Ç–æ–±—ã –æ–Ω –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è\n            objc_setAssociatedObject(documentPicker, \"coordinator\", coordinator, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)\n            \n            rootViewController.present(documentPicker, animated: true)\n        }\n    }\n}\n\n// MARK: - File Upload Coordinators\nclass ImagePickerCoordinator: NSObject, UIImagePickerControllerDelegate, UINavigationControllerDelegate {\n    let completionHandler: ([URL]?) -> Void\n    \n    init(completionHandler: @escaping ([URL]?) -> Void) {\n        self.completionHandler = completionHandler\n    }\n    \n    func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : Any]) {\n        picker.dismiss(animated: true)\n        \n        if let image = info[.originalImage] as? UIImage {\n            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É\n            let tempURL = saveImageToTempDirectory(image)\n            if let url = tempURL {\n                print(\"üì∏ Image saved to temp directory: \\(url.absoluteString)\")\n                completionHandler([url])\n            } else {\n                completionHandler(nil)\n            }\n        } else {\n            completionHandler(nil)\n        }\n    }\n    \n    func imagePickerControllerDidCancel(_ picker: UIImagePickerController) {\n        picker.dismiss(animated: true)\n        completionHandler(nil)\n    }\n    \n    private func saveImageToTempDirectory(_ image: UIImage) -> URL? {\n        guard let imageData = image.jpegData(compressionQuality: 0.8) else { return nil }\n        \n        let tempDirectory = FileManager.default.temporaryDirectory\n        let fileName = \"upload_image_\\(Date().timeIntervalSince1970).jpg\"\n        let fileURL = tempDirectory.appendingPathComponent(fileName)\n        \n        do {\n            try imageData.write(to: fileURL)\n            return fileURL\n        } catch {\n            print(\"‚ùå Error saving image: \\(error)\")\n            return nil\n        }\n    }\n}\n\nclass DocumentPickerCoordinator: NSObject, UIDocumentPickerDelegate {\n    let completionHandler: ([URL]?) -> Void\n    \n    init(completionHandler: @escaping ([URL]?) -> Void) {\n        self.completionHandler = completionHandler\n    }\n    \n    func documentPicker(_ controller: UIDocumentPickerViewController, didPickDocumentsAt urls: [URL]) {\n        print(\"üìÑ Documents selected: \\(urls.map { $0.lastPathComponent })\")\n        completionHandler(urls)\n    }\n    \n    func documentPickerWasCancelled(_ controller: UIDocumentPickerViewController) {\n        print(\"üìÑ Document picker cancelled\")\n        completionHandler(nil)\n    }\n}\n\n// MARK: - WebView Screen\nstruct WebViewScreen: View {\n    @EnvironmentObject var appState: AppState\n    @StateObject private var configService = ConfigService.shared\n    @State private var isLoading = false // –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—á–∏–Ω–∞–µ–º —Å false\n    @State private var showError = false\n    @State private var errorMessage = \"\"\n    @State private var hasAppeared = false\n    @State private var webViewOpacity: Double = 1.0\n    @State private var pendingRedirectURL: String? // URL –æ–∂–∏–¥–∞—é—â–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n    @State private var redirectCompletionTimer: Timer? // –¢–∞–π–º–µ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏\n    @State private var userHasNavigated = false // –§–ª–∞–≥ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—à–µ–ª –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É\n    @State private var lastUserNavigationTime: Date? // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏\n    \n    var body: some View {\n        GeometryReader { geometry in\n            let isLandscape = geometry.size.width > geometry.size.height\n            \n            ZStack {\n                if let url = appState.currentURL, !url.isEmpty {\n                    WebView(\n                        url: url,\n                        isLoading: $isLoading,\n                        onNavigationAction: { navigationURL in\n                            return true\n                        },\n                        onLoadFinished: {\n                            // WebView –∑–∞–≥—Ä—É–∂–µ–Ω\n                        },\n                        onLoadError: { error in\n                            handleWebViewError(error)\n                        },\n                        onRedirectLimitReached: { intermediateURL in\n                            handleRedirectLimitReached(intermediateURL)\n                        },\n                        onRedirectDetected: {\n                            handleRedirectDetected()\n                        },\n                        onUserNavigation: { navigationURL, navigationTime in\n                            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é\n                            if navigationURL != url {\n                                userHasNavigated = true\n                                lastUserNavigationTime = navigationTime\n                                print(\"üë§ User navigation detected to: \\(navigationURL)\")\n                            }\n                        }\n                    )\n                    .background(Color.black) // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–µ–ª—å–∫–∞–Ω–∏—è\n                    .opacity(webViewOpacity)\n                    .animation(.easeInOut(duration: 0.2), value: webViewOpacity)\n                    .id(url) // ID –ø–æ –ø–æ–ª–Ω–æ–º—É URL –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n                    .ignoresSafeArea(edges: isLandscape ? .top : .horizontal) // Portrait: –±–µ–∑ –æ—Ç—Å—Ç—É–ø–æ–≤ —Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞, Landscape: –±–µ–∑ –æ—Ç—Å—Ç—É–ø–∞ —Å–≤–µ—Ä—Ö—É\n                    .ignoresSafeArea(.keyboard) // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ WebView –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (iOS 15.6+)\n                } else {\n                    LoadingOrErrorView(\n                        isLoading: isLoading,\n                        errorMessage: errorMessage,\n                        onRetry: {\n                            loadWebViewURL()\n                        }\n                    )\n                }\n                \n            }\n        }\n        .background(Color.black) // –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω –¥–ª—è Safe Area\n        .onAppear {\n            if !hasAppeared {\n                hasAppeared = true\n                // –ó–∞–≥—Ä—É–∂–∞–µ–º URL –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –∏–ª–∏ –æ–Ω –∏—Å—Ç–µ–∫\n                if appState.currentURL?.isEmpty != false || appState.isURLExpired() {\n                    loadWebViewURL()\n                }\n            }\n        }\n        .alert(isPresented: $showError) {\n            Alert(\n                title: Text(\"Error\"),\n                message: Text(errorMessage),\n                primaryButton: .default(Text(\"–ü–æ–≤—Ç–æ—Ä–∏—Ç—å\")) {\n                    loadWebViewURL()\n                },\n                secondaryButton: .cancel()\n            )\n        }\n    }\n    \n    private func loadWebViewURL() {\n        guard !isLoading else { return }\n        \n        // –ü–†–ò–û–†–ò–¢–ï–¢: –ï—Å–ª–∏ —ç—Ç–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π URL –æ—Ç push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ\n        if appState.isOneTimeNotificationURL {\n            print(\"üö´ One-time notification URL active - skipping config URL loading\")\n            print(\"üì± Current notification URL: \\(appState.currentURL ?? \"nil\")\")\n            return\n        }\n        \n        // –ï—Å–ª–∏ –µ—Å—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π URL, –Ω–µ –¥–µ–ª–∞–µ–º –Ω–∏—á–µ–≥–æ\n        if let savedURL = appState.currentURL, !savedURL.isEmpty, !appState.isURLExpired() {\n            return\n        }\n        \n        isLoading = true\n        showError = false\n        \n        guard let conversionData = appState.conversionData else {\n            handleConfigError(.noData)\n            return\n        }\n        \n        configService.fetchConfig(\n            conversionData: conversionData,\n            appsflyerID: appState.appsflyerID,\n            pushToken: appState.pushToken\n        ) { result in\n            DispatchQueue.main.async {\n                switch result {\n                case .success(let response):\n                    if let url = response.url, let expires = response.expires {\n                        print(\"‚úÖ Got URL from server: \\(url)\")\n                        self.isLoading = false\n                        self.appState.saveURL(url, expires: expires)\n                    } else {\n                        self.isLoading = false\n                        self.handleConfigError(.invalidResponse)\n                    }\n                    \n                case .failure(let error):\n                    self.isLoading = false\n                    self.handleConfigError(error)\n                }\n            }\n        }\n    }\n    \n    private func handleConfigError(_ error: ConfigError) {\n        switch error {\n        case .noInternetConnection:\n            if let savedURL = appState.currentURL, !savedURL.isEmpty {\n                return\n            } else {\n                errorMessage = \"No ethernet connection\"\n                showError = true\n            }\n            \n        case .serverError(let code, _):\n            if code == 404 || code >= 400 {\n                appState.setAppMode(.game)\n                return\n            }\n            fallthrough\n            \n        default:\n            if let savedURL = appState.currentURL, !savedURL.isEmpty {\n                return\n            }\n            \n            errorMessage = error.localizedDescription\n            showError = true\n        }\n    }\n    \n    private func handleWebViewError(_ error: Error) {\n        let nsError = error as NSError\n        \n        if nsError.code == NSURLErrorCancelled {\n            return\n        }\n        \n        errorMessage = \"Error while loading: \\(error.localizedDescription)\"\n        showError = true\n    }\n    \n    private func handleRedirectLimitReached(_ intermediateURL: String) {\n        print(\"üîÑ ===== REDIRECT LIMIT HANDLER =====\")\n        print(\"üîó Intermediate URL: \\(intermediateURL)\")\n        print(\"‚è∞ Time: \\(Date())\")\n        \n        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π URL, –Ω–æ –ù–ï –æ–±–Ω–æ–≤–ª—è–µ–º WebView —Å—Ä–∞–∑—É\n        pendingRedirectURL = intermediateURL\n        \n        print(\"üíæ Saved intermediate URL for later application\")\n        print(\"‚è≥ Waiting for redirect chain to complete...\")\n        \n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤\n        redirectCompletionTimer?.invalidate()\n        redirectCompletionTimer = Timer.scheduledTimer(withTimeInterval: 2.0, repeats: false) { _ in\n            DispatchQueue.main.async {\n                self.applyPendingRedirectURL()\n            }\n        }\n        \n        print(\"====================================\")\n    }\n    \n    private func applyPendingRedirectURL() {\n        guard let pendingURL = pendingRedirectURL else { return }\n        \n        print(\"üîÑ ===== APPLYING PENDING REDIRECT URL =====\")\n        print(\"üîó Final URL: \\(pendingURL)\")\n        print(\"‚è∞ Time: \\(Date())\")\n        \n        // –ü–ª–∞–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º WebView\n        withAnimation(.easeInOut(duration: 0.2)) {\n            webViewOpacity = 0.0\n        }\n        \n        // –ü–æ—Å–ª–µ —Å–∫—Ä—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª—è–µ–º URL\n        DispatchQueue.main.asyncAfter(deadline: .now() + 0.3) {\n            self.appState.currentURL = pendingURL\n            self.pendingRedirectURL = nil\n            \n            print(\"‚úÖ Applied final redirect URL\")\n            \n            // –ü–ª–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º WebView —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º URL\n            DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) {\n                withAnimation(.easeInOut(duration: 0.3)) {\n                    self.webViewOpacity = 1.0\n                }\n            }\n        }\n        \n        print(\"==========================================\")\n    }\n    \n    private func handleRedirectDetected() {\n        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ\n        redirectCompletionTimer?.invalidate()\n        \n        // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π URL, –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º –æ–∂–∏–¥–∞–Ω–∏–µ\n        if pendingRedirectURL != nil {\n            redirectCompletionTimer = Timer.scheduledTimer(withTimeInterval: 2.0, repeats: false) { _ in\n                DispatchQueue.main.async {\n                    self.applyPendingRedirectURL()\n                }\n            }\n            print(\"‚è≥ Redirect detected - extending completion timer\")\n        }\n    }\n}\n\n// MARK: - Loading/Error View\nstruct LoadingOrErrorView: View {\n    let isLoading: Bool\n    let errorMessage: String\n    let onRetry: () -> Void\n    \n    var body: some View {\n        VStack(spacing: 20) {\n            Spacer()\n            \n            if isLoading {\n                VStack(spacing: 16) {\n                    ProgressView()\n                        .scaleEffect(1.5)\n                        .progressViewStyle(CircularProgressViewStyle(tint: .blue))\n                    \n                                            Text(\"Loading\")\n                            .font(.headline)\n                            .foregroundColor(.primary)\n                }\n            } else if !errorMessage.isEmpty {\n                VStack(spacing: 16) {\n                    Image(systemName: \"wifi.slash\")\n                        .font(.system(size: 50))\n                        .foregroundColor(.red)\n                    \n                    Text(\"No ethernet connection\")\n                        .font(.title2)\n                        .fontWeight(.semibold)\n                        .foregroundColor(.primary)\n                    \n                    Text(\"Check your connection and try again\")\n                        .font(.body)\n                        .foregroundColor(.secondary)\n                        .multilineTextAlignment(.center)\n                        .padding(.horizontal)\n                    \n                    Button(\"Retry\") {\n                        onRetry()\n                    }\n                    .padding()\n                    .background(Color.blue)\n                    .foregroundColor(.white)\n                    .cornerRadius(10)\n                }\n            }\n            \n            Spacer()\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .background(Color(.systemBackground))\n    }\n}\n\nstruct GameButtonStyle: ButtonStyle {\n    let color: Color\n    \n    func makeBody(configuration: Configuration) -> some View {\n        configuration.label\n            .font(.headline)\n            .foregroundColor(.white)\n            .padding(.horizontal, 24)\n            .padding(.vertical, 12)\n            .background(color)\n            .cornerRadius(10)\n            .scaleEffect(configuration.isPressed ? 0.95 : 1.0)\n            .animation(.easeInOut(duration: 0.1), value: configuration.isPressed)\n    }\n}\n\n// MARK: - Notification Permission View\nstruct NotificationPermissionView: View {\n    @EnvironmentObject var appState: AppState\n    @State private var isAnimating = false\n    \n    var onPermissionGranted: () -> Void\n    var onPermissionSkipped: () -> Void\n    \n    var body: some View {\n        GeometryReader { geometry in\n            let isLandscape = geometry.size.width > geometry.size.height\n            let horizontalPadding: CGFloat = isLandscape ? max(60, geometry.size.width * 0.15) : 20\n            let maxContentWidth: CGFloat = isLandscape ? min(600, geometry.size.width * 0.7) : geometry.size.width\n            \n            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤\n            let isSmallDevice = geometry.size.height < 700 // iPhone SE, iPhone 12 mini –∏ –ø–æ–¥–æ–±–Ω—ã–µ\n            let safeAreaBottom = geometry.safeAreaInsets.bottom\n            let bottomPadding: CGFloat = {\n                if isLandscape {\n                    // –í –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–µ–º home indicator –∏ —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n                    if isSmallDevice {\n                        return max(50, safeAreaBottom + 20) // –ú–∏–Ω–∏–º—É–º 50, –Ω–æ –Ω–µ –º–µ–Ω—å—à–µ safe area + 20\n                    } else {\n                        return max(40, safeAreaBottom + 15) // –î–ª—è –±–æ–ª—å—à–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤\n                    }\n                } else {\n                    return max(40, safeAreaBottom + 10) // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è\n                }\n            }()\n            \n            ZStack {\n                LinearGradient(\n                    gradient: Gradient(colors: [\n                        Color(red: 0.1, green: 0.2, blue: 0.4),\n                        Color(red: 0.2, green: 0.1, blue: 0.3),\n                        Color(red: 0.1, green: 0.1, blue: 0.2)\n                    ]),\n                    startPoint: .topLeading,\n                    endPoint: .bottomTrailing\n                )\n                .ignoresSafeArea()\n                \n                HStack {\n                    Spacer()\n                    \n                    VStack(spacing: 0) {\n                        Spacer()\n                        \n                        // –ò–∫–æ–Ω–∫–∞\n                        ZStack {\n                            Circle()\n                                .fill(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.yellow, .orange]),\n                                        startPoint: .topLeading,\n                                        endPoint: .bottomTrailing\n                                    )\n                                )\n                                .frame(width: isLandscape ? 100 : 120, height: isLandscape ? 100 : 120)\n                            \n                            Image(systemName: \"bell.fill\")\n                                .font(.system(size: isLandscape ? 40 : 50, weight: .medium))\n                                .foregroundColor(.white)\n                            \n                            Circle()\n                                .fill(Color.red)\n                                .frame(width: isLandscape ? 20 : 24, height: isLandscape ? 20 : 24)\n                                .offset(x: isLandscape ? 30 : 35, y: isLandscape ? -30 : -35)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 40)\n                        \n                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ\n                        VStack(spacing: isLandscape ? 15 : 20) {\n                            Text(\"Get Notifications\")\n                                .font(.system(size: isLandscape ? 24 : 28, weight: .bold, design: .rounded))\n                                .foregroundColor(.white)\n                                .multilineTextAlignment(.center)\n                            \n                            VStack(spacing: isLandscape ? 8 : 12) {\n                                \n                                Text(\"Be among the first to receive gifts and bonuses\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .foregroundColor(.white.opacity(0.9))\n                                    .multilineTextAlignment(.center)\n                            }\n                            .padding(.horizontal, 20)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 50)\n                        \n                        Spacer()\n                        \n                        // –ö–Ω–æ–ø–∫–∏\n                        VStack(spacing: isLandscape ? 12 : 16) {\n                            Button(action: {\n                                requestNotificationPermission()\n                            }) {\n                                HStack {\n                                    Image(systemName: \"gift.fill\")\n                                        .font(isLandscape ? .body : .title3)\n                                    \n                                    Text(\"Enable Notifications\")\n                                        .font(isLandscape ? .body : .headline)\n                                        .fontWeight(.semibold)\n                                }\n                                .foregroundColor(.white)\n                                .frame(maxWidth: .infinity)\n                                .frame(height: isLandscape ? 48 : 56)\n                                .background(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.green, .blue]),\n                                        startPoint: .leading,\n                                        endPoint: .trailing\n                                    )\n                                )\n                                .cornerRadius(isLandscape ? 24 : 28)\n                                .shadow(color: .green.opacity(0.3), radius: 10, x: 0, y: 5)\n                            }\n                            \n                            Button(action: {\n                                skipNotificationPermission()\n                            }) {\n                                Text(\"Skip\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .fontWeight(.medium)\n                                    .foregroundColor(.white.opacity(0.7))\n                                    .frame(maxWidth: .infinity)\n                                    .frame(height: isLandscape ? 40 : 44)\n                                    .background(Color.white.opacity(0.1))\n                                    .cornerRadius(isLandscape ? 20 : 22)\n                                    .overlay(\n                                        RoundedRectangle(cornerRadius: isLandscape ? 20 : 22)\n                                            .stroke(Color.white.opacity(0.2), lineWidth: 1)\n                                    )\n                            }\n                        }\n                        .padding(.horizontal, 20)\n                        .padding(.bottom, bottomPadding)\n                    }\n                    .frame(maxWidth: maxContentWidth)\n                    .padding(.horizontal, horizontalPadding)\n                    \n                    Spacer()\n                }\n            }\n        }\n        .onAppear {\n            withAnimation {\n                isAnimating = true\n            }\n        }\n    }\n    \n    private func requestNotificationPermission() {\n        UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .badge, .sound]) { granted, error in\n            DispatchQueue.main.async {\n                if granted {\n                    self.onPermissionGranted()\n                } else {\n                    self.appState.saveNotificationPermissionDenied()\n                    self.onPermissionSkipped()\n                }\n            }\n        }\n    }\n    \n    private func skipNotificationPermission() {\n        appState.saveNotificationPermissionDenied()\n        onPermissionSkipped()\n    }\n}\n\n// MARK: - No Internet Connection View\nstruct NoInternetConnectionView: View {\n    @State private var isAnimating = false\n    \n    var onRetry: () -> Void\n    \n    var body: some View {\n        GeometryReader { geometry in\n            let isLandscape = geometry.size.width > geometry.size.height\n            let horizontalPadding: CGFloat = isLandscape ? max(60, geometry.size.width * 0.15) : 20\n            let maxContentWidth: CGFloat = isLandscape ? min(600, geometry.size.width * 0.7) : geometry.size.width\n            \n            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤\n            let isSmallDevice = geometry.size.height < 700 // iPhone SE, iPhone 12 mini –∏ –ø–æ–¥–æ–±–Ω—ã–µ\n            let safeAreaBottom = geometry.safeAreaInsets.bottom\n            let bottomPadding: CGFloat = {\n                if isLandscape {\n                    // –í –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ —É—á–∏—Ç—ã–≤–∞–µ–º home indicator –∏ —Ä–∞–∑–º–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n                    if isSmallDevice {\n                        return max(50, safeAreaBottom + 20) // –ú–∏–Ω–∏–º—É–º 50, –Ω–æ –Ω–µ –º–µ–Ω—å—à–µ safe area + 20\n                    } else {\n                        return max(40, safeAreaBottom + 15) // –î–ª—è –±–æ–ª—å—à–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤\n                    }\n                } else {\n                    return max(40, safeAreaBottom + 10) // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è\n                }\n            }()\n            \n            ZStack {\n                LinearGradient(\n                    gradient: Gradient(colors: [\n                        Color(red: 0.1, green: 0.15, blue: 0.25),\n                        Color(red: 0.15, green: 0.1, blue: 0.2),\n                        Color(red: 0.1, green: 0.1, blue: 0.15)\n                    ]),\n                    startPoint: .topLeading,\n                    endPoint: .bottomTrailing\n                )\n                .ignoresSafeArea()\n                \n                HStack {\n                    Spacer()\n                    \n                    VStack(spacing: 0) {\n                        Spacer()\n                        \n                        // –ò–∫–æ–Ω–∫–∞\n                        ZStack {\n                            Circle()\n                                .fill(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.red, .orange]),\n                                        startPoint: .topLeading,\n                                        endPoint: .bottomTrailing\n                                    )\n                                )\n                                .frame(width: isLandscape ? 100 : 120, height: isLandscape ? 100 : 120)\n                            \n                            Image(systemName: \"wifi.slash\")\n                                .font(.system(size: isLandscape ? 40 : 50, weight: .medium))\n                                .foregroundColor(.white)\n                            \n                            Circle()\n                                .fill(Color.red)\n                                .frame(width: isLandscape ? 20 : 24, height: isLandscape ? 20 : 24)\n                                .offset(x: isLandscape ? 30 : 35, y: isLandscape ? -30 : -35)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 40)\n                        .scaleEffect(isAnimating ? 1.0 : 0.8)\n                        .animation(.easeOut(duration: 0.6), value: isAnimating)\n                        \n                        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ\n                        VStack(spacing: isLandscape ? 15 : 20) {\n                            Text(\"No Internet Connection\")\n                                .font(.system(size: isLandscape ? 24 : 28, weight: .bold, design: .rounded))\n                                .foregroundColor(.white)\n                                .multilineTextAlignment(.center)\n                            \n                            VStack(spacing: isLandscape ? 8 : 12) {\n                                Text(\"Please check your internet connection\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .foregroundColor(.white.opacity(0.9))\n                                    .multilineTextAlignment(.center)\n                                \n                                Text(\"Make sure Wi-Fi or cellular data is enabled\")\n                                    .font(isLandscape ? .callout : .body)\n                                    .foregroundColor(.white.opacity(0.9))\n                                    .multilineTextAlignment(.center)\n                            }\n                            .padding(.horizontal, 20)\n                        }\n                        .padding(.bottom, isLandscape ? 30 : 50)\n                        .opacity(isAnimating ? 1.0 : 0.0)\n                        .animation(.easeOut(duration: 0.8).delay(0.2), value: isAnimating)\n                        \n                        Spacer()\n                        \n                        // –ö–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞\n                        VStack(spacing: isLandscape ? 12 : 16) {\n                            Button(action: {\n                                onRetry()\n                            }) {\n                                HStack {\n                                    Image(systemName: \"arrow.clockwise\")\n                                        .font(isLandscape ? .body : .title3)\n                                    \n                                    Text(\"Try Again\")\n                                        .font(isLandscape ? .body : .headline)\n                                        .fontWeight(.semibold)\n                                }\n                                .foregroundColor(.white)\n                                .frame(maxWidth: .infinity)\n                                .frame(height: isLandscape ? 48 : 56)\n                                .background(\n                                    LinearGradient(\n                                        gradient: Gradient(colors: [.blue, .cyan]),\n                                        startPoint: .leading,\n                                        endPoint: .trailing\n                                    )\n                                )\n                                .cornerRadius(isLandscape ? 24 : 28)\n                                .shadow(color: .blue.opacity(0.3), radius: 10, x: 0, y: 5)\n                            }\n                        }\n                        .padding(.horizontal, 20)\n                        .padding(.bottom, bottomPadding)\n                        .opacity(isAnimating ? 1.0 : 0.0)\n                        .animation(.easeOut(duration: 0.8).delay(0.4), value: isAnimating)\n                    }\n                    .frame(maxWidth: maxContentWidth)\n                    .padding(.horizontal, horizontalPadding)\n                    \n                    Spacer()\n                }\n            }\n        }\n        .onAppear {\n            withAnimation {\n                isAnimating = true\n            }\n        }\n    }\n}\n\n// MARK: - Loading View\nstruct LoadingView: View {\n    @State private var isAnimating = false\n    @State private var rotationAngle: Double = 0\n    \n    var body: some View {\n        GeometryReader { geometry in\n            ZStack {\n                LinearGradient(\n                    gradient: Gradient(colors: [\n                        Color(red: 0.05, green: 0.1, blue: 0.2),\n                        Color(red: 0.1, green: 0.05, blue: 0.15),\n                        Color(red: 0.05, green: 0.05, blue: 0.1)\n                    ]),\n                    startPoint: .topLeading,\n                    endPoint: .bottomTrailing\n                )\n                .ignoresSafeArea()\n                \n                VStack(spacing: 30) {\n                    Spacer()\n                    \n                    // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏\n                    ZStack {\n                        Circle()\n                            .stroke(Color.white.opacity(0.2), lineWidth: 4)\n                            .frame(width: 60, height: 60)\n                        \n                        Circle()\n                            .trim(from: 0, to: 0.7)\n                            .stroke(\n                                LinearGradient(\n                                    gradient: Gradient(colors: [.blue, .cyan, .blue]),\n                                    startPoint: .topLeading,\n                                    endPoint: .bottomTrailing\n                                ),\n                                style: StrokeStyle(lineWidth: 4, lineCap: .round)\n                            )\n                            .frame(width: 60, height: 60)\n                            .rotationEffect(.degrees(rotationAngle))\n                    }\n                    \n                    // –¢–µ–∫—Å—Ç\n                    VStack(spacing: 8) {\n                        Text(DataManager.currentAppName)\n                        .font(.system(size: 32, weight: .bold, design: .rounded))\n                        .foregroundColor(.white)\n                        .padding(.horizontal)\n                        .multilineTextAlignment(.center)\n                    \n                    Text(\"Loading\")\n                        .font(.body)\n                        .foregroundColor(.white.opacity(0.8))\n                    }\n                    \n                    Spacer()\n                    Spacer()\n                }\n            }\n        }\n        .onAppear {\n            withAnimation {\n                isAnimating = true\n            }\n            \n            withAnimation(.linear(duration: 1.5).repeatForever(autoreverses: false)) {\n                rotationAngle = 360\n            }\n        }\n    }\n}\n\n// MARK: - Error View\nstruct ErrorView: View {\n    let title: String\n    let message: String\n    let buttonTitle: String\n    let action: () -> Void\n    \n    var body: some View {\n        VStack(spacing: 20) {\n            Image(systemName: \"exclamationmark.triangle\")\n                .font(.system(size: 50))\n                .foregroundColor(.red)\n            \n            Text(title)\n                .font(.title2)\n                .fontWeight(.semibold)\n            \n            Text(message)\n                .font(.body)\n                .foregroundColor(.secondary)\n                .multilineTextAlignment(.center)\n                .padding(.horizontal)\n            \n            Button(buttonTitle) {\n                action()\n            }\n            .padding()\n            .background(Color.blue)\n            .foregroundColor(.white)\n            .cornerRadius(10)\n        }\n        .padding()\n    }\nChicEnergetic Spark";
				INFOPLIST_KEY_UIApplicationSceneManifest_Generation = YES;
				INFOPLIST_KEY_UIApplicationSupportsIndirectInputEvents = YES;
				INFOPLIST_KEY_UILaunchScreen_Generation = YES;
				INFOPLIST_KEY_UILaunchStoryboardName = "Launch Screen.storyboard";
				INFOPLIST_KEY_UISupportedInterfaceOrientations = UIInterfaceOrientationPortrait;
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPad = "UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight UIInterfaceOrientationPortrait UIInterfaceOrientationPortraitUpsideDown";
				IPHONEOS_DEPLOYMENT_TARGET = 15.6;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.2;
				PRODUCT_BUNDLE_IDENTIFIER = IOI.cc92;
				PRODUCT_NAME = "$(TARGET_NAME)";
				STRING_CATALOG_GENERATE_SYMBOLS = YES;
				SUPPORTED_PLATFORMS = "iphoneos iphonesimulator";
				SUPPORTS_MACCATALYST = NO;
				SUPPORTS_MAC_DESIGNED_FOR_IPHONE_IPAD = NO;
				SUPPORTS_XR_DESIGNED_FOR_IPHONE_IPAD = NO;
				SWIFT_APPROACHABLE_CONCURRENCY = YES;
				SWIFT_DEFAULT_ACTOR_ISOLATION = MainActor;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = 1;
			};
			name = Release;
		};
		78BD09B32ECB63DA0007C67E /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 26.1;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = IOI.cc92Tests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				STRING_CATALOG_GENERATE_SYMBOLS = NO;
				SWIFT_APPROACHABLE_CONCURRENCY = YES;
				SWIFT_EMIT_LOC_STRINGS = NO;
				SWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2";
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/cc92.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/cc92";
			};
			name = Debug;
		};
		78BD09B42ECB63DA0007C67E /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 26.1;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = IOI.cc92Tests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				STRING_CATALOG_GENERATE_SYMBOLS = NO;
				SWIFT_APPROACHABLE_CONCURRENCY = YES;
				SWIFT_EMIT_LOC_STRINGS = NO;
				SWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2";
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/cc92.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/cc92";
			};
			name = Release;
		};
		78BD09B62ECB63DA0007C67E /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = IOI.cc92UITests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				STRING_CATALOG_GENERATE_SYMBOLS = NO;
				SWIFT_APPROACHABLE_CONCURRENCY = YES;
				SWIFT_EMIT_LOC_STRINGS = NO;
				SWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2";
				TEST_TARGET_NAME = cc92;
			};
			name = Debug;
		};
		78BD09B72ECB63DA0007C67E /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = IOI.cc92UITests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				STRING_CATALOG_GENERATE_SYMBOLS = NO;
				SWIFT_APPROACHABLE_CONCURRENCY = YES;
				SWIFT_EMIT_LOC_STRINGS = NO;
				SWIFT_UPCOMING_FEATURE_MEMBER_IMPORT_VISIBILITY = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2";
				TEST_TARGET_NAME = cc92;
			};
			name = Release;
		};
/* End XCBuildConfiguration section */

/* Begin XCConfigurationList section */
		78BD09892ECB63D70007C67E /* Build configuration list for PBXProject "cc92" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				78BD09AD2ECB63DA0007C67E /* Debug */,
				78BD09AE2ECB63DA0007C67E /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		78BD09AF2ECB63DA0007C67E /* Build configuration list for PBXNativeTarget "cc92" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				78BD09B02ECB63DA0007C67E /* Debug */,
				78BD09B12ECB63DA0007C67E /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		78BD09B22ECB63DA0007C67E /* Build configuration list for PBXNativeTarget "cc92Tests" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				78BD09B32ECB63DA0007C67E /* Debug */,
				78BD09B42ECB63DA0007C67E /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		78BD09B52ECB63DA0007C67E /* Build configuration list for PBXNativeTarget "cc92UITests" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				78BD09B62ECB63DA0007C67E /* Debug */,
				78BD09B72ECB63DA0007C67E /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
/* End XCConfigurationList section */
	};
	rootObject = 78BD09862ECB63D70007C67E /* Project object */;
}
